<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (12.0.2) on Wed Mar 15 08:58:13 CST 2023 -->
<title>Store (server 6.8.4.5-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="dc.created" content="2023-03-15">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Store (server 6.8.4.5-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":9,"i5":10,"i6":9,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":9,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":9,"i21":10,"i22":9,"i23":10,"i24":10,"i25":10,"i26":9,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":9,"i34":9,"i35":9};
var tabs = {65535:["t0","\u6240\u6709\u65B9\u6CD5"],1:["t1","\u9759\u6001\u65B9\u6CD5"],2:["t2","\u5B9E\u4F8B\u65B9\u6CD5"],8:["t4","\u5177\u4F53\u65B9\u6CD5"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../index.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../index-all.html">索引</a></li>
<li><a href="../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">程序包</span>&nbsp;<a href="package-summary.html">org.elasticsearch.index.store</a></div>
<h2 title="类 Store" class="title">类 Store</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../shard/AbstractIndexShardComponent.html" title="org.elasticsearch.index.shard中的类">org.elasticsearch.index.shard.AbstractIndexShardComponent</a></li>
<li>
<ul class="inheritance">
<li>org.elasticsearch.index.store.Store</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>所有已实现的接口:</dt>
<dd><code>java.io.Closeable</code>, <code>java.lang.AutoCloseable</code>, <code><a href="../../common/util/concurrent/RefCounted.html" title="org.elasticsearch.common.util.concurrent中的接口">RefCounted</a></code>, <code><a href="../shard/IndexShardComponent.html" title="org.elasticsearch.index.shard中的接口">IndexShardComponent</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">Store</span>
extends <a href="../shard/AbstractIndexShardComponent.html" title="org.elasticsearch.index.shard中的类">AbstractIndexShardComponent</a>
implements java.io.Closeable, <a href="../../common/util/concurrent/RefCounted.html" title="org.elasticsearch.common.util.concurrent中的接口">RefCounted</a></pre>
<div class="block">A Store provides plain access to files written by an elasticsearch index shard. Each shard
 has a dedicated store that is uses to access Lucene's Directory which represents the lowest level
 of file abstraction in Lucene used to read and write Lucene indices.
 This class also provides access to metadata information like checksums for committed files. A committed
 file is a file that belongs to a segment written by a Lucene commit. Files that have not been committed
 ie. created during a merge or a shard refresh / NRT reopen are not considered in the MetadataSnapshot.
 <p>
 Note: If you use a store it's reference count should be increased before using it by calling #incRef and a
 corresponding #decRef must be called in a try/finally block to release the store again ie.:
 <pre>
      store.incRef();
      try {
        // use the store...

      } finally {
          store.decRef();
      }
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>嵌套类概要</h3>
<div class="memberSummary">
<table>
<caption><span>嵌套类</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">修饰符和类型</th>
<th class="colSecond" scope="col">类</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类">Store.MetadataSnapshot</a></span></code></th>
<td class="colLast">
<div class="block">Represents a snapshot of the current directory build from the latest Lucene commit.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="Store.OnClose.html" title="org.elasticsearch.index.store中的接口">Store.OnClose</a></span></code></th>
<td class="colLast">
<div class="block">A listener that is executed once the store is closed and all references to it are released</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="Store.RecoveryDiff.html" title="org.elasticsearch.index.store中的类">Store.RecoveryDiff</a></span></code></th>
<td class="colLast">
<div class="block">A class representing the diff between a recovery source and recovery target</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>字段概要</h3>
<div class="memberSummary">
<table>
<caption><span>字段</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">修饰符和类型</th>
<th class="colSecond" scope="col">字段</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#CORRUPTED">CORRUPTED</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../common/settings/Setting.html" title="org.elasticsearch.common.settings中的类">Setting</a>&lt;<a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-core/6.8.4.5-SNAPSHOT/org/elasticsearch/common/unit/TimeValue.html?is-external=true" title="org.elasticsearch.common.unit中的类或接口" class="externalLink">TimeValue</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#INDEX_STORE_STATS_REFRESH_INTERVAL_SETTING">INDEX_STORE_STATS_REFRESH_INTERVAL_SETTING</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<ul class="blockList">
<li class="blockList"><a id="fields.inherited.from.class.org.elasticsearch.index.shard.AbstractIndexShardComponent">
<!--   -->
</a>
<h3>从类继承的字段&nbsp;org.elasticsearch.index.shard.<a href="../shard/AbstractIndexShardComponent.html" title="org.elasticsearch.index.shard中的类">AbstractIndexShardComponent</a></h3>
<code><a href="../shard/AbstractIndexShardComponent.html#deprecationLogger">deprecationLogger</a>, <a href="../shard/AbstractIndexShardComponent.html#indexSettings">indexSettings</a>, <a href="../shard/AbstractIndexShardComponent.html#logger">logger</a>, <a href="../shard/AbstractIndexShardComponent.html#shardId">shardId</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<div class="memberSummary">
<table>
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">构造器</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.elasticsearch.index.shard.ShardId,org.elasticsearch.index.IndexSettings,org.apache.lucene.store.Directory,org.elasticsearch.env.ShardLock)">Store</a></span>&#8203;(<a href="../shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
     <a href="../IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
     org.apache.lucene.store.Directory&nbsp;directory,
     <a href="../../env/ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a>&nbsp;shardLock)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.elasticsearch.index.shard.ShardId,org.elasticsearch.index.IndexSettings,org.apache.lucene.store.Directory,org.elasticsearch.env.ShardLock,org.elasticsearch.index.store.Store.OnClose)">Store</a></span>&#8203;(<a href="../shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
     <a href="../IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
     org.apache.lucene.store.Directory&nbsp;directory,
     <a href="../../env/ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a>&nbsp;shardLock,
     <a href="Store.OnClose.html" title="org.elasticsearch.index.store中的接口">Store.OnClose</a>&nbsp;onClose)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">所有方法</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">静态方法</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">实例方法</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">具体方法</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<tr>
<th class="colFirst" scope="col">修饰符和类型</th>
<th class="colSecond" scope="col">方法</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#associateIndexWithNewTranslog(java.lang.String)">associateIndexWithNewTranslog</a></span>&#8203;(java.lang.String&nbsp;translogUUID)</code></th>
<td class="colLast">
<div class="block">Force bakes the given translog generation as recovery information in the lucene index.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bootstrapNewHistory()">bootstrapNewHistory</a></span>()</code></th>
<td class="colLast">
<div class="block">Marks an existing lucene index with a new history uuid.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bootstrapNewHistory(long,long)">bootstrapNewHistory</a></span>&#8203;(long&nbsp;localCheckpoint,
                   long&nbsp;maxSeqNo)</code></th>
<td class="colLast">
<div class="block">Marks an existing lucene index with a new history uuid and sets the given local checkpoint
 as well as the maximum sequence number.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>org.apache.lucene.index.CheckIndex.Status</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkIndex(java.io.PrintStream)">checkIndex</a></span>&#8203;(java.io.PrintStream&nbsp;out)</code></th>
<td class="colLast">
<div class="block">Checks and returns the status of the existing index in this store.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkIntegrity(org.elasticsearch.index.store.StoreFileMetaData,org.apache.lucene.store.Directory)">checkIntegrity</a></span>&#8203;(<a href="StoreFileMetaData.html" title="org.elasticsearch.index.store中的类">StoreFileMetaData</a>&nbsp;md,
              org.apache.lucene.store.Directory&nbsp;directory)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkIntegrityNoException(org.elasticsearch.index.store.StoreFileMetaData)">checkIntegrityNoException</a></span>&#8203;(<a href="StoreFileMetaData.html" title="org.elasticsearch.index.store中的类">StoreFileMetaData</a>&nbsp;md)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkIntegrityNoException(org.elasticsearch.index.store.StoreFileMetaData,org.apache.lucene.store.Directory)">checkIntegrityNoException</a></span>&#8203;(<a href="StoreFileMetaData.html" title="org.elasticsearch.index.store中的类">StoreFileMetaData</a>&nbsp;md,
                         org.apache.lucene.store.Directory&nbsp;directory)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cleanupAndVerify(java.lang.String,org.elasticsearch.index.store.Store.MetadataSnapshot)">cleanupAndVerify</a></span>&#8203;(java.lang.String&nbsp;reason,
                <a href="Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类">Store.MetadataSnapshot</a>&nbsp;sourceMetaData)</code></th>
<td class="colLast">
<div class="block">This method deletes every file in this store that is not contained in the given source meta data or is a
 legacy checksum file.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createEmpty()">createEmpty</a></span>()</code></th>
<td class="colLast">
<div class="block">creates an empty lucene index and a corresponding empty translog.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>org.apache.lucene.store.IndexOutput</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createVerifyingOutput(java.lang.String,org.elasticsearch.index.store.StoreFileMetaData,org.apache.lucene.store.IOContext)">createVerifyingOutput</a></span>&#8203;(java.lang.String&nbsp;fileName,
                     <a href="StoreFileMetaData.html" title="org.elasticsearch.index.store中的类">StoreFileMetaData</a>&nbsp;metadata,
                     org.apache.lucene.store.IOContext&nbsp;context)</code></th>
<td class="colLast">
<div class="block">The returned IndexOutput validates the files checksum.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#decRef()">decRef</a></span>()</code></th>
<td class="colLast">
<div class="block">Decreases the refCount of this Store instance.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteQuiet(java.lang.String...)">deleteQuiet</a></span>&#8203;(java.lang.String...&nbsp;files)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#digestToString(long)">digestToString</a></span>&#8203;(long&nbsp;digest)</code></th>
<td class="colLast">
<div class="block">Produces a string representation of the given digest value.</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>org.apache.lucene.store.Directory</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#directory()">directory</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ensureIndexHas6xCommitTags()">ensureIndexHas6xCommitTags</a></span>()</code></th>
<td class="colLast">
<div class="block">A 5.x index does not have either historyUUDID or sequence number markers as these markers are introduced in 6.0+.</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#failIfCorrupted()">failIfCorrupted</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code><a href="Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类">Store.MetadataSnapshot</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMetadata(org.apache.lucene.index.IndexCommit)">getMetadata</a></span>&#8203;(org.apache.lucene.index.IndexCommit&nbsp;commit)</code></th>
<td class="colLast">
<div class="block">Returns a new MetadataSnapshot for the given commit.</div>
</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code><a href="Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类">Store.MetadataSnapshot</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMetadata(org.apache.lucene.index.IndexCommit,boolean)">getMetadata</a></span>&#8203;(org.apache.lucene.index.IndexCommit&nbsp;commit,
           boolean&nbsp;lockDirectory)</code></th>
<td class="colLast">
<div class="block">Returns a new MetadataSnapshot for the given commit.</div>
</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incRef()">incRef</a></span>()</code></th>
<td class="colLast">
<div class="block">Increments the refCount of this Store instance.</div>
</td>
</tr>
<tr class="altColor" id="i20">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isAutogenerated(java.lang.String)">isAutogenerated</a></span>&#8203;(java.lang.String&nbsp;name)</code></th>
<td class="colLast">
<div class="block">Returns true if the file is auto-generated by the store and shouldn't be deleted during cleanup.</div>
</td>
</tr>
<tr class="rowColor" id="i21">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isMarkedCorrupted()">isMarkedCorrupted</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i22">
<td class="colFirst"><code>static <a href="../seqno/SequenceNumbers.CommitInfo.html" title="org.elasticsearch.index.seqno中的类">SequenceNumbers.CommitInfo</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#loadSeqNoInfo(org.apache.lucene.index.IndexCommit)">loadSeqNoInfo</a></span>&#8203;(org.apache.lucene.index.IndexCommit&nbsp;commit)</code></th>
<td class="colLast">
<div class="block">Loads the maximum sequence number and local checkpoint from the given Lucene commit point or the latest if not provided.</div>
</td>
</tr>
<tr class="rowColor" id="i23">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markStoreCorrupted(java.io.IOException)">markStoreCorrupted</a></span>&#8203;(java.io.IOException&nbsp;exception)</code></th>
<td class="colLast">
<div class="block">Marks this store as corrupted.</div>
</td>
</tr>
<tr class="altColor" id="i24">
<td class="colFirst"><code>org.apache.lucene.store.IndexInput</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#openVerifyingInput(java.lang.String,org.apache.lucene.store.IOContext,org.elasticsearch.index.store.StoreFileMetaData)">openVerifyingInput</a></span>&#8203;(java.lang.String&nbsp;filename,
                  org.apache.lucene.store.IOContext&nbsp;context,
                  <a href="StoreFileMetaData.html" title="org.elasticsearch.index.store中的类">StoreFileMetaData</a>&nbsp;metadata)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i25">
<td class="colFirst"><code>org.apache.lucene.index.SegmentInfos</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readLastCommittedSegmentsInfo()">readLastCommittedSegmentsInfo</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the last committed segments info for this store</div>
</td>
</tr>
<tr class="altColor" id="i26">
<td class="colFirst"><code>static <a href="Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类">Store.MetadataSnapshot</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readMetadataSnapshot(java.nio.file.Path,org.elasticsearch.index.shard.ShardId,org.elasticsearch.env.NodeEnvironment.ShardLocker,org.apache.logging.log4j.Logger)">readMetadataSnapshot</a></span>&#8203;(java.nio.file.Path&nbsp;indexLocation,
                    <a href="../shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
                    <a href="../../env/NodeEnvironment.ShardLocker.html" title="org.elasticsearch.env中的接口">NodeEnvironment.ShardLocker</a>&nbsp;shardLocker,
                    org.apache.logging.log4j.Logger&nbsp;logger)</code></th>
<td class="colLast">
<div class="block">Reads a MetadataSnapshot from the given index locations or returns an empty snapshot if it can't be read.</div>
</td>
</tr>
<tr class="rowColor" id="i27">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#refCount()">refCount</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current reference count.</div>
</td>
</tr>
<tr class="altColor" id="i28">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeCorruptionMarker()">removeCorruptionMarker</a></span>()</code></th>
<td class="colLast">
<div class="block">Deletes all corruption markers from this store.</div>
</td>
</tr>
<tr class="rowColor" id="i29">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#renameTempFilesSafe(java.util.Map)">renameTempFilesSafe</a></span>&#8203;(java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;&nbsp;tempFileMap)</code></th>
<td class="colLast">
<div class="block">Renames all the given files from the key of the map to the
 value of the map.</div>
</td>
</tr>
<tr class="altColor" id="i30">
<td class="colFirst"><code><a href="StoreStats.html" title="org.elasticsearch.index.store中的类">StoreStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#stats()">stats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i31">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#trimUnsafeCommits(long,long,org.elasticsearch.Version)">trimUnsafeCommits</a></span>&#8203;(long&nbsp;lastSyncedGlobalCheckpoint,
                 long&nbsp;minRetainedTranslogGen,
                 <a href="../../Version.html" title="org.elasticsearch中的类">Version</a>&nbsp;indexVersionCreated)</code></th>
<td class="colLast">
<div class="block">Keeping existing unsafe commits when opening an engine can be problematic because these commits are not safe
 at the recovering time but they can suddenly become safe in the future.</div>
</td>
</tr>
<tr class="altColor" id="i32">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tryIncRef()">tryIncRef</a></span>()</code></th>
<td class="colLast">
<div class="block">Tries to increment the refCount of this Store instance.</div>
</td>
</tr>
<tr class="rowColor" id="i33">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tryOpenIndex(java.nio.file.Path,org.elasticsearch.index.shard.ShardId,org.elasticsearch.env.NodeEnvironment.ShardLocker,org.apache.logging.log4j.Logger)">tryOpenIndex</a></span>&#8203;(java.nio.file.Path&nbsp;indexLocation,
            <a href="../shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
            <a href="../../env/NodeEnvironment.ShardLocker.html" title="org.elasticsearch.env中的接口">NodeEnvironment.ShardLocker</a>&nbsp;shardLocker,
            org.apache.logging.log4j.Logger&nbsp;logger)</code></th>
<td class="colLast">
<div class="block">Tries to open an index for the given location.</div>
</td>
</tr>
<tr class="altColor" id="i34">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#verify(org.apache.lucene.store.IndexInput)">verify</a></span>&#8203;(org.apache.lucene.store.IndexInput&nbsp;input)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i35">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#verify(org.apache.lucene.store.IndexOutput)">verify</a></span>&#8203;(org.apache.lucene.store.IndexOutput&nbsp;output)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.elasticsearch.index.shard.AbstractIndexShardComponent">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;org.elasticsearch.index.shard.<a href="../shard/AbstractIndexShardComponent.html" title="org.elasticsearch.index.shard中的类">AbstractIndexShardComponent</a></h3>
<code><a href="../shard/AbstractIndexShardComponent.html#indexSettings()">indexSettings</a>, <a href="../shard/AbstractIndexShardComponent.html#nodeName()">nodeName</a>, <a href="../shard/AbstractIndexShardComponent.html#shardId()">shardId</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>字段详细资料</h3>
<a id="CORRUPTED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CORRUPTED</h4>
<pre>public static final&nbsp;java.lang.String CORRUPTED</pre>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../constant-values.html#org.elasticsearch.index.store.Store.CORRUPTED">常量字段值</a></dd>
</dl>
</li>
</ul>
<a id="INDEX_STORE_STATS_REFRESH_INTERVAL_SETTING">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>INDEX_STORE_STATS_REFRESH_INTERVAL_SETTING</h4>
<pre>public static final&nbsp;<a href="../../common/settings/Setting.html" title="org.elasticsearch.common.settings中的类">Setting</a>&lt;<a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-core/6.8.4.5-SNAPSHOT/org/elasticsearch/common/unit/TimeValue.html?is-external=true" title="org.elasticsearch.common.unit中的类或接口" class="externalLink">TimeValue</a>&gt; INDEX_STORE_STATS_REFRESH_INTERVAL_SETTING</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a id="&lt;init&gt;(org.elasticsearch.index.shard.ShardId,org.elasticsearch.index.IndexSettings,org.apache.lucene.store.Directory,org.elasticsearch.env.ShardLock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Store</h4>
<pre>public&nbsp;Store&#8203;(<a href="../shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
             <a href="../IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
             org.apache.lucene.store.Directory&nbsp;directory,
             <a href="../../env/ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a>&nbsp;shardLock)</pre>
</li>
</ul>
<a id="&lt;init&gt;(org.elasticsearch.index.shard.ShardId,org.elasticsearch.index.IndexSettings,org.apache.lucene.store.Directory,org.elasticsearch.env.ShardLock,org.elasticsearch.index.store.Store.OnClose)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Store</h4>
<pre>public&nbsp;Store&#8203;(<a href="../shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
             <a href="../IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
             org.apache.lucene.store.Directory&nbsp;directory,
             <a href="../../env/ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a>&nbsp;shardLock,
             <a href="Store.OnClose.html" title="org.elasticsearch.index.store中的接口">Store.OnClose</a>&nbsp;onClose)</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a id="directory()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>directory</h4>
<pre class="methodSignature">public&nbsp;org.apache.lucene.store.Directory&nbsp;directory()</pre>
</li>
</ul>
<a id="readLastCommittedSegmentsInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readLastCommittedSegmentsInfo</h4>
<pre class="methodSignature">public&nbsp;org.apache.lucene.index.SegmentInfos&nbsp;readLastCommittedSegmentsInfo()
                                                                   throws java.io.IOException</pre>
<div class="block">Returns the last committed segments info for this store</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if the index is corrupted or the segments file is not present</dd>
</dl>
</li>
</ul>
<a id="loadSeqNoInfo(org.apache.lucene.index.IndexCommit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadSeqNoInfo</h4>
<pre class="methodSignature">public static&nbsp;<a href="../seqno/SequenceNumbers.CommitInfo.html" title="org.elasticsearch.index.seqno中的类">SequenceNumbers.CommitInfo</a>&nbsp;loadSeqNoInfo&#8203;(org.apache.lucene.index.IndexCommit&nbsp;commit)
                                                throws java.io.IOException</pre>
<div class="block">Loads the maximum sequence number and local checkpoint from the given Lucene commit point or the latest if not provided.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>commit</code> - the commit point to load seqno stats, or the last commit in the store if the parameter is null</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd><a href="../seqno/SequenceNumbers.CommitInfo.html" title="org.elasticsearch.index.seqno中的类"><code>SequenceNumbers.CommitInfo</code></a> containing information about the last commit</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O exception occurred reading the latest Lucene commit point from disk</dd>
</dl>
</li>
</ul>
<a id="getMetadata(org.apache.lucene.index.IndexCommit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetadata</h4>
<pre class="methodSignature">public&nbsp;<a href="Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类">Store.MetadataSnapshot</a>&nbsp;getMetadata&#8203;(org.apache.lucene.index.IndexCommit&nbsp;commit)
                                   throws java.io.IOException</pre>
<div class="block">Returns a new MetadataSnapshot for the given commit. If the given commit is <code>null</code>
 the latest commit point is used.

 Note that this method requires the caller verify it has the right to access the store and
 no concurrent file changes are happening. If in doubt, you probably want to use one of the following:

 <a href="#readMetadataSnapshot(java.nio.file.Path,org.elasticsearch.index.shard.ShardId,org.elasticsearch.env.NodeEnvironment.ShardLocker,org.apache.logging.log4j.Logger)"><code>readMetadataSnapshot(Path, ShardId, NodeEnvironment.ShardLocker, Logger)</code></a> to read a meta data while locking
 <a href="../shard/IndexShard.html#snapshotStoreMetadata()"><code>IndexShard.snapshotStoreMetadata()</code></a> to safely read from an existing shard
 <a href="../shard/IndexShard.html#acquireLastIndexCommit(boolean)"><code>IndexShard.acquireLastIndexCommit(boolean)</code></a> to get an <code>IndexCommit</code> which is safe to use but has to be freed</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>commit</code> - the index commit to read the snapshot from or <code>null</code> if the latest snapshot should be read from the
               directory</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>org.apache.lucene.index.CorruptIndexException</code> - if the lucene index is corrupted. This can be caused by a checksum mismatch or an
                                    unexpected exception when opening the index reading the segments file.</dd>
<dd><code>org.apache.lucene.index.IndexFormatTooOldException</code> - if the lucene index is too old to be opened.</dd>
<dd><code>org.apache.lucene.index.IndexFormatTooNewException</code> - if the lucene index is too new to be opened.</dd>
<dd><code>java.io.FileNotFoundException</code> - if one or more files referenced by a commit are not present.</dd>
<dd><code>java.nio.file.NoSuchFileException</code> - if one or more files referenced by a commit are not present.</dd>
<dd><code>org.apache.lucene.index.IndexNotFoundException</code> - if the commit point can't be found in this store</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getMetadata(org.apache.lucene.index.IndexCommit,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetadata</h4>
<pre class="methodSignature">public&nbsp;<a href="Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类">Store.MetadataSnapshot</a>&nbsp;getMetadata&#8203;(org.apache.lucene.index.IndexCommit&nbsp;commit,
                                          boolean&nbsp;lockDirectory)
                                   throws java.io.IOException</pre>
<div class="block">Returns a new MetadataSnapshot for the given commit. If the given commit is <code>null</code>
 the latest commit point is used.

 Note that this method requires the caller verify it has the right to access the store and
 no concurrent file changes are happening. If in doubt, you probably want to use one of the following:

 <a href="#readMetadataSnapshot(java.nio.file.Path,org.elasticsearch.index.shard.ShardId,org.elasticsearch.env.NodeEnvironment.ShardLocker,org.apache.logging.log4j.Logger)"><code>readMetadataSnapshot(Path, ShardId, NodeEnvironment.ShardLocker, Logger)</code></a> to read a meta data while locking
 <a href="../shard/IndexShard.html#snapshotStoreMetadata()"><code>IndexShard.snapshotStoreMetadata()</code></a> to safely read from an existing shard
 <a href="../shard/IndexShard.html#acquireLastIndexCommit(boolean)"><code>IndexShard.acquireLastIndexCommit(boolean)</code></a> to get an <code>IndexCommit</code> which is safe to use but has to be freed</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>commit</code> - the index commit to read the snapshot from or <code>null</code> if the latest snapshot should be read from the
               directory</dd>
<dd><code>lockDirectory</code> - if <code>true</code> the index writer lock will be obtained before reading the snapshot. This should
                      only be used if there is no started shard using this store.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>org.apache.lucene.index.CorruptIndexException</code> - if the lucene index is corrupted. This can be caused by a checksum mismatch or an
                                    unexpected exception when opening the index reading the segments file.</dd>
<dd><code>org.apache.lucene.index.IndexFormatTooOldException</code> - if the lucene index is too old to be opened.</dd>
<dd><code>org.apache.lucene.index.IndexFormatTooNewException</code> - if the lucene index is too new to be opened.</dd>
<dd><code>java.io.FileNotFoundException</code> - if one or more files referenced by a commit are not present.</dd>
<dd><code>java.nio.file.NoSuchFileException</code> - if one or more files referenced by a commit are not present.</dd>
<dd><code>org.apache.lucene.index.IndexNotFoundException</code> - if the commit point can't be found in this store</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="renameTempFilesSafe(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>renameTempFilesSafe</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;renameTempFilesSafe&#8203;(java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;&nbsp;tempFileMap)
                         throws java.io.IOException</pre>
<div class="block">Renames all the given files from the key of the map to the
 value of the map. All successfully renamed files are removed from the map in-place.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="checkIndex(java.io.PrintStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkIndex</h4>
<pre class="methodSignature">public&nbsp;org.apache.lucene.index.CheckIndex.Status&nbsp;checkIndex&#8203;(java.io.PrintStream&nbsp;out)
                                                     throws java.io.IOException</pre>
<div class="block">Checks and returns the status of the existing index in this store.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>out</code> - where infoStream messages should go. See <code>CheckIndex.setInfoStream(PrintStream)</code></dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="stats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stats</h4>
<pre class="methodSignature">public&nbsp;<a href="StoreStats.html" title="org.elasticsearch.index.store中的类">StoreStats</a>&nbsp;stats()
                 throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="incRef()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incRef</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;incRef()</pre>
<div class="block">Increments the refCount of this Store instance.  RefCounts are used to determine when a
 Store can be closed safely, i.e. as soon as there are no more references. Be sure to always call a
 corresponding <a href="#decRef()"><code>decRef()</code></a>, in a finally clause; otherwise the store may never be closed.  Note that
 <a href="#close()"><code>close()</code></a> simply calls decRef(), which means that the Store will not really be closed until <a href="#decRef()"><code>decRef()</code></a> has been called for all outstanding references.
 <p>
 Note: Close can safely be called multiple times.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../common/util/concurrent/RefCounted.html#incRef()">incRef</a></code>&nbsp;在接口中&nbsp;<code><a href="../../common/util/concurrent/RefCounted.html" title="org.elasticsearch.common.util.concurrent中的接口">RefCounted</a></code></dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>org.apache.lucene.store.AlreadyClosedException</code> - iff the reference counter can not be incremented.</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="#decRef()"><code>decRef()</code></a>, 
<a href="#tryIncRef()"><code>tryIncRef()</code></a></dd>
</dl>
</li>
</ul>
<a id="tryIncRef()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryIncRef</h4>
<pre class="methodSignature">public final&nbsp;boolean&nbsp;tryIncRef()</pre>
<div class="block">Tries to increment the refCount of this Store instance. This method will return <code>true</code> iff the refCount was
 incremented successfully otherwise <code>false</code>. RefCounts are used to determine when a
 Store can be closed safely, i.e. as soon as there are no more references. Be sure to always call a
 corresponding <a href="#decRef()"><code>decRef()</code></a>, in a finally clause; otherwise the store may never be closed.  Note that
 <a href="#close()"><code>close()</code></a> simply calls decRef(), which means that the Store will not really be closed until <a href="#decRef()"><code>decRef()</code></a> has been called for all outstanding references.
 <p>
 Note: Close can safely be called multiple times.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../common/util/concurrent/RefCounted.html#tryIncRef()">tryIncRef</a></code>&nbsp;在接口中&nbsp;<code><a href="../../common/util/concurrent/RefCounted.html" title="org.elasticsearch.common.util.concurrent中的接口">RefCounted</a></code></dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="#decRef()"><code>decRef()</code></a>, 
<a href="#incRef()"><code>incRef()</code></a></dd>
</dl>
</li>
</ul>
<a id="decRef()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decRef</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;decRef()</pre>
<div class="block">Decreases the refCount of this Store instance. If the refCount drops to 0, then this
 store is closed.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../common/util/concurrent/RefCounted.html#decRef()">decRef</a></code>&nbsp;在接口中&nbsp;<code><a href="../../common/util/concurrent/RefCounted.html" title="org.elasticsearch.common.util.concurrent中的接口">RefCounted</a></code></dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="#incRef()"><code>incRef()</code></a></dd>
</dl>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code>close</code>&nbsp;在接口中&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code>close</code>&nbsp;在接口中&nbsp;<code>java.io.Closeable</code></dd>
</dl>
</li>
</ul>
<a id="readMetadataSnapshot(java.nio.file.Path,org.elasticsearch.index.shard.ShardId,org.elasticsearch.env.NodeEnvironment.ShardLocker,org.apache.logging.log4j.Logger)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readMetadataSnapshot</h4>
<pre class="methodSignature">public static&nbsp;<a href="Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类">Store.MetadataSnapshot</a>&nbsp;readMetadataSnapshot&#8203;(java.nio.file.Path&nbsp;indexLocation,
                                                          <a href="../shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
                                                          <a href="../../env/NodeEnvironment.ShardLocker.html" title="org.elasticsearch.env中的接口">NodeEnvironment.ShardLocker</a>&nbsp;shardLocker,
                                                          org.apache.logging.log4j.Logger&nbsp;logger)
                                                   throws java.io.IOException</pre>
<div class="block">Reads a MetadataSnapshot from the given index locations or returns an empty snapshot if it can't be read.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if the index we try to read is corrupted</dd>
</dl>
</li>
</ul>
<a id="tryOpenIndex(java.nio.file.Path,org.elasticsearch.index.shard.ShardId,org.elasticsearch.env.NodeEnvironment.ShardLocker,org.apache.logging.log4j.Logger)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryOpenIndex</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;tryOpenIndex&#8203;(java.nio.file.Path&nbsp;indexLocation,
                                <a href="../shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
                                <a href="../../env/NodeEnvironment.ShardLocker.html" title="org.elasticsearch.env中的接口">NodeEnvironment.ShardLocker</a>&nbsp;shardLocker,
                                org.apache.logging.log4j.Logger&nbsp;logger)
                         throws java.io.IOException,
                                <a href="../../env/ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></pre>
<div class="block">Tries to open an index for the given location. This includes reading the
 segment infos and possible corruption markers. If the index can not
 be opened, an exception is thrown</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../env/ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></code></dd>
</dl>
</li>
</ul>
<a id="createVerifyingOutput(java.lang.String,org.elasticsearch.index.store.StoreFileMetaData,org.apache.lucene.store.IOContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createVerifyingOutput</h4>
<pre class="methodSignature">public&nbsp;org.apache.lucene.store.IndexOutput&nbsp;createVerifyingOutput&#8203;(java.lang.String&nbsp;fileName,
                                                                 <a href="StoreFileMetaData.html" title="org.elasticsearch.index.store中的类">StoreFileMetaData</a>&nbsp;metadata,
                                                                 org.apache.lucene.store.IOContext&nbsp;context)
                                                          throws java.io.IOException</pre>
<div class="block">The returned IndexOutput validates the files checksum.
 <p>
 Note: Checksums are calculated by default since version 4.8.0. This method only adds the
 verification against the checksum in the given metadata and does not add any significant overhead.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="verify(org.apache.lucene.store.IndexOutput)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verify</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;verify&#8203;(org.apache.lucene.store.IndexOutput&nbsp;output)
                   throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="openVerifyingInput(java.lang.String,org.apache.lucene.store.IOContext,org.elasticsearch.index.store.StoreFileMetaData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openVerifyingInput</h4>
<pre class="methodSignature">public&nbsp;org.apache.lucene.store.IndexInput&nbsp;openVerifyingInput&#8203;(java.lang.String&nbsp;filename,
                                                             org.apache.lucene.store.IOContext&nbsp;context,
                                                             <a href="StoreFileMetaData.html" title="org.elasticsearch.index.store中的类">StoreFileMetaData</a>&nbsp;metadata)
                                                      throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="verify(org.apache.lucene.store.IndexInput)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verify</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;verify&#8203;(org.apache.lucene.store.IndexInput&nbsp;input)
                   throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="checkIntegrityNoException(org.elasticsearch.index.store.StoreFileMetaData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkIntegrityNoException</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;checkIntegrityNoException&#8203;(<a href="StoreFileMetaData.html" title="org.elasticsearch.index.store中的类">StoreFileMetaData</a>&nbsp;md)</pre>
</li>
</ul>
<a id="checkIntegrityNoException(org.elasticsearch.index.store.StoreFileMetaData,org.apache.lucene.store.Directory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkIntegrityNoException</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;checkIntegrityNoException&#8203;(<a href="StoreFileMetaData.html" title="org.elasticsearch.index.store中的类">StoreFileMetaData</a>&nbsp;md,
                                                org.apache.lucene.store.Directory&nbsp;directory)</pre>
</li>
</ul>
<a id="checkIntegrity(org.elasticsearch.index.store.StoreFileMetaData,org.apache.lucene.store.Directory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkIntegrity</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;checkIntegrity&#8203;(<a href="StoreFileMetaData.html" title="org.elasticsearch.index.store中的类">StoreFileMetaData</a>&nbsp;md,
                                  org.apache.lucene.store.Directory&nbsp;directory)
                           throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="isMarkedCorrupted()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isMarkedCorrupted</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isMarkedCorrupted()
                          throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="removeCorruptionMarker()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeCorruptionMarker</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;removeCorruptionMarker()
                            throws java.io.IOException</pre>
<div class="block">Deletes all corruption markers from this store.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="failIfCorrupted()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>failIfCorrupted</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;failIfCorrupted()
                     throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="cleanupAndVerify(java.lang.String,org.elasticsearch.index.store.Store.MetadataSnapshot)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanupAndVerify</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;cleanupAndVerify&#8203;(java.lang.String&nbsp;reason,
                             <a href="Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类">Store.MetadataSnapshot</a>&nbsp;sourceMetaData)
                      throws java.io.IOException</pre>
<div class="block">This method deletes every file in this store that is not contained in the given source meta data or is a
 legacy checksum file. After the delete it pulls the latest metadata snapshot from the store and compares it
 to the given snapshot. If the snapshots are inconsistent an illegal state exception is thrown.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>reason</code> - the reason for this cleanup operation logged for each deleted file</dd>
<dd><code>sourceMetaData</code> - the metadata used for cleanup. all files in this metadata should be kept around.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if an IOException occurs</dd>
<dd><code>java.lang.IllegalStateException</code> - if the latest snapshot in this store differs from the given one after the cleanup.</dd>
</dl>
</li>
</ul>
<a id="refCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refCount</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;refCount()</pre>
<div class="block">Returns the current reference count.</div>
</li>
</ul>
<a id="isAutogenerated(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAutogenerated</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;isAutogenerated&#8203;(java.lang.String&nbsp;name)</pre>
<div class="block">Returns true if the file is auto-generated by the store and shouldn't be deleted during cleanup.
 This includes write lock and checksum files</div>
</li>
</ul>
<a id="digestToString(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>digestToString</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;digestToString&#8203;(long&nbsp;digest)</pre>
<div class="block">Produces a string representation of the given digest value.</div>
</li>
</ul>
<a id="deleteQuiet(java.lang.String...)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteQuiet</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;deleteQuiet&#8203;(java.lang.String...&nbsp;files)</pre>
</li>
</ul>
<a id="markStoreCorrupted(java.io.IOException)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markStoreCorrupted</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;markStoreCorrupted&#8203;(java.io.IOException&nbsp;exception)
                        throws java.io.IOException</pre>
<div class="block">Marks this store as corrupted. This method writes a <code>corrupted_${uuid}</code> file containing the given exception
 message. If a store contains a <code>corrupted_${uuid}</code> file <a href="#isMarkedCorrupted()"><code>isMarkedCorrupted()</code></a> will return <code>true</code>.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="createEmpty()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createEmpty</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;createEmpty()
                 throws java.io.IOException</pre>
<div class="block">creates an empty lucene index and a corresponding empty translog. Any existing data will be deleted.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="bootstrapNewHistory()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bootstrapNewHistory</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;bootstrapNewHistory()
                         throws java.io.IOException</pre>
<div class="block">Marks an existing lucene index with a new history uuid.
 This is used to make sure no existing shard will recovery from this index using ops based recovery.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="bootstrapNewHistory(long,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bootstrapNewHistory</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;bootstrapNewHistory&#8203;(long&nbsp;localCheckpoint,
                                long&nbsp;maxSeqNo)
                         throws java.io.IOException</pre>
<div class="block">Marks an existing lucene index with a new history uuid and sets the given local checkpoint
 as well as the maximum sequence number.
 This is used to make sure no existing shard will recover from this index using ops based recovery.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../seqno/SequenceNumbers.html#LOCAL_CHECKPOINT_KEY"><code>SequenceNumbers.LOCAL_CHECKPOINT_KEY</code></a>, 
<a href="../seqno/SequenceNumbers.html#MAX_SEQ_NO"><code>SequenceNumbers.MAX_SEQ_NO</code></a></dd>
</dl>
</li>
</ul>
<a id="associateIndexWithNewTranslog(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>associateIndexWithNewTranslog</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;associateIndexWithNewTranslog&#8203;(java.lang.String&nbsp;translogUUID)
                                   throws java.io.IOException</pre>
<div class="block">Force bakes the given translog generation as recovery information in the lucene index. This is
 used when recovering from a snapshot or peer file based recovery where a new empty translog is
 created and the existing lucene index needs should be changed to use it.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="ensureIndexHas6xCommitTags()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ensureIndexHas6xCommitTags</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;ensureIndexHas6xCommitTags()
                                   throws java.io.IOException</pre>
<div class="block">A 5.x index does not have either historyUUDID or sequence number markers as these markers are introduced in 6.0+.
 This method should be called only in local store recovery or file-based recovery to ensure an index has proper
 historyUUID and sequence number markers before opening an engine.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd><code>true</code> if a new commit is flushed, otherwise return false</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="trimUnsafeCommits(long,long,org.elasticsearch.Version)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>trimUnsafeCommits</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;trimUnsafeCommits&#8203;(long&nbsp;lastSyncedGlobalCheckpoint,
                              long&nbsp;minRetainedTranslogGen,
                              <a href="../../Version.html" title="org.elasticsearch中的类">Version</a>&nbsp;indexVersionCreated)
                       throws java.io.IOException</pre>
<div class="block">Keeping existing unsafe commits when opening an engine can be problematic because these commits are not safe
 at the recovering time but they can suddenly become safe in the future.
 The following issues can happen if unsafe commits are kept oninit.
 <p>
 1. Replica can use unsafe commit in peer-recovery. This happens when a replica with a safe commit c1(max_seqno=1)
 and an unsafe commit c2(max_seqno=2) recovers from a primary with c1(max_seqno=1). If a new document(seqno=2)
 is added without flushing, the global checkpoint is advanced to 2; and the replica recovers again, it will use
 the unsafe commit c2(max_seqno=2 at most gcp=2) as the starting commit for sequenced-based recovery even the
 commit c2 contains a stale operation and the document(with seqno=2) will not be replicated to the replica.
 <p>
 2. Min translog gen for recovery can go backwards in peer-recovery. This happens when are replica with a safe commit
 c1(local_checkpoint=1, recovery_translog_gen=1) and an unsafe commit c2(local_checkpoint=2, recovery_translog_gen=2).
 The replica recovers from a primary, and keeps c2 as the last commit, then sets last_translog_gen to 2. Flushing a new
 commit on the replica will cause exception as the new last commit c3 will have recovery_translog_gen=1. The recovery
 translog generation of a commit is calculated based on the current local checkpoint. The local checkpoint of c3 is 1
 while the local checkpoint of c2 is 2.
 <p>
 3. Commit without translog can be used in recovery. An old index, which was created before multiple-commits is introduced
 (v6.2), may not have a safe commit. If that index has a snapshotted commit without translog and an unsafe commit,
 the policy can consider the snapshotted commit as a safe commit for recovery even the commit does not have translog.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../index.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../index-all.html">索引</a></li>
<li><a href="../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
