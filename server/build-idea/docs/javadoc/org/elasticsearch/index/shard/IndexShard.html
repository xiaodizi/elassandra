<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (12.0.2) on Wed Mar 15 08:58:13 CST 2023 -->
<title>IndexShard (server 6.8.4.5-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="dc.created" content="2023-03-15">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="IndexShard (server 6.8.4.5-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":10,"i39":10,"i40":10,"i41":10,"i42":10,"i43":10,"i44":10,"i45":10,"i46":10,"i47":10,"i48":10,"i49":10,"i50":10,"i51":10,"i52":10,"i53":10,"i54":10,"i55":10,"i56":10,"i57":10,"i58":10,"i59":10,"i60":10,"i61":10,"i62":10,"i63":10,"i64":10,"i65":10,"i66":10,"i67":10,"i68":10,"i69":10,"i70":10,"i71":10,"i72":10,"i73":10,"i74":10,"i75":10,"i76":10,"i77":10,"i78":10,"i79":10,"i80":10,"i81":10,"i82":10,"i83":10,"i84":10,"i85":10,"i86":10,"i87":10,"i88":10,"i89":10,"i90":10,"i91":10,"i92":10,"i93":10,"i94":10,"i95":10,"i96":10,"i97":10,"i98":10,"i99":10,"i100":9,"i101":10,"i102":10,"i103":10,"i104":10,"i105":10,"i106":10,"i107":10,"i108":10,"i109":10,"i110":10,"i111":10,"i112":10,"i113":10,"i114":10,"i115":10,"i116":10,"i117":10,"i118":10,"i119":10,"i120":10,"i121":10,"i122":10,"i123":10,"i124":10,"i125":10,"i126":10,"i127":10,"i128":10,"i129":10,"i130":10,"i131":10,"i132":10,"i133":10,"i134":10,"i135":10,"i136":10,"i137":10,"i138":10,"i139":10,"i140":10,"i141":10,"i142":10,"i143":10,"i144":10,"i145":10,"i146":10,"i147":10,"i148":10};
var tabs = {65535:["t0","\u6240\u6709\u65B9\u6CD5"],1:["t1","\u9759\u6001\u65B9\u6CD5"],2:["t2","\u5B9E\u4F8B\u65B9\u6CD5"],8:["t4","\u5177\u4F53\u65B9\u6CD5"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../index.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../index-all.html">索引</a></li>
<li><a href="../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">程序包</span>&nbsp;<a href="package-summary.html">org.elasticsearch.index.shard</a></div>
<h2 title="类 IndexShard" class="title">类 IndexShard</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="AbstractIndexShardComponent.html" title="org.elasticsearch.index.shard中的类">org.elasticsearch.index.shard.AbstractIndexShardComponent</a></li>
<li>
<ul class="inheritance">
<li>org.elasticsearch.index.shard.IndexShard</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>所有已实现的接口:</dt>
<dd><code><a href="IndexShardComponent.html" title="org.elasticsearch.index.shard中的接口">IndexShardComponent</a></code>, <code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html" title="org.elasticsearch.indices.cluster中的接口">IndicesClusterStateService.Shard</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">IndexShard</span>
extends <a href="AbstractIndexShardComponent.html" title="org.elasticsearch.index.shard中的类">AbstractIndexShardComponent</a>
implements <a href="../../indices/cluster/IndicesClusterStateService.Shard.html" title="org.elasticsearch.indices.cluster中的接口">IndicesClusterStateService.Shard</a></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>嵌套类概要</h3>
<div class="memberSummary">
<table>
<caption><span>嵌套类</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">修饰符和类型</th>
<th class="colSecond" scope="col">类</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="IndexShard.ShardFailure.html" title="org.elasticsearch.index.shard中的类">IndexShard.ShardFailure</a></span></code></th>
<td class="colLast">
<div class="block">Simple struct encapsulating a shard failure</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>字段概要</h3>
<div class="memberSummary">
<table>
<caption><span>字段</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">修饰符和类型</th>
<th class="colSecond" scope="col">字段</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.concurrent.atomic.AtomicReference&lt;<a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#currentEngineReference">currentEngineReference</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../common/metrics/MeanMetric.html" title="org.elasticsearch.common.metrics中的类">MeanMetric</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flushMetric">flushMetric</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../common/metrics/CounterMetric.html" title="org.elasticsearch.common.metrics中的类">CounterMetric</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#periodicFlushMetric">periodicFlushMetric</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../common/metrics/MeanMetric.html" title="org.elasticsearch.common.metrics中的类">MeanMetric</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#refreshMetric">refreshMetric</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardRouting">shardRouting</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="IndexShardState.html" title="org.elasticsearch.index.shard中的枚举">IndexShardState</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#state">state</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<ul class="blockList">
<li class="blockList"><a id="fields.inherited.from.class.org.elasticsearch.index.shard.AbstractIndexShardComponent">
<!--   -->
</a>
<h3>从类继承的字段&nbsp;org.elasticsearch.index.shard.<a href="AbstractIndexShardComponent.html" title="org.elasticsearch.index.shard中的类">AbstractIndexShardComponent</a></h3>
<code><a href="AbstractIndexShardComponent.html#deprecationLogger">deprecationLogger</a>, <a href="AbstractIndexShardComponent.html#indexSettings">indexSettings</a>, <a href="AbstractIndexShardComponent.html#logger">logger</a>, <a href="AbstractIndexShardComponent.html#shardId">shardId</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<div class="memberSummary">
<table>
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">构造器</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.elasticsearch.cluster.routing.ShardRouting,org.elasticsearch.index.IndexSettings,org.elasticsearch.index.shard.ShardPath,org.elasticsearch.index.store.Store,java.util.function.Supplier,org.elasticsearch.index.cache.IndexCache,org.elasticsearch.index.mapper.MapperService,org.elasticsearch.index.similarity.SimilarityService,org.elasticsearch.index.engine.EngineFactory,org.elasticsearch.index.shard.IndexEventListener,org.elasticsearch.index.shard.IndexSearcherWrapper,org.elasticsearch.threadpool.ThreadPool,org.elasticsearch.common.util.BigArrays,org.elasticsearch.index.engine.Engine.Warmer,java.util.List,java.util.List,org.elasticsearch.indices.breaker.CircuitBreakerService,org.elasticsearch.index.IndexService,org.elasticsearch.cluster.service.ClusterService)">IndexShard</a></span>&#8203;(<a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a>&nbsp;shardRouting,
          <a href="../IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
          <a href="ShardPath.html" title="org.elasticsearch.index.shard中的类">ShardPath</a>&nbsp;path,
          <a href="../store/Store.html" title="org.elasticsearch.index.store中的类">Store</a>&nbsp;store,
          java.util.function.Supplier&lt;org.apache.lucene.search.Sort&gt;&nbsp;indexSortSupplier,
          <a href="../cache/IndexCache.html" title="org.elasticsearch.index.cache中的类">IndexCache</a>&nbsp;indexCache,
          <a href="../mapper/MapperService.html" title="org.elasticsearch.index.mapper中的类">MapperService</a>&nbsp;mapperService,
          <a href="../similarity/SimilarityService.html" title="org.elasticsearch.index.similarity中的类">SimilarityService</a>&nbsp;similarityService,
          <a href="../engine/EngineFactory.html" title="org.elasticsearch.index.engine中的接口">EngineFactory</a>&nbsp;engineFactory,
          <a href="IndexEventListener.html" title="org.elasticsearch.index.shard中的接口">IndexEventListener</a>&nbsp;indexEventListener,
          <a href="IndexSearcherWrapper.html" title="org.elasticsearch.index.shard中的类">IndexSearcherWrapper</a>&nbsp;indexSearcherWrapper,
          <a href="../../threadpool/ThreadPool.html" title="org.elasticsearch.threadpool中的类">ThreadPool</a>&nbsp;threadPool,
          <a href="../../common/util/BigArrays.html" title="org.elasticsearch.common.util中的类">BigArrays</a>&nbsp;bigArrays,
          <a href="../engine/Engine.Warmer.html" title="org.elasticsearch.index.engine中的接口">Engine.Warmer</a>&nbsp;warmer,
          java.util.List&lt;<a href="SearchOperationListener.html" title="org.elasticsearch.index.shard中的接口">SearchOperationListener</a>&gt;&nbsp;searchOperationListener,
          java.util.List&lt;<a href="IndexingOperationListener.html" title="org.elasticsearch.index.shard中的接口">IndexingOperationListener</a>&gt;&nbsp;listeners,
          <a href="../../indices/breaker/CircuitBreakerService.html" title="org.elasticsearch.indices.breaker中的类">CircuitBreakerService</a>&nbsp;circuitBreakerService,
          <a href="../IndexService.html" title="org.elasticsearch.index中的类">IndexService</a>&nbsp;indexService,
          <a href="../../cluster/service/ClusterService.html" title="org.elasticsearch.cluster.service中的类">ClusterService</a>&nbsp;clusterService)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">所有方法</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">静态方法</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">实例方法</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">具体方法</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<tr>
<th class="colFirst" scope="col">修饰符和类型</th>
<th class="colSecond" scope="col">方法</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquireAllPrimaryOperationsPermits(org.elasticsearch.action.ActionListener,org.elasticsearch.common.unit.TimeValue)">acquireAllPrimaryOperationsPermits</a></span>&#8203;(<a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../common/lease/Releasable.html" title="org.elasticsearch.common.lease中的接口">Releasable</a>&gt;&nbsp;onPermitAcquired,
                                  <a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-core/6.8.4.5-SNAPSHOT/org/elasticsearch/common/unit/TimeValue.html?is-external=true" title="org.elasticsearch.common.unit中的类或接口" class="externalLink">TimeValue</a>&nbsp;timeout)</code></th>
<td class="colLast">
<div class="block">Acquire all primary operation permits.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquireAllReplicaOperationsPermits(long,long,long,org.elasticsearch.action.ActionListener,org.elasticsearch.common.unit.TimeValue)">acquireAllReplicaOperationsPermits</a></span>&#8203;(long&nbsp;opPrimaryTerm,
                                  long&nbsp;globalCheckpoint,
                                  long&nbsp;maxSeqNoOfUpdatesOrDeletes,
                                  <a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../common/lease/Releasable.html" title="org.elasticsearch.common.lease中的接口">Releasable</a>&gt;&nbsp;onPermitAcquired,
                                  <a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-core/6.8.4.5-SNAPSHOT/org/elasticsearch/common/unit/TimeValue.html?is-external=true" title="org.elasticsearch.common.unit中的类或接口" class="externalLink">TimeValue</a>&nbsp;timeout)</code></th>
<td class="colLast">
<div class="block">Acquire all replica operation permits whenever the shard is ready for indexing (see
 <a href="#acquireAllPrimaryOperationsPermits(org.elasticsearch.action.ActionListener,org.elasticsearch.common.unit.TimeValue)"><code>acquireAllPrimaryOperationsPermits(ActionListener, TimeValue)</code></a>.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code><a href="../engine/Engine.IndexCommitRef.html" title="org.elasticsearch.index.engine中的类">Engine.IndexCommitRef</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquireLastIndexCommit(boolean)">acquireLastIndexCommit</a></span>&#8203;(boolean&nbsp;flushFirst)</code></th>
<td class="colLast">
<div class="block">Creates a new <code>IndexCommit</code> snapshot from the currently running engine.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquirePrimaryOperationPermit(org.elasticsearch.action.ActionListener,java.lang.String,java.lang.Object)">acquirePrimaryOperationPermit</a></span>&#8203;(<a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../common/lease/Releasable.html" title="org.elasticsearch.common.lease中的接口">Releasable</a>&gt;&nbsp;onPermitAcquired,
                             java.lang.String&nbsp;executorOnDelay,
                             java.lang.Object&nbsp;debugInfo)</code></th>
<td class="colLast">
<div class="block">Acquire a primary operation permit whenever the shard is ready for indexing.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquireReplicaOperationPermit(long,long,long,org.elasticsearch.action.ActionListener,java.lang.String,java.lang.Object)">acquireReplicaOperationPermit</a></span>&#8203;(long&nbsp;opPrimaryTerm,
                             long&nbsp;globalCheckpoint,
                             long&nbsp;maxSeqNoOfUpdatesOrDeletes,
                             <a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../common/lease/Releasable.html" title="org.elasticsearch.common.lease中的接口">Releasable</a>&gt;&nbsp;onPermitAcquired,
                             java.lang.String&nbsp;executorOnDelay,
                             java.lang.Object&nbsp;debugInfo)</code></th>
<td class="colLast">
<div class="block">Acquire a replica operation permit whenever the shard is ready for indexing (see
 <a href="#acquirePrimaryOperationPermit(org.elasticsearch.action.ActionListener,java.lang.String,java.lang.Object)"><code>acquirePrimaryOperationPermit(ActionListener, String, Object)</code></a>).</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>java.io.Closeable</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquireRetentionLock()">acquireRetentionLock</a></span>()</code></th>
<td class="colLast">
<div class="block">Acquires a lock on the translog files and Lucene soft-deleted documents to prevent them from being trimmed</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code><a href="../engine/Engine.Searcher.html" title="org.elasticsearch.index.engine中的类">Engine.Searcher</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquireSearcher(java.lang.String)">acquireSearcher</a></span>&#8203;(java.lang.String&nbsp;source)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#activateThrottling()">activateThrottling</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#activateWithPrimaryContext(org.elasticsearch.index.seqno.ReplicationTracker.PrimaryContext)">activateWithPrimaryContext</a></span>&#8203;(<a href="../seqno/ReplicationTracker.PrimaryContext.html" title="org.elasticsearch.index.seqno中的类">ReplicationTracker.PrimaryContext</a>&nbsp;primaryContext)</code></th>
<td class="colLast">
<div class="block">Updates the known allocation IDs and the local checkpoints for the corresponding allocations from a primary relocation source.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addGlobalCheckpointListener(long,org.elasticsearch.index.shard.GlobalCheckpointListeners.GlobalCheckpointListener,org.elasticsearch.common.unit.TimeValue)">addGlobalCheckpointListener</a></span>&#8203;(long&nbsp;waitingForGlobalCheckpoint,
                           <a href="GlobalCheckpointListeners.GlobalCheckpointListener.html" title="org.elasticsearch.index.shard中的接口">GlobalCheckpointListeners.GlobalCheckpointListener</a>&nbsp;listener,
                           <a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-core/6.8.4.5-SNAPSHOT/org/elasticsearch/common/unit/TimeValue.html?is-external=true" title="org.elasticsearch.common.unit中的类或接口" class="externalLink">TimeValue</a>&nbsp;timeout)</code></th>
<td class="colLast">
<div class="block">Add a global checkpoint listener.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addRefreshListener(org.elasticsearch.index.translog.Translog.Location,java.util.function.Consumer)">addRefreshListener</a></span>&#8203;(<a href="../translog/Translog.Location.html" title="org.elasticsearch.index.translog中的类">Translog.Location</a>&nbsp;location,
                  java.util.function.Consumer&lt;java.lang.Boolean&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Add a listener for refreshes.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code><a href="../seqno/RetentionLease.html" title="org.elasticsearch.index.seqno中的类">RetentionLease</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addRetentionLease(java.lang.String,long,java.lang.String,org.elasticsearch.action.ActionListener)">addRetentionLease</a></span>&#8203;(java.lang.String&nbsp;id,
                 long&nbsp;retainingSequenceNumber,
                 java.lang.String&nbsp;source,
                 <a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../action/support/replication/ReplicationResponse.html" title="org.elasticsearch.action.support.replication中的类">ReplicationResponse</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Adds a new retention lease.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addShardFailureCallback(java.util.function.Consumer)">addShardFailureCallback</a></span>&#8203;(java.util.function.Consumer&lt;<a href="IndexShard.ShardFailure.html" title="org.elasticsearch.index.shard中的类">IndexShard.ShardFailure</a>&gt;&nbsp;onShardFailure)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#advanceMaxSeqNoOfUpdatesOrDeletes(long)">advanceMaxSeqNoOfUpdatesOrDeletes</a></span>&#8203;(long&nbsp;seqNo)</code></th>
<td class="colLast">
<div class="block">A replica calls this method to advance the max_seq_no_of_updates marker of its engine to at least the max_seq_no_of_updates
 value (piggybacked in a replication request) that it receives from its primary before executing that replication request.</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#afterWriteOperation()">afterWriteOperation</a></span>()</code></th>
<td class="colLast">
<div class="block">Schedules a flush or translog generation roll if needed but will not schedule more than one concurrently.</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code><a href="../engine/Engine.DeleteResult.html" title="org.elasticsearch.index.engine中的类">Engine.DeleteResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#applyDeleteOperationOnPrimary(long,java.lang.String,java.lang.String,org.elasticsearch.index.VersionType,long,long)">applyDeleteOperationOnPrimary</a></span>&#8203;(long&nbsp;version,
                             java.lang.String&nbsp;type,
                             java.lang.String&nbsp;id,
                             <a href="../VersionType.html" title="org.elasticsearch.index中的枚举">VersionType</a>&nbsp;versionType,
                             long&nbsp;ifSeqNo,
                             long&nbsp;ifPrimaryTerm)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code><a href="../engine/Engine.DeleteResult.html" title="org.elasticsearch.index.engine中的类">Engine.DeleteResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#applyDeleteOperationOnReplica(long,long,java.lang.String,java.lang.String,org.elasticsearch.index.VersionType)">applyDeleteOperationOnReplica</a></span>&#8203;(long&nbsp;seqNo,
                             long&nbsp;version,
                             java.lang.String&nbsp;type,
                             java.lang.String&nbsp;id,
                             <a href="../VersionType.html" title="org.elasticsearch.index中的枚举">VersionType</a>&nbsp;versionType)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code><a href="../engine/Engine.IndexResult.html" title="org.elasticsearch.index.engine中的类">Engine.IndexResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#applyIndexOperationOnPrimary(long,org.elasticsearch.index.VersionType,org.elasticsearch.index.mapper.SourceToParse,long,long,long,boolean)">applyIndexOperationOnPrimary</a></span>&#8203;(long&nbsp;version,
                            <a href="../VersionType.html" title="org.elasticsearch.index中的枚举">VersionType</a>&nbsp;versionType,
                            <a href="../mapper/SourceToParse.html" title="org.elasticsearch.index.mapper中的类">SourceToParse</a>&nbsp;sourceToParse,
                            long&nbsp;ifSeqNo,
                            long&nbsp;ifPrimaryTerm,
                            long&nbsp;autoGeneratedTimestamp,
                            boolean&nbsp;isRetry)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code><a href="../engine/Engine.IndexResult.html" title="org.elasticsearch.index.engine中的类">Engine.IndexResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#applyIndexOperationOnReplica(long,long,org.elasticsearch.index.VersionType,long,boolean,org.elasticsearch.index.mapper.SourceToParse)">applyIndexOperationOnReplica</a></span>&#8203;(long&nbsp;seqNo,
                            long&nbsp;version,
                            <a href="../VersionType.html" title="org.elasticsearch.index中的枚举">VersionType</a>&nbsp;versionType,
                            long&nbsp;autoGeneratedTimeStamp,
                            boolean&nbsp;isRetry,
                            <a href="../mapper/SourceToParse.html" title="org.elasticsearch.index.mapper中的类">SourceToParse</a>&nbsp;sourceToParse)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code><a href="../engine/Engine.Result.html" title="org.elasticsearch.index.engine中的类">Engine.Result</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#applyTranslogOperation(org.elasticsearch.index.translog.Translog.Operation,org.elasticsearch.index.engine.Engine.Operation.Origin)">applyTranslogOperation</a></span>&#8203;(<a href="../translog/Translog.Operation.html" title="org.elasticsearch.index.translog中的接口">Translog.Operation</a>&nbsp;operation,
                      <a href="../engine/Engine.Operation.Origin.html" title="org.elasticsearch.index.engine中的枚举">Engine.Operation.Origin</a>&nbsp;origin)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i20">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkIdle(long)">checkIdle</a></span>&#8203;(long&nbsp;inactiveTimeNS)</code></th>
<td class="colLast">
<div class="block">Called by <a href="../../indices/IndexingMemoryController.html" title="org.elasticsearch.indices中的类"><code>IndexingMemoryController</code></a> to check whether more than <code>inactiveTimeNS</code> has passed since the last
 indexing operation, and notify listeners that we are now inactive so e.g. sync'd flush can happen.</div>
</td>
</tr>
<tr class="rowColor" id="i21">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close(java.lang.String,boolean)">close</a></span>&#8203;(java.lang.String&nbsp;reason,
     boolean&nbsp;flushEngine)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i22">
<td class="colFirst"><code><a href="../engine/CommitStats.html" title="org.elasticsearch.index.engine中的类">CommitStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#commitStats()">commitStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i23">
<td class="colFirst"><code><a href="../../search/suggest/completion/CompletionStats.html" title="org.elasticsearch.search.suggest.completion中的类">CompletionStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#completionStats(java.lang.String...)">completionStats</a></span>&#8203;(java.lang.String...&nbsp;fields)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i24">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deactivateThrottling()">deactivateThrottling</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i25">
<td class="colFirst"><code><a href="../engine/Engine.DeleteResult.html" title="org.elasticsearch.index.engine中的类">Engine.DeleteResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#delete(org.elasticsearch.index.engine.Engine,org.elasticsearch.index.engine.Engine.Delete)">delete</a></span>&#8203;(<a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a>&nbsp;engine,
      <a href="../engine/Engine.Delete.html" title="org.elasticsearch.index.engine中的类">Engine.Delete</a>&nbsp;delete)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i26">
<td class="colFirst"><code><a href="../mapper/DocumentMapperForType.html" title="org.elasticsearch.index.mapper中的类">DocumentMapperForType</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#docMapper(java.lang.String)">docMapper</a></span>&#8203;(java.lang.String&nbsp;type)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i27">
<td class="colFirst"><code><a href="DocsStats.html" title="org.elasticsearch.index.shard中的类">DocsStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#docStats()">docStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i28">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#estimateNumberOfHistoryOperations(java.lang.String,long)">estimateNumberOfHistoryOperations</a></span>&#8203;(java.lang.String&nbsp;source,
                                 long&nbsp;startingSeqNo)</code></th>
<td class="colLast">
<div class="block">Returns the estimated number of history operations whose seq# at least the provided seq# in this shard.</div>
</td>
</tr>
<tr class="rowColor" id="i29">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#failShard(java.lang.String,java.lang.Exception)">failShard</a></span>&#8203;(java.lang.String&nbsp;reason,
         java.lang.Exception&nbsp;e)</code></th>
<td class="colLast">
<div class="block">Fails the shard and marks the shard store as corrupted if
 <code>e</code> is caused by index corruption</div>
</td>
</tr>
<tr class="altColor" id="i30">
<td class="colFirst"><code><a href="../fielddata/ShardFieldData.html" title="org.elasticsearch.index.fielddata中的类">ShardFieldData</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fieldData()">fieldData</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i31">
<td class="colFirst"><code><a href="../fielddata/FieldDataStats.html" title="org.elasticsearch.index.fielddata中的类">FieldDataStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fieldDataStats(java.lang.String...)">fieldDataStats</a></span>&#8203;(java.lang.String...&nbsp;fields)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i32">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#finalizeRecovery()">finalizeRecovery</a></span>()</code></th>
<td class="colLast">
<div class="block">perform the last stages of recovery once all translog operations are done.</div>
</td>
</tr>
<tr class="rowColor" id="i33">
<td class="colFirst"><code><a href="../engine/Engine.CommitId.html" title="org.elasticsearch.index.engine中的类">Engine.CommitId</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flush(org.elasticsearch.action.admin.indices.flush.FlushRequest)">flush</a></span>&#8203;(<a href="../../action/admin/indices/flush/FlushRequest.html" title="org.elasticsearch.action.admin.indices.flush中的类">FlushRequest</a>&nbsp;request)</code></th>
<td class="colLast">
<div class="block">Executes the given flush request against the engine.</div>
</td>
</tr>
<tr class="altColor" id="i34">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flushAndCloseEngine()">flushAndCloseEngine</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i35">
<td class="colFirst"><code><a href="../flush/FlushStats.html" title="org.elasticsearch.index.flush中的类">FlushStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flushStats()">flushStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i36">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forceMerge(org.elasticsearch.action.admin.indices.forcemerge.ForceMergeRequest)">forceMerge</a></span>&#8203;(<a href="../../action/admin/indices/forcemerge/ForceMergeRequest.html" title="org.elasticsearch.action.admin.indices.forcemerge中的类">ForceMergeRequest</a>&nbsp;forceMerge)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i37">
<td class="colFirst"><code><a href="../engine/Engine.GetResult.html" title="org.elasticsearch.index.engine中的类">Engine.GetResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#get(java.lang.String,java.lang.String)">get</a></span>&#8203;(java.lang.String&nbsp;type,
   java.lang.String&nbsp;id)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i38">
<td class="colFirst"><code><a href="../engine/Engine.GetResult.html" title="org.elasticsearch.index.engine中的类">Engine.GetResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#get(org.elasticsearch.index.engine.Engine.Get)">get</a></span>&#8203;(<a href="../engine/Engine.Get.html" title="org.elasticsearch.index.engine中的类">Engine.Get</a>&nbsp;get)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i39">
<td class="colFirst"><code>java.util.List&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getActiveOperations()">getActiveOperations</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i40">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getActiveOperationsCount()">getActiveOperationsCount</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i41">
<td class="colFirst"><code><a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEngine()">getEngine</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i42">
<td class="colFirst"><code>protected <a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEngineOrNull()">getEngineOrNull</a></span>()</code></th>
<td class="colLast">
<div class="block">NOTE: returns null if engine is not yet started (e.g. recovery phase 1, copying over index files, is still running), or if engine is
 closed.</div>
</td>
</tr>
<tr class="rowColor" id="i43">
<td class="colFirst"><code><a href="../engine/Engine.DeleteResult.html" title="org.elasticsearch.index.engine中的类">Engine.DeleteResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFailedDeleteResult(java.lang.Exception,long)">getFailedDeleteResult</a></span>&#8203;(java.lang.Exception&nbsp;e,
                     long&nbsp;version)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i44">
<td class="colFirst"><code><a href="../engine/Engine.IndexResult.html" title="org.elasticsearch.index.engine中的类">Engine.IndexResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFailedIndexResult(java.lang.Exception,long)">getFailedIndexResult</a></span>&#8203;(java.lang.Exception&nbsp;e,
                    long&nbsp;version)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i45">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGlobalCheckpoint()">getGlobalCheckpoint</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the global checkpoint for the shard.</div>
</td>
</tr>
<tr class="altColor" id="i46">
<td class="colFirst"><code><a href="../translog/Translog.Snapshot.html" title="org.elasticsearch.index.translog中的接口">Translog.Snapshot</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getHistoryOperations(java.lang.String,long)">getHistoryOperations</a></span>&#8203;(java.lang.String&nbsp;source,
                    long&nbsp;startingSeqNo)</code></th>
<td class="colLast">
<div class="block">Creates a new history snapshot for reading operations since the provided starting seqno (inclusive).</div>
</td>
</tr>
<tr class="rowColor" id="i47">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getHistoryUUID()">getHistoryUUID</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i48">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getIndexBufferRAMBytesUsed()">getIndexBufferRAMBytesUsed</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns number of heap bytes used by the indexing buffer for this shard, or 0 if the shard is closed</div>
</td>
</tr>
<tr class="rowColor" id="i49">
<td class="colFirst"><code><a href="IndexEventListener.html" title="org.elasticsearch.index.shard中的接口">IndexEventListener</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getIndexEventListener()">getIndexEventListener</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i50">
<td class="colFirst"><code>org.apache.lucene.search.Sort</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getIndexSort()">getIndexSort</a></span>()</code></th>
<td class="colLast">
<div class="block">Return the sort order of this index, or null if the index has no sort.</div>
</td>
</tr>
<tr class="rowColor" id="i51">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastSyncedGlobalCheckpoint()">getLastSyncedGlobalCheckpoint</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the latest global checkpoint value that has been persisted in the underlying storage (i.e. translog's checkpoint)</div>
</td>
</tr>
<tr class="altColor" id="i52">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLocalCheckpoint()">getLocalCheckpoint</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the local checkpoint for the shard.</div>
</td>
</tr>
<tr class="rowColor" id="i53">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxSeenAutoIdTimestamp()">getMaxSeenAutoIdTimestamp</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the maximum auto_id_timestamp of all append-only requests have been processed by this shard or the auto_id_timestamp received
 from the primary via <a href="#updateMaxUnsafeAutoIdTimestamp(long)"><code>updateMaxUnsafeAutoIdTimestamp(long)</code></a> at the beginning of a peer-recovery or a primary-replica resync.</div>
</td>
</tr>
<tr class="altColor" id="i54">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxSeqNoOfUpdatesOrDeletes()">getMaxSeqNoOfUpdatesOrDeletes</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the maximum sequence number of either update or delete operations have been processed in this shard
 or the sequence number from <a href="#advanceMaxSeqNoOfUpdatesOrDeletes(long)"><code>advanceMaxSeqNoOfUpdatesOrDeletes(long)</code></a>.</div>
</td>
</tr>
<tr class="rowColor" id="i55">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMinRetainedSeqNo()">getMinRetainedSeqNo</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets the minimum retained sequence number for this engine.</div>
</td>
</tr>
<tr class="altColor" id="i56">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getOperationPrimaryTerm()">getOperationPrimaryTerm</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the primary term that is currently being used to assign to operations</div>
</td>
</tr>
<tr class="rowColor" id="i57">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPendingPrimaryTerm()">getPendingPrimaryTerm</a></span>()</code></th>
<td class="colLast">
<div class="block">USE THIS METHOD WITH CARE!</div>
</td>
</tr>
<tr class="altColor" id="i58">
<td class="colFirst"><code>org.apache.lucene.search.QueryCachingPolicy</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getQueryCachingPolicy()">getQueryCachingPolicy</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i59">
<td class="colFirst"><code><a href="ReplicationGroup.html" title="org.elasticsearch.index.shard中的类">ReplicationGroup</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getReplicationGroup()">getReplicationGroup</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current replication group for the shard.</div>
</td>
</tr>
<tr class="altColor" id="i60">
<td class="colFirst"><code><a href="../seqno/RetentionLeases.html" title="org.elasticsearch.index.seqno中的类">RetentionLeases</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRetentionLeases()">getRetentionLeases</a></span>()</code></th>
<td class="colLast">
<div class="block">Get all retention leases tracked on this shard.</div>
</td>
</tr>
<tr class="rowColor" id="i61">
<td class="colFirst"><code><a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-core/6.8.4.5-SNAPSHOT/org/elasticsearch/common/collect/Tuple.html?is-external=true" title="org.elasticsearch.common.collect中的类或接口" class="externalLink">Tuple</a>&lt;java.lang.Boolean,&#8203;<a href="../seqno/RetentionLeases.html" title="org.elasticsearch.index.seqno中的类">RetentionLeases</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRetentionLeases(boolean)">getRetentionLeases</a></span>&#8203;(boolean&nbsp;expireLeases)</code></th>
<td class="colLast">
<div class="block">If the expire leases parameter is false, gets all retention leases tracked on this shard and otherwise first calculates
 expiration of existing retention leases, and then gets all non-expired retention leases tracked on this shard.</div>
</td>
</tr>
<tr class="altColor" id="i62">
<td class="colFirst"><code><a href="../seqno/RetentionLeaseStats.html" title="org.elasticsearch.index.seqno中的类">RetentionLeaseStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRetentionLeaseStats()">getRetentionLeaseStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i63">
<td class="colFirst"><code><a href="SearchOperationListener.html" title="org.elasticsearch.index.shard中的接口">SearchOperationListener</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSearchOperationListener()">getSearchOperationListener</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i64">
<td class="colFirst"><code><a href="../get/ShardGetService.html" title="org.elasticsearch.index.get中的类">ShardGetService</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getService()">getService</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i65">
<td class="colFirst"><code><a href="../get/GetStats.html" title="org.elasticsearch.index.get中的类">GetStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getStats()">getStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i66">
<td class="colFirst"><code><a href="../../threadpool/ThreadPool.html" title="org.elasticsearch.threadpool中的类">ThreadPool</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getThreadPool()">getThreadPool</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i67">
<td class="colFirst"><code><a href="../translog/Translog.Durability.html" title="org.elasticsearch.index.translog中的枚举">Translog.Durability</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTranslogDurability()">getTranslogDurability</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current translog durability mode</div>
</td>
</tr>
<tr class="altColor" id="i68">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getWritingBytes()">getWritingBytes</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns how many bytes we are currently moving from heap to disk</div>
</td>
</tr>
<tr class="rowColor" id="i69">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#hasCompleteHistoryOperations(java.lang.String,long)">hasCompleteHistoryOperations</a></span>&#8203;(java.lang.String&nbsp;source,
                            long&nbsp;startingSeqNo)</code></th>
<td class="colLast">
<div class="block">Checks if we have a completed history of operations since the given starting seqno (inclusive).</div>
</td>
</tr>
<tr class="altColor" id="i70">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ignoreRecoveryAttempt()">ignoreRecoveryAttempt</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns <code>true</code> if this shard can ignore a recovery attempt made to it (since the already doing/done it)</div>
</td>
</tr>
<tr class="rowColor" id="i71">
<td class="colFirst"><code><a href="../engine/Engine.IndexResult.html" title="org.elasticsearch.index.engine中的类">Engine.IndexResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#index(org.elasticsearch.index.engine.Engine,org.elasticsearch.index.engine.Engine.Index)">index</a></span>&#8203;(<a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a>&nbsp;engine,
     <a href="../engine/Engine.Index.html" title="org.elasticsearch.index.engine中的类">Engine.Index</a>&nbsp;index)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i72">
<td class="colFirst"><code><a href="IndexingStats.html" title="org.elasticsearch.index.shard中的类">IndexingStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#indexingStats(java.lang.String...)">indexingStats</a></span>&#8203;(java.lang.String...&nbsp;types)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i73">
<td class="colFirst"><code><a href="../IndexService.html" title="org.elasticsearch.index中的类">IndexService</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#indexService()">indexService</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i74">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initiateTracking(java.lang.String)">initiateTracking</a></span>&#8203;(java.lang.String&nbsp;allocationId)</code></th>
<td class="colLast">
<div class="block">Called when the recovery process for a shard has opened the engine on the target shard.</div>
</td>
</tr>
<tr class="rowColor" id="i75">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isActive()">isActive</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i76">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isReadAllowed()">isReadAllowed</a></span>()</code></th>
<td class="colLast">
<div class="block">returns true if the <a href="IndexShardState.html" title="org.elasticsearch.index.shard中的枚举"><code>IndexShardState</code></a> allows reading</div>
</td>
</tr>
<tr class="rowColor" id="i77">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isRefreshNeeded()">isRefreshNeeded</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns <code>true</code> iff one or more changes to the engine are not visible to via the current searcher *or* there are pending
 refresh listeners.</div>
</td>
</tr>
<tr class="altColor" id="i78">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isRelocatedPrimary()">isRelocatedPrimary</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns whether the shard is a relocated primary, i.e. not in charge anymore of replicating changes (see <a href="../seqno/ReplicationTracker.html" title="org.elasticsearch.index.seqno中的类"><code>ReplicationTracker</code></a>).</div>
</td>
</tr>
<tr class="rowColor" id="i79">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isSyncNeeded()">isSyncNeeded</a></span>()</code></th>
<td class="colLast">
<div class="block">Checks if the underlying storage sync is required.</div>
</td>
</tr>
<tr class="altColor" id="i80">
<td class="colFirst"><code><a href="../seqno/RetentionLeases.html" title="org.elasticsearch.index.seqno中的类">RetentionLeases</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#loadRetentionLeases()">loadRetentionLeases</a></span>()</code></th>
<td class="colLast">
<div class="block">Loads the latest retention leases from their dedicated state file.</div>
</td>
</tr>
<tr class="rowColor" id="i81">
<td class="colFirst"><code><a href="../mapper/MapperService.html" title="org.elasticsearch.index.mapper中的类">MapperService</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#mapperService()">mapperService</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i82">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markAllocationIdAsInSync(java.lang.String,long)">markAllocationIdAsInSync</a></span>&#8203;(java.lang.String&nbsp;allocationId,
                        long&nbsp;localCheckpoint)</code></th>
<td class="colLast">
<div class="block">Marks the shard with the provided allocation ID as in-sync with the primary shard.</div>
</td>
</tr>
<tr class="rowColor" id="i83">
<td class="colFirst"><code><a href="IndexShardState.html" title="org.elasticsearch.index.shard中的枚举">IndexShardState</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markAsRecovering(java.lang.String,org.elasticsearch.indices.recovery.RecoveryState)">markAsRecovering</a></span>&#8203;(java.lang.String&nbsp;reason,
                <a href="../../indices/recovery/RecoveryState.html" title="org.elasticsearch.indices.recovery中的类">RecoveryState</a>&nbsp;recoveryState)</code></th>
<td class="colLast">
<div class="block">Marks the shard as recovering based on a recovery state, fails with exception is recovering is not allowed to be set.</div>
</td>
</tr>
<tr class="altColor" id="i84">
<td class="colFirst"><code><a href="../engine/Engine.NoOpResult.html" title="org.elasticsearch.index.engine中的类">Engine.NoOpResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markSeqNoAsNoop(long,java.lang.String)">markSeqNoAsNoop</a></span>&#8203;(long&nbsp;seqNo,
               java.lang.String&nbsp;reason)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i85">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#maybeSyncGlobalCheckpoint(java.lang.String)">maybeSyncGlobalCheckpoint</a></span>&#8203;(java.lang.String&nbsp;reason)</code></th>
<td class="colLast">
<div class="block">Syncs the global checkpoint to the replicas if the global checkpoint on at least one replica is behind the global checkpoint on the
 primary.</div>
</td>
</tr>
<tr class="altColor" id="i86">
<td class="colFirst"><code><a href="../merge/MergeStats.html" title="org.elasticsearch.index.merge中的类">MergeStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#mergeStats()">mergeStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i87">
<td class="colFirst"><code>org.apache.lucene.util.Version</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#minimumCompatibleVersion()">minimumCompatibleVersion</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i88">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#moveToStart()">moveToStart</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i89">
<td class="colFirst"><code><a href="../translog/Translog.Snapshot.html" title="org.elasticsearch.index.translog中的接口">Translog.Snapshot</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newChangesSnapshot(java.lang.String,long,long,boolean)">newChangesSnapshot</a></span>&#8203;(java.lang.String&nbsp;source,
                  long&nbsp;fromSeqNo,
                  long&nbsp;toSeqNo,
                  boolean&nbsp;requiredFullRange)</code></th>
<td class="colLast">
<div class="block">Creates a new changes snapshot for reading operations whose seq_no are between <code>fromSeqNo</code>(inclusive)
 and <code>toSeqNo</code>(inclusive).</div>
</td>
</tr>
<tr class="altColor" id="i90">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#noopUpdate(java.lang.String)">noopUpdate</a></span>&#8203;(java.lang.String&nbsp;type)</code></th>
<td class="colLast">
<div class="block">Should be called for each no-op update operation to increment relevant statistics.</div>
</td>
</tr>
<tr class="rowColor" id="i91">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onNewEngine(org.elasticsearch.index.engine.Engine)">onNewEngine</a></span>&#8203;(<a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a>&nbsp;newEngine)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i92">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onSettingsChanged()">onSettingsChanged</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i93">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#openEngineAndRecoverFromTranslog()">openEngineAndRecoverFromTranslog</a></span>()</code></th>
<td class="colLast">
<div class="block">opens the engine on top of the existing lucene engine and translog.</div>
</td>
</tr>
<tr class="altColor" id="i94">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#openEngineAndSkipTranslogRecovery()">openEngineAndSkipTranslogRecovery</a></span>()</code></th>
<td class="colLast">
<div class="block">Opens the engine on top of the existing lucene engine and translog.</div>
</td>
</tr>
<tr class="rowColor" id="i95">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#pendingInSync()">pendingInSync</a></span>()</code></th>
<td class="colLast">
<div class="block">Check if there are any recoveries pending in-sync.</div>
</td>
</tr>
<tr class="altColor" id="i96">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#performRecoveryRestart()">performRecoveryRestart</a></span>()</code></th>
<td class="colLast">
<div class="block">called if recovery has to be restarted after network error / delay **</div>
</td>
</tr>
<tr class="rowColor" id="i97">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#persistRetentionLeases()">persistRetentionLeases</a></span>()</code></th>
<td class="colLast">
<div class="block">Persists the current retention leases to their dedicated state file.</div>
</td>
</tr>
<tr class="altColor" id="i98">
<td class="colFirst"><code><a href="IndexShard.html" title="org.elasticsearch.index.shard中的类">IndexShard</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#postRecovery(java.lang.String)">postRecovery</a></span>&#8203;(java.lang.String&nbsp;reason)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i99">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#prepareForIndexRecovery()">prepareForIndexRecovery</a></span>()</code></th>
<td class="colLast">
<div class="block">called before starting to copy index files over</div>
</td>
</tr>
<tr class="altColor" id="i100">
<td class="colFirst"><code>static <a href="../engine/Engine.Index.html" title="org.elasticsearch.index.engine中的类">Engine.Index</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#prepareIndex(org.elasticsearch.index.mapper.DocumentMapperForType,org.elasticsearch.Version,org.elasticsearch.index.mapper.SourceToParse,long,long,long,org.elasticsearch.index.VersionType,org.elasticsearch.index.engine.Engine.Operation.Origin,long,boolean,long,long)">prepareIndex</a></span>&#8203;(<a href="../mapper/DocumentMapperForType.html" title="org.elasticsearch.index.mapper中的类">DocumentMapperForType</a>&nbsp;docMapper,
            <a href="../../Version.html" title="org.elasticsearch中的类">Version</a>&nbsp;indexCreatedVersion,
            <a href="../mapper/SourceToParse.html" title="org.elasticsearch.index.mapper中的类">SourceToParse</a>&nbsp;source,
            long&nbsp;seqNo,
            long&nbsp;primaryTerm,
            long&nbsp;version,
            <a href="../VersionType.html" title="org.elasticsearch.index中的枚举">VersionType</a>&nbsp;versionType,
            <a href="../engine/Engine.Operation.Origin.html" title="org.elasticsearch.index.engine中的枚举">Engine.Operation.Origin</a>&nbsp;origin,
            long&nbsp;autoGeneratedIdTimestamp,
            boolean&nbsp;isRetry,
            long&nbsp;ifSeqNo,
            long&nbsp;ifPrimaryTerm)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i101">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readAllowed()">readAllowed</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i102">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recoverFromLocalShards(java.util.function.BiConsumer,java.util.List)">recoverFromLocalShards</a></span>&#8203;(java.util.function.BiConsumer&lt;java.lang.String,&#8203;<a href="../../cluster/metadata/MappingMetaData.html" title="org.elasticsearch.cluster.metadata中的类">MappingMetaData</a>&gt;&nbsp;mappingUpdateConsumer,
                      java.util.List&lt;<a href="IndexShard.html" title="org.elasticsearch.index.shard中的类">IndexShard</a>&gt;&nbsp;localShards)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i103">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recoverFromStore()">recoverFromStore</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i104">
<td class="colFirst"><code><a href="../../indices/recovery/RecoveryState.html" title="org.elasticsearch.indices.recovery中的类">RecoveryState</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recoveryState()">recoveryState</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current <a href="../../indices/recovery/RecoveryState.html" title="org.elasticsearch.indices.recovery中的类"><code>RecoveryState</code></a> if this shard is recovering or has been recovering.</div>
</td>
</tr>
<tr class="rowColor" id="i105">
<td class="colFirst"><code><a href="../recovery/RecoveryStats.html" title="org.elasticsearch.index.recovery中的类">RecoveryStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recoveryStats()">recoveryStats</a></span>()</code></th>
<td class="colLast">
<div class="block">returns stats about ongoing recoveries, both source and target</div>
</td>
</tr>
<tr class="altColor" id="i106">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#refresh(java.lang.String)">refresh</a></span>&#8203;(java.lang.String&nbsp;source)</code></th>
<td class="colLast">
<div class="block">Writes all indexing changes to disk and opens a new searcher reflecting all changes.</div>
</td>
</tr>
<tr class="rowColor" id="i107">
<td class="colFirst"><code><a href="../refresh/RefreshStats.html" title="org.elasticsearch.index.refresh中的类">RefreshStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#refreshStats()">refreshStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i108">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#relocated(java.util.function.Consumer)">relocated</a></span>&#8203;(java.util.function.Consumer&lt;<a href="../seqno/ReplicationTracker.PrimaryContext.html" title="org.elasticsearch.index.seqno中的类">ReplicationTracker.PrimaryContext</a>&gt;&nbsp;consumer)</code></th>
<td class="colLast">
<div class="block">Completes the relocation.</div>
</td>
</tr>
<tr class="rowColor" id="i109">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeRetentionLease(java.lang.String,org.elasticsearch.action.ActionListener)">removeRetentionLease</a></span>&#8203;(java.lang.String&nbsp;id,
                    <a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../action/support/replication/ReplicationResponse.html" title="org.elasticsearch.action.support.replication中的类">ReplicationResponse</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Removes an existing retention lease.</div>
</td>
</tr>
<tr class="altColor" id="i110">
<td class="colFirst"><code><a href="../seqno/RetentionLease.html" title="org.elasticsearch.index.seqno中的类">RetentionLease</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#renewRetentionLease(java.lang.String,long,java.lang.String)">renewRetentionLease</a></span>&#8203;(java.lang.String&nbsp;id,
                   long&nbsp;retainingSequenceNumber,
                   java.lang.String&nbsp;source)</code></th>
<td class="colLast">
<div class="block">Renews an existing retention lease.</div>
</td>
</tr>
<tr class="rowColor" id="i111">
<td class="colFirst"><code><a href="../cache/request/ShardRequestCache.html" title="org.elasticsearch.index.cache.request中的类">ShardRequestCache</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#requestCache()">requestCache</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i112">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#restoreFromRepository(org.elasticsearch.repositories.Repository)">restoreFromRepository</a></span>&#8203;(<a href="../../repositories/Repository.html" title="org.elasticsearch.repositories中的接口">Repository</a>&nbsp;repository)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i113">
<td class="colFirst"><code><a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#routingEntry()">routingEntry</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the latest cluster routing entry received with this shard.</div>
</td>
</tr>
<tr class="altColor" id="i114">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#runUnderPrimaryPermit(java.lang.Runnable,java.util.function.Consumer,java.lang.String,java.lang.Object)">runUnderPrimaryPermit</a></span>&#8203;(java.lang.Runnable&nbsp;runnable,
                     java.util.function.Consumer&lt;java.lang.Exception&gt;&nbsp;onFailure,
                     java.lang.String&nbsp;executorOnDelay,
                     java.lang.Object&nbsp;debugInfo)</code></th>
<td class="colLast">
<div class="block">Runs the specified runnable under a permit and otherwise calling back the specified failure callback.</div>
</td>
</tr>
<tr class="rowColor" id="i115">
<td class="colFirst"><code><a href="../search/stats/SearchStats.html" title="org.elasticsearch.index.search.stats中的类">SearchStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#searchStats(java.lang.String...)">searchStats</a></span>&#8203;(java.lang.String...&nbsp;groups)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i116">
<td class="colFirst"><code>java.util.List&lt;<a href="../engine/Segment.html" title="org.elasticsearch.index.engine中的类">Segment</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#segments(boolean)">segments</a></span>&#8203;(boolean&nbsp;verbose)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i117">
<td class="colFirst"><code><a href="../engine/SegmentsStats.html" title="org.elasticsearch.index.engine中的类">SegmentsStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#segmentStats(boolean)">segmentStats</a></span>&#8203;(boolean&nbsp;includeSegmentFileSizes)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i118">
<td class="colFirst"><code><a href="../seqno/SeqNoStats.html" title="org.elasticsearch.index.seqno中的类">SeqNoStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#seqNoStats()">seqNoStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i119">
<td class="colFirst"><code><a href="../cache/bitset/ShardBitsetFilterCache.html" title="org.elasticsearch.index.cache.bitset中的类">ShardBitsetFilterCache</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardBitsetFilterCache()">shardBitsetFilterCache</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i120">
<td class="colFirst"><code><a href="ShardPath.html" title="org.elasticsearch.index.shard中的类">ShardPath</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardPath()">shardPath</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i121">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardRouting(org.elasticsearch.cluster.routing.ShardRouting)">shardRouting</a></span>&#8203;(<a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a>&nbsp;shardRouting)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i122">
<td class="colFirst"><code><a href="../search/stats/ShardSearchStats.html" title="org.elasticsearch.index.search.stats中的类">ShardSearchStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardShearchStats()">shardShearchStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i123">
<td class="colFirst"><code><a href="../store/Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类">Store.MetadataSnapshot</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#snapshotStoreMetadata()">snapshotStoreMetadata</a></span>()</code></th>
<td class="colLast">
<div class="block">gets a <a href="../store/Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类"><code>Store.MetadataSnapshot</code></a> for the current directory.</div>
</td>
</tr>
<tr class="altColor" id="i124">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startRecovery(org.elasticsearch.indices.recovery.RecoveryState,org.elasticsearch.indices.recovery.PeerRecoveryTargetService.RecoveryListener,java.util.function.BiConsumer,org.elasticsearch.indices.IndicesService)">startRecovery</a></span>&#8203;(<a href="../../indices/recovery/RecoveryState.html" title="org.elasticsearch.indices.recovery中的类">RecoveryState</a>&nbsp;recoveryState,
             <a href="../../indices/recovery/PeerRecoveryTargetService.RecoveryListener.html" title="org.elasticsearch.indices.recovery中的接口">PeerRecoveryTargetService.RecoveryListener</a>&nbsp;recoveryListener,
             java.util.function.BiConsumer&lt;java.lang.String,&#8203;<a href="../../cluster/metadata/MappingMetaData.html" title="org.elasticsearch.cluster.metadata中的类">MappingMetaData</a>&gt;&nbsp;mappingUpdateConsumer,
             <a href="../../indices/IndicesService.html" title="org.elasticsearch.indices中的类">IndicesService</a>&nbsp;indicesService)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i125">
<td class="colFirst"><code><a href="IndexShardState.html" title="org.elasticsearch.index.shard中的枚举">IndexShardState</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#state()">state</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the latest internal shard state.</div>
</td>
</tr>
<tr class="altColor" id="i126">
<td class="colFirst"><code><a href="../store/Store.html" title="org.elasticsearch.index.store中的类">Store</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#store()">store</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i127">
<td class="colFirst"><code><a href="../store/StoreStats.html" title="org.elasticsearch.index.store中的类">StoreStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#storeStats()">storeStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i128">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sync()">sync</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i129">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sync(org.elasticsearch.index.translog.Translog.Location,java.util.function.Consumer)">sync</a></span>&#8203;(<a href="../translog/Translog.Location.html" title="org.elasticsearch.index.translog中的类">Translog.Location</a>&nbsp;location,
    java.util.function.Consumer&lt;java.lang.Exception&gt;&nbsp;syncListener)</code></th>
<td class="colLast">
<div class="block">Syncs the given location with the underlying storage unless already synced.</div>
</td>
</tr>
<tr class="altColor" id="i130">
<td class="colFirst"><code><a href="../engine/Engine.SyncedFlushResult.html" title="org.elasticsearch.index.engine中的枚举">Engine.SyncedFlushResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#syncFlush(java.lang.String,org.elasticsearch.index.engine.Engine.CommitId)">syncFlush</a></span>&#8203;(java.lang.String&nbsp;syncId,
         <a href="../engine/Engine.CommitId.html" title="org.elasticsearch.index.engine中的类">Engine.CommitId</a>&nbsp;expectedCommitId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i131">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#syncRetentionLeases()">syncRetentionLeases</a></span>()</code></th>
<td class="colLast">
<div class="block">Syncs the current retention leases to all replicas.</div>
</td>
</tr>
<tr class="altColor" id="i132">
<td class="colFirst"><code><a href="../cache/bitset/ShardBitsetFilterCache.html" title="org.elasticsearch.index.cache.bitset中的类">ShardBitsetFilterCache</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tokenRangesBitsetFilterCache()">tokenRangesBitsetFilterCache</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i133">
<td class="colFirst"><code><a href="../translog/TranslogStats.html" title="org.elasticsearch.index.translog中的类">TranslogStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#translogStats()">translogStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i134">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#trimOperationOfPreviousPrimaryTerms(long)">trimOperationOfPreviousPrimaryTerms</a></span>&#8203;(long&nbsp;aboveSeqNo)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i135">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#trimTranslog()">trimTranslog</a></span>()</code></th>
<td class="colLast">
<div class="block">checks and removes translog files that no longer need to be retained.</div>
</td>
</tr>
<tr class="altColor" id="i136">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateGlobalCheckpointForShard(java.lang.String,long)">updateGlobalCheckpointForShard</a></span>&#8203;(java.lang.String&nbsp;allocationId,
                              long&nbsp;globalCheckpoint)</code></th>
<td class="colLast">
<div class="block">Update the local knowledge of the global checkpoint for the specified allocation ID.</div>
</td>
</tr>
<tr class="rowColor" id="i137">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateGlobalCheckpointOnReplica(long,java.lang.String)">updateGlobalCheckpointOnReplica</a></span>&#8203;(long&nbsp;globalCheckpoint,
                               java.lang.String&nbsp;reason)</code></th>
<td class="colLast">
<div class="block">Updates the global checkpoint on a replica shard after it has been updated by the primary.</div>
</td>
</tr>
<tr class="altColor" id="i138">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateLocalCheckpointForShard(java.lang.String,long)">updateLocalCheckpointForShard</a></span>&#8203;(java.lang.String&nbsp;allocationId,
                             long&nbsp;checkpoint)</code></th>
<td class="colLast">
<div class="block">Notifies the service to update the local checkpoint for the shard with the provided allocation ID.</div>
</td>
</tr>
<tr class="rowColor" id="i139">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateMaxUnsafeAutoIdTimestamp(long)">updateMaxUnsafeAutoIdTimestamp</a></span>&#8203;(long&nbsp;maxSeenAutoIdTimestampFromPrimary)</code></th>
<td class="colLast">
<div class="block">Since operations stored in soft-deletes do not have max_auto_id_timestamp, the primary has to propagate its max_auto_id_timestamp
 (via <a href="#getMaxSeenAutoIdTimestamp()"><code>getMaxSeenAutoIdTimestamp()</code></a> of all processed append-only requests to replicas at the beginning of a peer-recovery
 or a primary-replica resync to force a replica to disable optimization for all append-only requests which are replicated via
 replication while its retry variants are replicated via recovery without auto_id_timestamp.</div>
</td>
</tr>
<tr class="altColor" id="i140">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateRetentionLeasesOnReplica(org.elasticsearch.index.seqno.RetentionLeases)">updateRetentionLeasesOnReplica</a></span>&#8203;(<a href="../seqno/RetentionLeases.html" title="org.elasticsearch.index.seqno中的类">RetentionLeases</a>&nbsp;retentionLeases)</code></th>
<td class="colLast">
<div class="block">Updates retention leases on a replica.</div>
</td>
</tr>
<tr class="rowColor" id="i141">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateShardState(org.elasticsearch.cluster.routing.ShardRouting,long,long,java.util.Set,org.elasticsearch.cluster.routing.IndexShardRoutingTable,java.util.Set)">updateShardState</a></span>&#8203;(<a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a>&nbsp;newRouting,
                long&nbsp;newPrimaryTerm,
                long&nbsp;applyingClusterStateVersion,
                java.util.Set&lt;java.lang.String&gt;&nbsp;inSyncAllocationIds,
                <a href="../../cluster/routing/IndexShardRoutingTable.html" title="org.elasticsearch.cluster.routing中的类">IndexShardRoutingTable</a>&nbsp;routingTable,
                java.util.Set&lt;java.lang.String&gt;&nbsp;pre60AllocationIds)</code></th>
<td class="colLast">
<div class="block">Updates the shard state based on an incoming cluster state:
 - Updates and persists the new routing value</div>
</td>
</tr>
<tr class="altColor" id="i142">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateShardState(org.elasticsearch.cluster.routing.ShardRouting,long,java.util.function.BiConsumer,long,java.util.Set,org.elasticsearch.cluster.routing.IndexShardRoutingTable,java.util.Set)">updateShardState</a></span>&#8203;(<a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a>&nbsp;newRouting,
                long&nbsp;newPrimaryTerm,
                java.util.function.BiConsumer&lt;<a href="IndexShard.html" title="org.elasticsearch.index.shard中的类">IndexShard</a>,&#8203;<a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;?&gt;&gt;&nbsp;primaryReplicaSyncer,
                long&nbsp;applyingClusterStateVersion,
                java.util.Set&lt;java.lang.String&gt;&nbsp;inSyncAllocationIds,
                <a href="../../cluster/routing/IndexShardRoutingTable.html" title="org.elasticsearch.cluster.routing中的类">IndexShardRoutingTable</a>&nbsp;routingTable,
                java.util.Set&lt;java.lang.String&gt;&nbsp;pre60AllocationIds)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i143">
<td class="colFirst"><code>org.apache.lucene.util.Version</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#upgrade(org.elasticsearch.action.admin.indices.upgrade.post.UpgradeRequest)">upgrade</a></span>&#8203;(<a href="../../action/admin/indices/upgrade/post/UpgradeRequest.html" title="org.elasticsearch.action.admin.indices.upgrade.post中的类">UpgradeRequest</a>&nbsp;upgrade)</code></th>
<td class="colLast">
<div class="block">Upgrades the shard to the current version of Lucene and returns the minimum segment version</div>
</td>
</tr>
<tr class="altColor" id="i144">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#verifyActive()">verifyActive</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i145">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#verifyShardBeforeIndexClosing()">verifyShardBeforeIndexClosing</a></span>()</code></th>
<td class="colLast">
<div class="block">Performs the pre-closing checks on the <a href="IndexShard.html" title="org.elasticsearch.index.shard中的类"><code>IndexShard</code></a>.</div>
</td>
</tr>
<tr class="altColor" id="i146">
<td class="colFirst"><code><a href="../warmer/ShardIndexWarmerService.html" title="org.elasticsearch.index.warmer中的类">ShardIndexWarmerService</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#warmerService()">warmerService</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i147">
<td class="colFirst"><code><a href="../warmer/WarmerStats.html" title="org.elasticsearch.index.warmer中的类">WarmerStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#warmerStats()">warmerStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i148">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#writeIndexingBuffer()">writeIndexingBuffer</a></span>()</code></th>
<td class="colLast">
<div class="block">Called when our shard is using too much heap and should move buffered indexed/deleted documents to disk.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.elasticsearch.index.shard.AbstractIndexShardComponent">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;org.elasticsearch.index.shard.<a href="AbstractIndexShardComponent.html" title="org.elasticsearch.index.shard中的类">AbstractIndexShardComponent</a></h3>
<code><a href="AbstractIndexShardComponent.html#indexSettings()">indexSettings</a>, <a href="AbstractIndexShardComponent.html#nodeName()">nodeName</a>, <a href="AbstractIndexShardComponent.html#shardId()">shardId</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.elasticsearch.indices.cluster.IndicesClusterStateService.Shard">
<!--   -->
</a>
<h3>从接口继承的方法&nbsp;org.elasticsearch.indices.cluster.<a href="../../indices/cluster/IndicesClusterStateService.Shard.html" title="org.elasticsearch.indices.cluster中的接口">IndicesClusterStateService.Shard</a></h3>
<code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html#shardId()">shardId</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>字段详细资料</h3>
<a id="shardRouting">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shardRouting</h4>
<pre>protected volatile&nbsp;<a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a> shardRouting</pre>
</li>
</ul>
<a id="state">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>state</h4>
<pre>protected volatile&nbsp;<a href="IndexShardState.html" title="org.elasticsearch.index.shard中的枚举">IndexShardState</a> state</pre>
</li>
</ul>
<a id="currentEngineReference">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentEngineReference</h4>
<pre>protected final&nbsp;java.util.concurrent.atomic.AtomicReference&lt;<a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a>&gt; currentEngineReference</pre>
</li>
</ul>
<a id="refreshMetric">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshMetric</h4>
<pre>public final&nbsp;<a href="../../common/metrics/MeanMetric.html" title="org.elasticsearch.common.metrics中的类">MeanMetric</a> refreshMetric</pre>
</li>
</ul>
<a id="flushMetric">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flushMetric</h4>
<pre>public final&nbsp;<a href="../../common/metrics/MeanMetric.html" title="org.elasticsearch.common.metrics中的类">MeanMetric</a> flushMetric</pre>
</li>
</ul>
<a id="periodicFlushMetric">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>periodicFlushMetric</h4>
<pre>public final&nbsp;<a href="../../common/metrics/CounterMetric.html" title="org.elasticsearch.common.metrics中的类">CounterMetric</a> periodicFlushMetric</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a id="&lt;init&gt;(org.elasticsearch.cluster.routing.ShardRouting,org.elasticsearch.index.IndexSettings,org.elasticsearch.index.shard.ShardPath,org.elasticsearch.index.store.Store,java.util.function.Supplier,org.elasticsearch.index.cache.IndexCache,org.elasticsearch.index.mapper.MapperService,org.elasticsearch.index.similarity.SimilarityService,org.elasticsearch.index.engine.EngineFactory,org.elasticsearch.index.shard.IndexEventListener,org.elasticsearch.index.shard.IndexSearcherWrapper,org.elasticsearch.threadpool.ThreadPool,org.elasticsearch.common.util.BigArrays,org.elasticsearch.index.engine.Engine.Warmer,java.util.List,java.util.List,org.elasticsearch.indices.breaker.CircuitBreakerService,org.elasticsearch.index.IndexService,org.elasticsearch.cluster.service.ClusterService)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>IndexShard</h4>
<pre>public&nbsp;IndexShard&#8203;(<a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a>&nbsp;shardRouting,
                  <a href="../IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
                  <a href="ShardPath.html" title="org.elasticsearch.index.shard中的类">ShardPath</a>&nbsp;path,
                  <a href="../store/Store.html" title="org.elasticsearch.index.store中的类">Store</a>&nbsp;store,
                  java.util.function.Supplier&lt;org.apache.lucene.search.Sort&gt;&nbsp;indexSortSupplier,
                  <a href="../cache/IndexCache.html" title="org.elasticsearch.index.cache中的类">IndexCache</a>&nbsp;indexCache,
                  <a href="../mapper/MapperService.html" title="org.elasticsearch.index.mapper中的类">MapperService</a>&nbsp;mapperService,
                  <a href="../similarity/SimilarityService.html" title="org.elasticsearch.index.similarity中的类">SimilarityService</a>&nbsp;similarityService,
                  <a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-x-content/6.8.4.5-SNAPSHOT/org/elasticsearch/common/Nullable.html?is-external=true" title="org.elasticsearch.common中的类或接口" class="externalLink">@Nullable</a>
                  <a href="../engine/EngineFactory.html" title="org.elasticsearch.index.engine中的接口">EngineFactory</a>&nbsp;engineFactory,
                  <a href="IndexEventListener.html" title="org.elasticsearch.index.shard中的接口">IndexEventListener</a>&nbsp;indexEventListener,
                  <a href="IndexSearcherWrapper.html" title="org.elasticsearch.index.shard中的类">IndexSearcherWrapper</a>&nbsp;indexSearcherWrapper,
                  <a href="../../threadpool/ThreadPool.html" title="org.elasticsearch.threadpool中的类">ThreadPool</a>&nbsp;threadPool,
                  <a href="../../common/util/BigArrays.html" title="org.elasticsearch.common.util中的类">BigArrays</a>&nbsp;bigArrays,
                  <a href="../engine/Engine.Warmer.html" title="org.elasticsearch.index.engine中的接口">Engine.Warmer</a>&nbsp;warmer,
                  java.util.List&lt;<a href="SearchOperationListener.html" title="org.elasticsearch.index.shard中的接口">SearchOperationListener</a>&gt;&nbsp;searchOperationListener,
                  java.util.List&lt;<a href="IndexingOperationListener.html" title="org.elasticsearch.index.shard中的接口">IndexingOperationListener</a>&gt;&nbsp;listeners,
                  <a href="../../indices/breaker/CircuitBreakerService.html" title="org.elasticsearch.indices.breaker中的类">CircuitBreakerService</a>&nbsp;circuitBreakerService,
                  <a href="../IndexService.html" title="org.elasticsearch.index中的类">IndexService</a>&nbsp;indexService,
                  <a href="../../cluster/service/ClusterService.html" title="org.elasticsearch.cluster.service中的类">ClusterService</a>&nbsp;clusterService)
           throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a id="getThreadPool()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getThreadPool</h4>
<pre class="methodSignature">public&nbsp;<a href="../../threadpool/ThreadPool.html" title="org.elasticsearch.threadpool中的类">ThreadPool</a>&nbsp;getThreadPool()</pre>
</li>
</ul>
<a id="store()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>store</h4>
<pre class="methodSignature">public&nbsp;<a href="../store/Store.html" title="org.elasticsearch.index.store中的类">Store</a>&nbsp;store()</pre>
</li>
</ul>
<a id="getIndexSort()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexSort</h4>
<pre class="methodSignature">public&nbsp;org.apache.lucene.search.Sort&nbsp;getIndexSort()</pre>
<div class="block">Return the sort order of this index, or null if the index has no sort.</div>
</li>
</ul>
<a id="getService()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getService</h4>
<pre class="methodSignature">public&nbsp;<a href="../get/ShardGetService.html" title="org.elasticsearch.index.get中的类">ShardGetService</a>&nbsp;getService()</pre>
</li>
</ul>
<a id="shardBitsetFilterCache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shardBitsetFilterCache</h4>
<pre class="methodSignature">public&nbsp;<a href="../cache/bitset/ShardBitsetFilterCache.html" title="org.elasticsearch.index.cache.bitset中的类">ShardBitsetFilterCache</a>&nbsp;shardBitsetFilterCache()</pre>
</li>
</ul>
<a id="indexService()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>indexService</h4>
<pre class="methodSignature">public&nbsp;<a href="../IndexService.html" title="org.elasticsearch.index中的类">IndexService</a>&nbsp;indexService()</pre>
</li>
</ul>
<a id="tokenRangesBitsetFilterCache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tokenRangesBitsetFilterCache</h4>
<pre class="methodSignature">public&nbsp;<a href="../cache/bitset/ShardBitsetFilterCache.html" title="org.elasticsearch.index.cache.bitset中的类">ShardBitsetFilterCache</a>&nbsp;tokenRangesBitsetFilterCache()</pre>
</li>
</ul>
<a id="mapperService()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mapperService</h4>
<pre class="methodSignature">public&nbsp;<a href="../mapper/MapperService.html" title="org.elasticsearch.index.mapper中的类">MapperService</a>&nbsp;mapperService()</pre>
</li>
</ul>
<a id="getSearchOperationListener()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSearchOperationListener</h4>
<pre class="methodSignature">public&nbsp;<a href="SearchOperationListener.html" title="org.elasticsearch.index.shard中的接口">SearchOperationListener</a>&nbsp;getSearchOperationListener()</pre>
</li>
</ul>
<a id="warmerService()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>warmerService</h4>
<pre class="methodSignature">public&nbsp;<a href="../warmer/ShardIndexWarmerService.html" title="org.elasticsearch.index.warmer中的类">ShardIndexWarmerService</a>&nbsp;warmerService()</pre>
</li>
</ul>
<a id="requestCache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>requestCache</h4>
<pre class="methodSignature">public&nbsp;<a href="../cache/request/ShardRequestCache.html" title="org.elasticsearch.index.cache.request中的类">ShardRequestCache</a>&nbsp;requestCache()</pre>
</li>
</ul>
<a id="fieldData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fieldData</h4>
<pre class="methodSignature">public&nbsp;<a href="../fielddata/ShardFieldData.html" title="org.elasticsearch.index.fielddata中的类">ShardFieldData</a>&nbsp;fieldData()</pre>
</li>
</ul>
<a id="getPendingPrimaryTerm()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPendingPrimaryTerm</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getPendingPrimaryTerm()</pre>
<div class="block">USE THIS METHOD WITH CARE!
 Returns the primary term the index shard is supposed to be on. In case of primary promotion or when a replica learns about
 a new term due to a new primary, the term that's exposed here will not be the term that the shard internally uses to assign
 to operations. The shard will auto-correct its internal operation term, but this might take time.
 See <a href="../../cluster/metadata/IndexMetaData.html#primaryTerm(int)"><code>IndexMetaData.primaryTerm(int)</code></a></div>
</li>
</ul>
<a id="getOperationPrimaryTerm()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOperationPrimaryTerm</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getOperationPrimaryTerm()</pre>
<div class="block">Returns the primary term that is currently being used to assign to operations</div>
</li>
</ul>
<a id="routingEntry()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>routingEntry</h4>
<pre class="methodSignature">public&nbsp;<a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a>&nbsp;routingEntry()</pre>
<div class="block">Returns the latest cluster routing entry received with this shard.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html#routingEntry()">routingEntry</a></code>&nbsp;在接口中&nbsp;<code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html" title="org.elasticsearch.indices.cluster中的接口">IndicesClusterStateService.Shard</a></code></dd>
</dl>
</li>
</ul>
<a id="shardRouting(org.elasticsearch.cluster.routing.ShardRouting)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shardRouting</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;shardRouting&#8203;(<a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a>&nbsp;shardRouting)</pre>
</li>
</ul>
<a id="moveToStart()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveToStart</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;moveToStart()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html#moveToStart()">moveToStart</a></code>&nbsp;在接口中&nbsp;<code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html" title="org.elasticsearch.indices.cluster中的接口">IndicesClusterStateService.Shard</a></code></dd>
</dl>
</li>
</ul>
<a id="getQueryCachingPolicy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQueryCachingPolicy</h4>
<pre class="methodSignature">public&nbsp;org.apache.lucene.search.QueryCachingPolicy&nbsp;getQueryCachingPolicy()</pre>
</li>
</ul>
<a id="updateShardState(org.elasticsearch.cluster.routing.ShardRouting,long,java.util.function.BiConsumer,long,java.util.Set,org.elasticsearch.cluster.routing.IndexShardRoutingTable,java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateShardState</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;updateShardState&#8203;(<a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a>&nbsp;newRouting,
                             long&nbsp;newPrimaryTerm,
                             java.util.function.BiConsumer&lt;<a href="IndexShard.html" title="org.elasticsearch.index.shard中的类">IndexShard</a>,&#8203;<a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;?&gt;&gt;&nbsp;primaryReplicaSyncer,
                             long&nbsp;applyingClusterStateVersion,
                             java.util.Set&lt;java.lang.String&gt;&nbsp;inSyncAllocationIds,
                             <a href="../../cluster/routing/IndexShardRoutingTable.html" title="org.elasticsearch.cluster.routing中的类">IndexShardRoutingTable</a>&nbsp;routingTable,
                             java.util.Set&lt;java.lang.String&gt;&nbsp;pre60AllocationIds)
                      throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="updateShardState(org.elasticsearch.cluster.routing.ShardRouting,long,long,java.util.Set,org.elasticsearch.cluster.routing.IndexShardRoutingTable,java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateShardState</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;updateShardState&#8203;(<a href="../../cluster/routing/ShardRouting.html" title="org.elasticsearch.cluster.routing中的类">ShardRouting</a>&nbsp;newRouting,
                             long&nbsp;newPrimaryTerm,
                             long&nbsp;applyingClusterStateVersion,
                             java.util.Set&lt;java.lang.String&gt;&nbsp;inSyncAllocationIds,
                             <a href="../../cluster/routing/IndexShardRoutingTable.html" title="org.elasticsearch.cluster.routing中的类">IndexShardRoutingTable</a>&nbsp;routingTable,
                             java.util.Set&lt;java.lang.String&gt;&nbsp;pre60AllocationIds)
                      throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">从接口复制的说明:&nbsp;<code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html#updateShardState(org.elasticsearch.cluster.routing.ShardRouting,long,long,java.util.Set,org.elasticsearch.cluster.routing.IndexShardRoutingTable,java.util.Set)">IndicesClusterStateService.Shard</a></code></span></div>
<div class="block">Updates the shard state based on an incoming cluster state:
 - Updates and persists the new routing value.
 - Updates the primary term if this shard is a primary.
 - Updates the allocation ids that are tracked by the shard if it is a primary.
   See <a href="../seqno/ReplicationTracker.html#updateFromMaster(long,java.util.Set,org.elasticsearch.cluster.routing.IndexShardRoutingTable,java.util.Set)"><code>ReplicationTracker.updateFromMaster(long, Set, IndexShardRoutingTable, Set)</code></a> for details.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html#updateShardState(org.elasticsearch.cluster.routing.ShardRouting,long,long,java.util.Set,org.elasticsearch.cluster.routing.IndexShardRoutingTable,java.util.Set)">updateShardState</a></code>&nbsp;在接口中&nbsp;<code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html" title="org.elasticsearch.indices.cluster中的接口">IndicesClusterStateService.Shard</a></code></dd>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>newRouting</code> - the new routing entry</dd>
<dd><code>newPrimaryTerm</code> - the new primary term</dd>
<dd><code>applyingClusterStateVersion</code> - the cluster state version being applied when updating the allocation IDs from the master</dd>
<dd><code>inSyncAllocationIds</code> - the allocation ids of the currently in-sync shard copies</dd>
<dd><code>routingTable</code> - the shard routing table</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if shard state could not be persisted</dd>
</dl>
</li>
</ul>
<a id="markAsRecovering(java.lang.String,org.elasticsearch.indices.recovery.RecoveryState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markAsRecovering</h4>
<pre class="methodSignature">public&nbsp;<a href="IndexShardState.html" title="org.elasticsearch.index.shard中的枚举">IndexShardState</a>&nbsp;markAsRecovering&#8203;(java.lang.String&nbsp;reason,
                                        <a href="../../indices/recovery/RecoveryState.html" title="org.elasticsearch.indices.recovery中的类">RecoveryState</a>&nbsp;recoveryState)
                                 throws <a href="IndexShardStartedException.html" title="org.elasticsearch.index.shard中的类">IndexShardStartedException</a>,
                                        <a href="IndexShardRelocatedException.html" title="org.elasticsearch.index.shard中的类">IndexShardRelocatedException</a>,
                                        <a href="IndexShardRecoveringException.html" title="org.elasticsearch.index.shard中的类">IndexShardRecoveringException</a>,
                                        <a href="IndexShardClosedException.html" title="org.elasticsearch.index.shard中的类">IndexShardClosedException</a></pre>
<div class="block">Marks the shard as recovering based on a recovery state, fails with exception is recovering is not allowed to be set.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="IndexShardStartedException.html" title="org.elasticsearch.index.shard中的类">IndexShardStartedException</a></code></dd>
<dd><code><a href="IndexShardRelocatedException.html" title="org.elasticsearch.index.shard中的类">IndexShardRelocatedException</a></code></dd>
<dd><code><a href="IndexShardRecoveringException.html" title="org.elasticsearch.index.shard中的类">IndexShardRecoveringException</a></code></dd>
<dd><code><a href="IndexShardClosedException.html" title="org.elasticsearch.index.shard中的类">IndexShardClosedException</a></code></dd>
</dl>
</li>
</ul>
<a id="relocated(java.util.function.Consumer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>relocated</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;relocated&#8203;(java.util.function.Consumer&lt;<a href="../seqno/ReplicationTracker.PrimaryContext.html" title="org.elasticsearch.index.seqno中的类">ReplicationTracker.PrimaryContext</a>&gt;&nbsp;consumer)
               throws <a href="IllegalIndexShardStateException.html" title="org.elasticsearch.index.shard中的类">IllegalIndexShardStateException</a>,
                      java.lang.InterruptedException</pre>
<div class="block">Completes the relocation. Operations are blocked and current operations are drained before changing state to relocated. The provided
 <code>Runnable</code> is executed after all operations are successfully blocked.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>consumer</code> - a <code>Runnable</code> that is executed after operations are blocked</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="IllegalIndexShardStateException.html" title="org.elasticsearch.index.shard中的类">IllegalIndexShardStateException</a></code> - if the shard is not relocating due to concurrent cancellation</dd>
<dd><code>java.lang.InterruptedException</code> - if blocking operations is interrupted</dd>
</dl>
</li>
</ul>
<a id="state()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>state</h4>
<pre class="methodSignature">public&nbsp;<a href="IndexShardState.html" title="org.elasticsearch.index.shard中的枚举">IndexShardState</a>&nbsp;state()</pre>
<div class="block"><span class="descfrmTypeLabel">从接口复制的说明:&nbsp;<code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html#state()">IndicesClusterStateService.Shard</a></code></span></div>
<div class="block">Returns the latest internal shard state.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html#state()">state</a></code>&nbsp;在接口中&nbsp;<code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html" title="org.elasticsearch.indices.cluster中的接口">IndicesClusterStateService.Shard</a></code></dd>
</dl>
</li>
</ul>
<a id="applyIndexOperationOnPrimary(long,org.elasticsearch.index.VersionType,org.elasticsearch.index.mapper.SourceToParse,long,long,long,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyIndexOperationOnPrimary</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.IndexResult.html" title="org.elasticsearch.index.engine中的类">Engine.IndexResult</a>&nbsp;applyIndexOperationOnPrimary&#8203;(long&nbsp;version,
                                                       <a href="../VersionType.html" title="org.elasticsearch.index中的枚举">VersionType</a>&nbsp;versionType,
                                                       <a href="../mapper/SourceToParse.html" title="org.elasticsearch.index.mapper中的类">SourceToParse</a>&nbsp;sourceToParse,
                                                       long&nbsp;ifSeqNo,
                                                       long&nbsp;ifPrimaryTerm,
                                                       long&nbsp;autoGeneratedTimestamp,
                                                       boolean&nbsp;isRetry)
                                                throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="applyIndexOperationOnReplica(long,long,org.elasticsearch.index.VersionType,long,boolean,org.elasticsearch.index.mapper.SourceToParse)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyIndexOperationOnReplica</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.IndexResult.html" title="org.elasticsearch.index.engine中的类">Engine.IndexResult</a>&nbsp;applyIndexOperationOnReplica&#8203;(long&nbsp;seqNo,
                                                       long&nbsp;version,
                                                       <a href="../VersionType.html" title="org.elasticsearch.index中的枚举">VersionType</a>&nbsp;versionType,
                                                       long&nbsp;autoGeneratedTimeStamp,
                                                       boolean&nbsp;isRetry,
                                                       <a href="../mapper/SourceToParse.html" title="org.elasticsearch.index.mapper中的类">SourceToParse</a>&nbsp;sourceToParse)
                                                throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="prepareIndex(org.elasticsearch.index.mapper.DocumentMapperForType,org.elasticsearch.Version,org.elasticsearch.index.mapper.SourceToParse,long,long,long,org.elasticsearch.index.VersionType,org.elasticsearch.index.engine.Engine.Operation.Origin,long,boolean,long,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareIndex</h4>
<pre class="methodSignature">public static&nbsp;<a href="../engine/Engine.Index.html" title="org.elasticsearch.index.engine中的类">Engine.Index</a>&nbsp;prepareIndex&#8203;(<a href="../mapper/DocumentMapperForType.html" title="org.elasticsearch.index.mapper中的类">DocumentMapperForType</a>&nbsp;docMapper,
                                        <a href="../../Version.html" title="org.elasticsearch中的类">Version</a>&nbsp;indexCreatedVersion,
                                        <a href="../mapper/SourceToParse.html" title="org.elasticsearch.index.mapper中的类">SourceToParse</a>&nbsp;source,
                                        long&nbsp;seqNo,
                                        long&nbsp;primaryTerm,
                                        long&nbsp;version,
                                        <a href="../VersionType.html" title="org.elasticsearch.index中的枚举">VersionType</a>&nbsp;versionType,
                                        <a href="../engine/Engine.Operation.Origin.html" title="org.elasticsearch.index.engine中的枚举">Engine.Operation.Origin</a>&nbsp;origin,
                                        long&nbsp;autoGeneratedIdTimestamp,
                                        boolean&nbsp;isRetry,
                                        long&nbsp;ifSeqNo,
                                        long&nbsp;ifPrimaryTerm)</pre>
</li>
</ul>
<a id="index(org.elasticsearch.index.engine.Engine,org.elasticsearch.index.engine.Engine.Index)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>index</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.IndexResult.html" title="org.elasticsearch.index.engine中的类">Engine.IndexResult</a>&nbsp;index&#8203;(<a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a>&nbsp;engine,
                                <a href="../engine/Engine.Index.html" title="org.elasticsearch.index.engine中的类">Engine.Index</a>&nbsp;index)
                         throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="markSeqNoAsNoop(long,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markSeqNoAsNoop</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.NoOpResult.html" title="org.elasticsearch.index.engine中的类">Engine.NoOpResult</a>&nbsp;markSeqNoAsNoop&#8203;(long&nbsp;seqNo,
                                         java.lang.String&nbsp;reason)
                                  throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getFailedIndexResult(java.lang.Exception,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFailedIndexResult</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.IndexResult.html" title="org.elasticsearch.index.engine中的类">Engine.IndexResult</a>&nbsp;getFailedIndexResult&#8203;(java.lang.Exception&nbsp;e,
                                               long&nbsp;version)</pre>
</li>
</ul>
<a id="getFailedDeleteResult(java.lang.Exception,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFailedDeleteResult</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.DeleteResult.html" title="org.elasticsearch.index.engine中的类">Engine.DeleteResult</a>&nbsp;getFailedDeleteResult&#8203;(java.lang.Exception&nbsp;e,
                                                 long&nbsp;version)</pre>
</li>
</ul>
<a id="applyDeleteOperationOnPrimary(long,java.lang.String,java.lang.String,org.elasticsearch.index.VersionType,long,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyDeleteOperationOnPrimary</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.DeleteResult.html" title="org.elasticsearch.index.engine中的类">Engine.DeleteResult</a>&nbsp;applyDeleteOperationOnPrimary&#8203;(long&nbsp;version,
                                                         java.lang.String&nbsp;type,
                                                         java.lang.String&nbsp;id,
                                                         <a href="../VersionType.html" title="org.elasticsearch.index中的枚举">VersionType</a>&nbsp;versionType,
                                                         long&nbsp;ifSeqNo,
                                                         long&nbsp;ifPrimaryTerm)
                                                  throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="applyDeleteOperationOnReplica(long,long,java.lang.String,java.lang.String,org.elasticsearch.index.VersionType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyDeleteOperationOnReplica</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.DeleteResult.html" title="org.elasticsearch.index.engine中的类">Engine.DeleteResult</a>&nbsp;applyDeleteOperationOnReplica&#8203;(long&nbsp;seqNo,
                                                         long&nbsp;version,
                                                         java.lang.String&nbsp;type,
                                                         java.lang.String&nbsp;id,
                                                         <a href="../VersionType.html" title="org.elasticsearch.index中的枚举">VersionType</a>&nbsp;versionType)
                                                  throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="delete(org.elasticsearch.index.engine.Engine,org.elasticsearch.index.engine.Engine.Delete)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.DeleteResult.html" title="org.elasticsearch.index.engine中的类">Engine.DeleteResult</a>&nbsp;delete&#8203;(<a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a>&nbsp;engine,
                                  <a href="../engine/Engine.Delete.html" title="org.elasticsearch.index.engine中的类">Engine.Delete</a>&nbsp;delete)
                           throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="get(org.elasticsearch.index.engine.Engine.Get)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.GetResult.html" title="org.elasticsearch.index.engine中的类">Engine.GetResult</a>&nbsp;get&#8203;(<a href="../engine/Engine.Get.html" title="org.elasticsearch.index.engine中的类">Engine.Get</a>&nbsp;get)</pre>
</li>
</ul>
<a id="get(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.GetResult.html" title="org.elasticsearch.index.engine中的类">Engine.GetResult</a>&nbsp;get&#8203;(java.lang.String&nbsp;type,
                            java.lang.String&nbsp;id)
                     throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="refresh(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refresh</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;refresh&#8203;(java.lang.String&nbsp;source)</pre>
<div class="block">Writes all indexing changes to disk and opens a new searcher reflecting all changes.  This can throw <code>AlreadyClosedException</code>.</div>
</li>
</ul>
<a id="getWritingBytes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWritingBytes</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getWritingBytes()</pre>
<div class="block">Returns how many bytes we are currently moving from heap to disk</div>
</li>
</ul>
<a id="refreshStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../refresh/RefreshStats.html" title="org.elasticsearch.index.refresh中的类">RefreshStats</a>&nbsp;refreshStats()</pre>
</li>
</ul>
<a id="flushStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flushStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../flush/FlushStats.html" title="org.elasticsearch.index.flush中的类">FlushStats</a>&nbsp;flushStats()</pre>
</li>
</ul>
<a id="docStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>docStats</h4>
<pre class="methodSignature">public&nbsp;<a href="DocsStats.html" title="org.elasticsearch.index.shard中的类">DocsStats</a>&nbsp;docStats()</pre>
</li>
</ul>
<a id="commitStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/CommitStats.html" title="org.elasticsearch.index.engine中的类">CommitStats</a>&nbsp;commitStats()</pre>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd><a href="../engine/CommitStats.html" title="org.elasticsearch.index.engine中的类"><code>CommitStats</code></a></dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>org.apache.lucene.store.AlreadyClosedException</code> - if shard is closed</dd>
</dl>
</li>
</ul>
<a id="seqNoStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>seqNoStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../seqno/SeqNoStats.html" title="org.elasticsearch.index.seqno中的类">SeqNoStats</a>&nbsp;seqNoStats()</pre>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd><a href="../seqno/SeqNoStats.html" title="org.elasticsearch.index.seqno中的类"><code>SeqNoStats</code></a></dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>org.apache.lucene.store.AlreadyClosedException</code> - if shard is closed</dd>
</dl>
</li>
</ul>
<a id="indexingStats(java.lang.String...)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>indexingStats</h4>
<pre class="methodSignature">public&nbsp;<a href="IndexingStats.html" title="org.elasticsearch.index.shard中的类">IndexingStats</a>&nbsp;indexingStats&#8203;(java.lang.String...&nbsp;types)</pre>
</li>
</ul>
<a id="searchStats(java.lang.String...)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>searchStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../search/stats/SearchStats.html" title="org.elasticsearch.index.search.stats中的类">SearchStats</a>&nbsp;searchStats&#8203;(java.lang.String...&nbsp;groups)</pre>
</li>
</ul>
<a id="shardShearchStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shardShearchStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../search/stats/ShardSearchStats.html" title="org.elasticsearch.index.search.stats中的类">ShardSearchStats</a>&nbsp;shardShearchStats()</pre>
</li>
</ul>
<a id="getStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../get/GetStats.html" title="org.elasticsearch.index.get中的类">GetStats</a>&nbsp;getStats()</pre>
</li>
</ul>
<a id="storeStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../store/StoreStats.html" title="org.elasticsearch.index.store中的类">StoreStats</a>&nbsp;storeStats()</pre>
</li>
</ul>
<a id="mergeStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../merge/MergeStats.html" title="org.elasticsearch.index.merge中的类">MergeStats</a>&nbsp;mergeStats()</pre>
</li>
</ul>
<a id="segmentStats(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>segmentStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/SegmentsStats.html" title="org.elasticsearch.index.engine中的类">SegmentsStats</a>&nbsp;segmentStats&#8203;(boolean&nbsp;includeSegmentFileSizes)</pre>
</li>
</ul>
<a id="warmerStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>warmerStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../warmer/WarmerStats.html" title="org.elasticsearch.index.warmer中的类">WarmerStats</a>&nbsp;warmerStats()</pre>
</li>
</ul>
<a id="fieldDataStats(java.lang.String...)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fieldDataStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../fielddata/FieldDataStats.html" title="org.elasticsearch.index.fielddata中的类">FieldDataStats</a>&nbsp;fieldDataStats&#8203;(java.lang.String...&nbsp;fields)</pre>
</li>
</ul>
<a id="translogStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>translogStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../translog/TranslogStats.html" title="org.elasticsearch.index.translog中的类">TranslogStats</a>&nbsp;translogStats()</pre>
</li>
</ul>
<a id="completionStats(java.lang.String...)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>completionStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../../search/suggest/completion/CompletionStats.html" title="org.elasticsearch.search.suggest.completion中的类">CompletionStats</a>&nbsp;completionStats&#8203;(java.lang.String...&nbsp;fields)</pre>
</li>
</ul>
<a id="syncFlush(java.lang.String,org.elasticsearch.index.engine.Engine.CommitId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>syncFlush</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.SyncedFlushResult.html" title="org.elasticsearch.index.engine中的枚举">Engine.SyncedFlushResult</a>&nbsp;syncFlush&#8203;(java.lang.String&nbsp;syncId,
                                          <a href="../engine/Engine.CommitId.html" title="org.elasticsearch.index.engine中的类">Engine.CommitId</a>&nbsp;expectedCommitId)</pre>
</li>
</ul>
<a id="flush(org.elasticsearch.action.admin.indices.flush.FlushRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flush</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.CommitId.html" title="org.elasticsearch.index.engine中的类">Engine.CommitId</a>&nbsp;flush&#8203;(<a href="../../action/admin/indices/flush/FlushRequest.html" title="org.elasticsearch.action.admin.indices.flush中的类">FlushRequest</a>&nbsp;request)</pre>
<div class="block">Executes the given flush request against the engine.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>request</code> - the flush request</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the commit ID</dd>
</dl>
</li>
</ul>
<a id="trimTranslog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trimTranslog</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;trimTranslog()</pre>
<div class="block">checks and removes translog files that no longer need to be retained. See
 <a href="../translog/TranslogDeletionPolicy.html" title="org.elasticsearch.index.translog中的类"><code>TranslogDeletionPolicy</code></a> for details</div>
</li>
</ul>
<a id="forceMerge(org.elasticsearch.action.admin.indices.forcemerge.ForceMergeRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceMerge</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;forceMerge&#8203;(<a href="../../action/admin/indices/forcemerge/ForceMergeRequest.html" title="org.elasticsearch.action.admin.indices.forcemerge中的类">ForceMergeRequest</a>&nbsp;forceMerge)
                throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="upgrade(org.elasticsearch.action.admin.indices.upgrade.post.UpgradeRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>upgrade</h4>
<pre class="methodSignature">public&nbsp;org.apache.lucene.util.Version&nbsp;upgrade&#8203;(<a href="../../action/admin/indices/upgrade/post/UpgradeRequest.html" title="org.elasticsearch.action.admin.indices.upgrade.post中的类">UpgradeRequest</a>&nbsp;upgrade)
                                       throws java.io.IOException</pre>
<div class="block">Upgrades the shard to the current version of Lucene and returns the minimum segment version</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="minimumCompatibleVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>minimumCompatibleVersion</h4>
<pre class="methodSignature">public&nbsp;org.apache.lucene.util.Version&nbsp;minimumCompatibleVersion()</pre>
</li>
</ul>
<a id="acquireLastIndexCommit(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireLastIndexCommit</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.IndexCommitRef.html" title="org.elasticsearch.index.engine中的类">Engine.IndexCommitRef</a>&nbsp;acquireLastIndexCommit&#8203;(boolean&nbsp;flushFirst)
                                             throws <a href="../engine/EngineException.html" title="org.elasticsearch.index.engine中的类">EngineException</a></pre>
<div class="block">Creates a new <code>IndexCommit</code> snapshot from the currently running engine. All resources referenced by this
 commit won't be freed until the commit / snapshot is closed.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>flushFirst</code> - <code>true</code> if the index should first be flushed to disk / a low level lucene commit should be executed</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="../engine/EngineException.html" title="org.elasticsearch.index.engine中的类">EngineException</a></code></dd>
</dl>
</li>
</ul>
<a id="snapshotStoreMetadata()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>snapshotStoreMetadata</h4>
<pre class="methodSignature">public&nbsp;<a href="../store/Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类">Store.MetadataSnapshot</a>&nbsp;snapshotStoreMetadata()
                                             throws java.io.IOException</pre>
<div class="block">gets a <a href="../store/Store.MetadataSnapshot.html" title="org.elasticsearch.index.store中的类"><code>Store.MetadataSnapshot</code></a> for the current directory. This method is safe to call in all lifecycle of the index shard,
 without having to worry about the current state of the engine and concurrent flushes.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>org.apache.lucene.index.IndexNotFoundException</code> - if no index is found in the current directory</dd>
<dd><code>org.apache.lucene.index.CorruptIndexException</code> - if the lucene index is corrupted. This can be caused by a checksum
                                                            mismatch or an unexpected exception when opening the index reading the
                                                            segments file.</dd>
<dd><code>org.apache.lucene.index.IndexFormatTooOldException</code> - if the lucene index is too old to be opened.</dd>
<dd><code>org.apache.lucene.index.IndexFormatTooNewException</code> - if the lucene index is too new to be opened.</dd>
<dd><code>java.io.FileNotFoundException</code> - if one or more files referenced by a commit are not present.</dd>
<dd><code>java.nio.file.NoSuchFileException</code> - if one or more files referenced by a commit are not present.</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="failShard(java.lang.String,java.lang.Exception)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>failShard</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;failShard&#8203;(java.lang.String&nbsp;reason,
                      <a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-x-content/6.8.4.5-SNAPSHOT/org/elasticsearch/common/Nullable.html?is-external=true" title="org.elasticsearch.common中的类或接口" class="externalLink">@Nullable</a>
                      java.lang.Exception&nbsp;e)</pre>
<div class="block">Fails the shard and marks the shard store as corrupted if
 <code>e</code> is caused by index corruption</div>
</li>
</ul>
<a id="acquireSearcher(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireSearcher</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.Searcher.html" title="org.elasticsearch.index.engine中的类">Engine.Searcher</a>&nbsp;acquireSearcher&#8203;(java.lang.String&nbsp;source)</pre>
</li>
</ul>
<a id="close(java.lang.String,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close&#8203;(java.lang.String&nbsp;reason,
                  boolean&nbsp;flushEngine)
           throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="postRecovery(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postRecovery</h4>
<pre class="methodSignature">public&nbsp;<a href="IndexShard.html" title="org.elasticsearch.index.shard中的类">IndexShard</a>&nbsp;postRecovery&#8203;(java.lang.String&nbsp;reason)
                        throws <a href="IndexShardStartedException.html" title="org.elasticsearch.index.shard中的类">IndexShardStartedException</a>,
                               <a href="IndexShardRelocatedException.html" title="org.elasticsearch.index.shard中的类">IndexShardRelocatedException</a>,
                               <a href="IndexShardClosedException.html" title="org.elasticsearch.index.shard中的类">IndexShardClosedException</a></pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="IndexShardStartedException.html" title="org.elasticsearch.index.shard中的类">IndexShardStartedException</a></code></dd>
<dd><code><a href="IndexShardRelocatedException.html" title="org.elasticsearch.index.shard中的类">IndexShardRelocatedException</a></code></dd>
<dd><code><a href="IndexShardClosedException.html" title="org.elasticsearch.index.shard中的类">IndexShardClosedException</a></code></dd>
</dl>
</li>
</ul>
<a id="prepareForIndexRecovery()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareForIndexRecovery</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;prepareForIndexRecovery()</pre>
<div class="block">called before starting to copy index files over</div>
</li>
</ul>
<a id="trimOperationOfPreviousPrimaryTerms(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trimOperationOfPreviousPrimaryTerms</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;trimOperationOfPreviousPrimaryTerms&#8203;(long&nbsp;aboveSeqNo)</pre>
</li>
</ul>
<a id="getMaxSeenAutoIdTimestamp()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSeenAutoIdTimestamp</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getMaxSeenAutoIdTimestamp()</pre>
<div class="block">Returns the maximum auto_id_timestamp of all append-only requests have been processed by this shard or the auto_id_timestamp received
 from the primary via <a href="#updateMaxUnsafeAutoIdTimestamp(long)"><code>updateMaxUnsafeAutoIdTimestamp(long)</code></a> at the beginning of a peer-recovery or a primary-replica resync.</div>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="#updateMaxUnsafeAutoIdTimestamp(long)"><code>updateMaxUnsafeAutoIdTimestamp(long)</code></a></dd>
</dl>
</li>
</ul>
<a id="updateMaxUnsafeAutoIdTimestamp(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateMaxUnsafeAutoIdTimestamp</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;updateMaxUnsafeAutoIdTimestamp&#8203;(long&nbsp;maxSeenAutoIdTimestampFromPrimary)</pre>
<div class="block">Since operations stored in soft-deletes do not have max_auto_id_timestamp, the primary has to propagate its max_auto_id_timestamp
 (via <a href="#getMaxSeenAutoIdTimestamp()"><code>getMaxSeenAutoIdTimestamp()</code></a> of all processed append-only requests to replicas at the beginning of a peer-recovery
 or a primary-replica resync to force a replica to disable optimization for all append-only requests which are replicated via
 replication while its retry variants are replicated via recovery without auto_id_timestamp.
 <p>
 Without this force-update, a replica can generate duplicate documents (for the same id) if it first receives
 a retry append-only (without timestamp) via recovery, then an original append-only (with timestamp) via replication.</div>
</li>
</ul>
<a id="applyTranslogOperation(org.elasticsearch.index.translog.Translog.Operation,org.elasticsearch.index.engine.Engine.Operation.Origin)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyTranslogOperation</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.Result.html" title="org.elasticsearch.index.engine中的类">Engine.Result</a>&nbsp;applyTranslogOperation&#8203;(<a href="../translog/Translog.Operation.html" title="org.elasticsearch.index.translog中的接口">Translog.Operation</a>&nbsp;operation,
                                            <a href="../engine/Engine.Operation.Origin.html" title="org.elasticsearch.index.engine中的枚举">Engine.Operation.Origin</a>&nbsp;origin)
                                     throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="openEngineAndRecoverFromTranslog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openEngineAndRecoverFromTranslog</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;openEngineAndRecoverFromTranslog()
                                      throws java.io.IOException</pre>
<div class="block">opens the engine on top of the existing lucene engine and translog.
 Operations from the translog will be replayed to bring lucene up to date.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="openEngineAndSkipTranslogRecovery()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openEngineAndSkipTranslogRecovery</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;openEngineAndSkipTranslogRecovery()
                                       throws java.io.IOException</pre>
<div class="block">Opens the engine on top of the existing lucene engine and translog.
 The translog is kept but its operations won't be replayed.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="onNewEngine(org.elasticsearch.index.engine.Engine)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onNewEngine</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;onNewEngine&#8203;(<a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a>&nbsp;newEngine)</pre>
</li>
</ul>
<a id="performRecoveryRestart()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>performRecoveryRestart</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;performRecoveryRestart()
                            throws java.io.IOException</pre>
<div class="block">called if recovery has to be restarted after network error / delay **</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="recoveryStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoveryStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../recovery/RecoveryStats.html" title="org.elasticsearch.index.recovery中的类">RecoveryStats</a>&nbsp;recoveryStats()</pre>
<div class="block">returns stats about ongoing recoveries, both source and target</div>
</li>
</ul>
<a id="recoveryState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoveryState</h4>
<pre class="methodSignature">public&nbsp;<a href="../../indices/recovery/RecoveryState.html" title="org.elasticsearch.indices.recovery中的类">RecoveryState</a>&nbsp;recoveryState()</pre>
<div class="block">Returns the current <a href="../../indices/recovery/RecoveryState.html" title="org.elasticsearch.indices.recovery中的类"><code>RecoveryState</code></a> if this shard is recovering or has been recovering.
 Returns null if the recovery has not yet started or shard was not recovered (created via an API).</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html#recoveryState()">recoveryState</a></code>&nbsp;在接口中&nbsp;<code><a href="../../indices/cluster/IndicesClusterStateService.Shard.html" title="org.elasticsearch.indices.cluster中的接口">IndicesClusterStateService.Shard</a></code></dd>
</dl>
</li>
</ul>
<a id="finalizeRecovery()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeRecovery</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;finalizeRecovery()</pre>
<div class="block">perform the last stages of recovery once all translog operations are done.
 note that you should still call <a href="#postRecovery(java.lang.String)"><code>postRecovery(String)</code></a>.</div>
</li>
</ul>
<a id="ignoreRecoveryAttempt()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ignoreRecoveryAttempt</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;ignoreRecoveryAttempt()</pre>
<div class="block">Returns <code>true</code> if this shard can ignore a recovery attempt made to it (since the already doing/done it)</div>
</li>
</ul>
<a id="readAllowed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readAllowed</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;readAllowed()
                 throws <a href="IllegalIndexShardStateException.html" title="org.elasticsearch.index.shard中的类">IllegalIndexShardStateException</a></pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="IllegalIndexShardStateException.html" title="org.elasticsearch.index.shard中的类">IllegalIndexShardStateException</a></code></dd>
</dl>
</li>
</ul>
<a id="isReadAllowed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isReadAllowed</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isReadAllowed()</pre>
<div class="block">returns true if the <a href="IndexShardState.html" title="org.elasticsearch.index.shard中的枚举"><code>IndexShardState</code></a> allows reading</div>
</li>
</ul>
<a id="verifyActive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyActive</h4>
<pre class="methodSignature">protected final&nbsp;void&nbsp;verifyActive()
                           throws <a href="IllegalIndexShardStateException.html" title="org.elasticsearch.index.shard中的类">IllegalIndexShardStateException</a></pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="IllegalIndexShardStateException.html" title="org.elasticsearch.index.shard中的类">IllegalIndexShardStateException</a></code></dd>
</dl>
</li>
</ul>
<a id="getIndexBufferRAMBytesUsed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexBufferRAMBytesUsed</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getIndexBufferRAMBytesUsed()</pre>
<div class="block">Returns number of heap bytes used by the indexing buffer for this shard, or 0 if the shard is closed</div>
</li>
</ul>
<a id="addShardFailureCallback(java.util.function.Consumer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addShardFailureCallback</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addShardFailureCallback&#8203;(java.util.function.Consumer&lt;<a href="IndexShard.ShardFailure.html" title="org.elasticsearch.index.shard中的类">IndexShard.ShardFailure</a>&gt;&nbsp;onShardFailure)</pre>
</li>
</ul>
<a id="checkIdle(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkIdle</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;checkIdle&#8203;(long&nbsp;inactiveTimeNS)</pre>
<div class="block">Called by <a href="../../indices/IndexingMemoryController.html" title="org.elasticsearch.indices中的类"><code>IndexingMemoryController</code></a> to check whether more than <code>inactiveTimeNS</code> has passed since the last
 indexing operation, and notify listeners that we are now inactive so e.g. sync'd flush can happen.</div>
</li>
</ul>
<a id="isActive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isActive</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isActive()</pre>
</li>
</ul>
<a id="shardPath()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shardPath</h4>
<pre class="methodSignature">public&nbsp;<a href="ShardPath.html" title="org.elasticsearch.index.shard中的类">ShardPath</a>&nbsp;shardPath()</pre>
</li>
</ul>
<a id="recoverFromLocalShards(java.util.function.BiConsumer,java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverFromLocalShards</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;recoverFromLocalShards&#8203;(java.util.function.BiConsumer&lt;java.lang.String,&#8203;<a href="../../cluster/metadata/MappingMetaData.html" title="org.elasticsearch.cluster.metadata中的类">MappingMetaData</a>&gt;&nbsp;mappingUpdateConsumer,
                                      java.util.List&lt;<a href="IndexShard.html" title="org.elasticsearch.index.shard中的类">IndexShard</a>&gt;&nbsp;localShards)
                               throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="recoverFromStore()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverFromStore</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;recoverFromStore()</pre>
</li>
</ul>
<a id="restoreFromRepository(org.elasticsearch.repositories.Repository)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreFromRepository</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;restoreFromRepository&#8203;(<a href="../../repositories/Repository.html" title="org.elasticsearch.repositories中的接口">Repository</a>&nbsp;repository)</pre>
</li>
</ul>
<a id="onSettingsChanged()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onSettingsChanged</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;onSettingsChanged()</pre>
</li>
</ul>
<a id="acquireRetentionLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireRetentionLock</h4>
<pre class="methodSignature">public&nbsp;java.io.Closeable&nbsp;acquireRetentionLock()</pre>
<div class="block">Acquires a lock on the translog files and Lucene soft-deleted documents to prevent them from being trimmed</div>
</li>
</ul>
<a id="estimateNumberOfHistoryOperations(java.lang.String,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimateNumberOfHistoryOperations</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;estimateNumberOfHistoryOperations&#8203;(java.lang.String&nbsp;source,
                                             long&nbsp;startingSeqNo)
                                      throws java.io.IOException</pre>
<div class="block">Returns the estimated number of history operations whose seq# at least the provided seq# in this shard.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getHistoryOperations(java.lang.String,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHistoryOperations</h4>
<pre class="methodSignature">public&nbsp;<a href="../translog/Translog.Snapshot.html" title="org.elasticsearch.index.translog中的接口">Translog.Snapshot</a>&nbsp;getHistoryOperations&#8203;(java.lang.String&nbsp;source,
                                              long&nbsp;startingSeqNo)
                                       throws java.io.IOException</pre>
<div class="block">Creates a new history snapshot for reading operations since the provided starting seqno (inclusive).
 The returned snapshot can be retrieved from either Lucene index or translog files.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="hasCompleteHistoryOperations(java.lang.String,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasCompleteHistoryOperations</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;hasCompleteHistoryOperations&#8203;(java.lang.String&nbsp;source,
                                            long&nbsp;startingSeqNo)
                                     throws java.io.IOException</pre>
<div class="block">Checks if we have a completed history of operations since the given starting seqno (inclusive).
 This method should be called after acquiring the retention lock; See <a href="#acquireRetentionLock()"><code>acquireRetentionLock()</code></a></div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getMinRetainedSeqNo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMinRetainedSeqNo</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getMinRetainedSeqNo()</pre>
<div class="block">Gets the minimum retained sequence number for this engine.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the minimum retained sequence number</dd>
</dl>
</li>
</ul>
<a id="newChangesSnapshot(java.lang.String,long,long,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newChangesSnapshot</h4>
<pre class="methodSignature">public&nbsp;<a href="../translog/Translog.Snapshot.html" title="org.elasticsearch.index.translog中的接口">Translog.Snapshot</a>&nbsp;newChangesSnapshot&#8203;(java.lang.String&nbsp;source,
                                            long&nbsp;fromSeqNo,
                                            long&nbsp;toSeqNo,
                                            boolean&nbsp;requiredFullRange)
                                     throws java.io.IOException</pre>
<div class="block">Creates a new changes snapshot for reading operations whose seq_no are between <code>fromSeqNo</code>(inclusive)
 and <code>toSeqNo</code>(inclusive). The caller has to close the returned snapshot after finishing the reading.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>source</code> - the source of the request</dd>
<dd><code>fromSeqNo</code> - the from seq_no (inclusive) to read</dd>
<dd><code>toSeqNo</code> - the to seq_no (inclusive) to read</dd>
<dd><code>requiredFullRange</code> - if <code>true</code> then <a href="../translog/Translog.Snapshot.html#next()"><code>Translog.Snapshot.next()</code></a> will throw <code>IllegalStateException</code>
                          if any operation between <code>fromSeqNo</code> and <code>toSeqNo</code> is missing.
                          This parameter should be only enabled when the entire requesting range is below the global checkpoint.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="segments(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>segments</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="../engine/Segment.html" title="org.elasticsearch.index.engine中的类">Segment</a>&gt;&nbsp;segments&#8203;(boolean&nbsp;verbose)</pre>
</li>
</ul>
<a id="flushAndCloseEngine()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flushAndCloseEngine</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;flushAndCloseEngine()
                         throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getHistoryUUID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHistoryUUID</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;getHistoryUUID()</pre>
</li>
</ul>
<a id="getIndexEventListener()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexEventListener</h4>
<pre class="methodSignature">public&nbsp;<a href="IndexEventListener.html" title="org.elasticsearch.index.shard中的接口">IndexEventListener</a>&nbsp;getIndexEventListener()</pre>
</li>
</ul>
<a id="activateThrottling()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>activateThrottling</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;activateThrottling()</pre>
</li>
</ul>
<a id="deactivateThrottling()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deactivateThrottling</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;deactivateThrottling()</pre>
</li>
</ul>
<a id="writeIndexingBuffer()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeIndexingBuffer</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;writeIndexingBuffer()</pre>
<div class="block">Called when our shard is using too much heap and should move buffered indexed/deleted documents to disk.</div>
</li>
</ul>
<a id="updateLocalCheckpointForShard(java.lang.String,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateLocalCheckpointForShard</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;updateLocalCheckpointForShard&#8203;(java.lang.String&nbsp;allocationId,
                                          long&nbsp;checkpoint)</pre>
<div class="block">Notifies the service to update the local checkpoint for the shard with the provided allocation ID. See
 <a href="../seqno/ReplicationTracker.html#updateLocalCheckpoint(java.lang.String,long)"><code>ReplicationTracker.updateLocalCheckpoint(String, long)</code></a> for
 details.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>allocationId</code> - the allocation ID of the shard to update the local checkpoint for</dd>
<dd><code>checkpoint</code> - the local checkpoint for the shard</dd>
</dl>
</li>
</ul>
<a id="updateGlobalCheckpointForShard(java.lang.String,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateGlobalCheckpointForShard</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;updateGlobalCheckpointForShard&#8203;(java.lang.String&nbsp;allocationId,
                                           long&nbsp;globalCheckpoint)</pre>
<div class="block">Update the local knowledge of the global checkpoint for the specified allocation ID.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>allocationId</code> - the allocation ID to update the global checkpoint for</dd>
<dd><code>globalCheckpoint</code> - the global checkpoint</dd>
</dl>
</li>
</ul>
<a id="addGlobalCheckpointListener(long,org.elasticsearch.index.shard.GlobalCheckpointListeners.GlobalCheckpointListener,org.elasticsearch.common.unit.TimeValue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addGlobalCheckpointListener</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addGlobalCheckpointListener&#8203;(long&nbsp;waitingForGlobalCheckpoint,
                                        <a href="GlobalCheckpointListeners.GlobalCheckpointListener.html" title="org.elasticsearch.index.shard中的接口">GlobalCheckpointListeners.GlobalCheckpointListener</a>&nbsp;listener,
                                        <a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-core/6.8.4.5-SNAPSHOT/org/elasticsearch/common/unit/TimeValue.html?is-external=true" title="org.elasticsearch.common.unit中的类或接口" class="externalLink">TimeValue</a>&nbsp;timeout)</pre>
<div class="block">Add a global checkpoint listener. If the global checkpoint is equal to or above the global checkpoint the listener is waiting for,
 then the listener will be notified immediately via an executor (so possibly not on the current thread). If the specified timeout
 elapses before the listener is notified, the listener will be notified with an <code>TimeoutException</code>. A caller may pass null to
 specify no timeout.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>waitingForGlobalCheckpoint</code> - the global checkpoint the listener is waiting for</dd>
<dd><code>listener</code> - the listener</dd>
<dd><code>timeout</code> - the timeout</dd>
</dl>
</li>
</ul>
<a id="getRetentionLeases()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRetentionLeases</h4>
<pre class="methodSignature">public&nbsp;<a href="../seqno/RetentionLeases.html" title="org.elasticsearch.index.seqno中的类">RetentionLeases</a>&nbsp;getRetentionLeases()</pre>
<div class="block">Get all retention leases tracked on this shard.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the retention leases</dd>
</dl>
</li>
</ul>
<a id="getRetentionLeases(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRetentionLeases</h4>
<pre class="methodSignature">public&nbsp;<a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-core/6.8.4.5-SNAPSHOT/org/elasticsearch/common/collect/Tuple.html?is-external=true" title="org.elasticsearch.common.collect中的类或接口" class="externalLink">Tuple</a>&lt;java.lang.Boolean,&#8203;<a href="../seqno/RetentionLeases.html" title="org.elasticsearch.index.seqno中的类">RetentionLeases</a>&gt;&nbsp;getRetentionLeases&#8203;(boolean&nbsp;expireLeases)</pre>
<div class="block">If the expire leases parameter is false, gets all retention leases tracked on this shard and otherwise first calculates
 expiration of existing retention leases, and then gets all non-expired retention leases tracked on this shard. Note that only the
 primary shard calculates which leases are expired, and if any have expired, syncs the retention leases to any replicas. If the
 expire leases parameter is true, this replication tracker must be in primary mode.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>a tuple indicating whether or not any retention leases were expired, and the non-expired retention leases</dd>
</dl>
</li>
</ul>
<a id="getRetentionLeaseStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRetentionLeaseStats</h4>
<pre class="methodSignature">public&nbsp;<a href="../seqno/RetentionLeaseStats.html" title="org.elasticsearch.index.seqno中的类">RetentionLeaseStats</a>&nbsp;getRetentionLeaseStats()</pre>
</li>
</ul>
<a id="addRetentionLease(java.lang.String,long,java.lang.String,org.elasticsearch.action.ActionListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addRetentionLease</h4>
<pre class="methodSignature">public&nbsp;<a href="../seqno/RetentionLease.html" title="org.elasticsearch.index.seqno中的类">RetentionLease</a>&nbsp;addRetentionLease&#8203;(java.lang.String&nbsp;id,
                                        long&nbsp;retainingSequenceNumber,
                                        java.lang.String&nbsp;source,
                                        <a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../action/support/replication/ReplicationResponse.html" title="org.elasticsearch.action.support.replication中的类">ReplicationResponse</a>&gt;&nbsp;listener)</pre>
<div class="block">Adds a new retention lease.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>id</code> - the identifier of the retention lease</dd>
<dd><code>retainingSequenceNumber</code> - the retaining sequence number</dd>
<dd><code>source</code> - the source of the retention lease</dd>
<dd><code>listener</code> - the callback when the retention lease is successfully added and synced to replicas</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the new retention lease</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if the specified retention lease already exists</dd>
</dl>
</li>
</ul>
<a id="renewRetentionLease(java.lang.String,long,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>renewRetentionLease</h4>
<pre class="methodSignature">public&nbsp;<a href="../seqno/RetentionLease.html" title="org.elasticsearch.index.seqno中的类">RetentionLease</a>&nbsp;renewRetentionLease&#8203;(java.lang.String&nbsp;id,
                                          long&nbsp;retainingSequenceNumber,
                                          java.lang.String&nbsp;source)</pre>
<div class="block">Renews an existing retention lease.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>id</code> - the identifier of the retention lease</dd>
<dd><code>retainingSequenceNumber</code> - the retaining sequence number</dd>
<dd><code>source</code> - the source of the retention lease</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the renewed retention lease</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if the specified retention lease does not exist</dd>
</dl>
</li>
</ul>
<a id="removeRetentionLease(java.lang.String,org.elasticsearch.action.ActionListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeRetentionLease</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;removeRetentionLease&#8203;(java.lang.String&nbsp;id,
                                 <a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../action/support/replication/ReplicationResponse.html" title="org.elasticsearch.action.support.replication中的类">ReplicationResponse</a>&gt;&nbsp;listener)</pre>
<div class="block">Removes an existing retention lease.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>id</code> - the identifier of the retention lease</dd>
<dd><code>listener</code> - the callback when the retention lease is successfully removed and synced to replicas</dd>
</dl>
</li>
</ul>
<a id="updateRetentionLeasesOnReplica(org.elasticsearch.index.seqno.RetentionLeases)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateRetentionLeasesOnReplica</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;updateRetentionLeasesOnReplica&#8203;(<a href="../seqno/RetentionLeases.html" title="org.elasticsearch.index.seqno中的类">RetentionLeases</a>&nbsp;retentionLeases)</pre>
<div class="block">Updates retention leases on a replica.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>retentionLeases</code> - the retention leases</dd>
</dl>
</li>
</ul>
<a id="loadRetentionLeases()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadRetentionLeases</h4>
<pre class="methodSignature">public&nbsp;<a href="../seqno/RetentionLeases.html" title="org.elasticsearch.index.seqno中的类">RetentionLeases</a>&nbsp;loadRetentionLeases()
                                    throws java.io.IOException</pre>
<div class="block">Loads the latest retention leases from their dedicated state file.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the retention leases</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O exception occurs reading the retention leases</dd>
</dl>
</li>
</ul>
<a id="persistRetentionLeases()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>persistRetentionLeases</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;persistRetentionLeases()
                            throws java.io.IOException</pre>
<div class="block">Persists the current retention leases to their dedicated state file.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if an exception occurs writing the state file</dd>
</dl>
</li>
</ul>
<a id="syncRetentionLeases()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>syncRetentionLeases</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;syncRetentionLeases()</pre>
<div class="block">Syncs the current retention leases to all replicas.</div>
</li>
</ul>
<a id="initiateTracking(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initiateTracking</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;initiateTracking&#8203;(java.lang.String&nbsp;allocationId)</pre>
<div class="block">Called when the recovery process for a shard has opened the engine on the target shard. Ensures that the right data structures
 have been set up locally to track local checkpoint information for the shard and that the shard is added to the replication group.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>allocationId</code> - the allocation ID of the shard for which recovery was initiated</dd>
</dl>
</li>
</ul>
<a id="markAllocationIdAsInSync(java.lang.String,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markAllocationIdAsInSync</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;markAllocationIdAsInSync&#8203;(java.lang.String&nbsp;allocationId,
                                     long&nbsp;localCheckpoint)
                              throws java.lang.InterruptedException</pre>
<div class="block">Marks the shard with the provided allocation ID as in-sync with the primary shard. See
 <a href="../seqno/ReplicationTracker.html#markAllocationIdAsInSync(java.lang.String,long)"><code>ReplicationTracker.markAllocationIdAsInSync(String, long)</code></a>
 for additional details.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>allocationId</code> - the allocation ID of the shard to mark as in-sync</dd>
<dd><code>localCheckpoint</code> - the current local checkpoint on the shard</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.InterruptedException</code></dd>
</dl>
</li>
</ul>
<a id="getLocalCheckpoint()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocalCheckpoint</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getLocalCheckpoint()</pre>
<div class="block">Returns the local checkpoint for the shard.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the local checkpoint</dd>
</dl>
</li>
</ul>
<a id="getGlobalCheckpoint()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGlobalCheckpoint</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getGlobalCheckpoint()</pre>
<div class="block">Returns the global checkpoint for the shard.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the global checkpoint</dd>
</dl>
</li>
</ul>
<a id="getLastSyncedGlobalCheckpoint()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastSyncedGlobalCheckpoint</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getLastSyncedGlobalCheckpoint()</pre>
<div class="block">Returns the latest global checkpoint value that has been persisted in the underlying storage (i.e. translog's checkpoint)</div>
</li>
</ul>
<a id="maybeSyncGlobalCheckpoint(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maybeSyncGlobalCheckpoint</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;maybeSyncGlobalCheckpoint&#8203;(java.lang.String&nbsp;reason)</pre>
<div class="block">Syncs the global checkpoint to the replicas if the global checkpoint on at least one replica is behind the global checkpoint on the
 primary.</div>
</li>
</ul>
<a id="getReplicationGroup()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicationGroup</h4>
<pre class="methodSignature">public&nbsp;<a href="ReplicationGroup.html" title="org.elasticsearch.index.shard中的类">ReplicationGroup</a>&nbsp;getReplicationGroup()</pre>
<div class="block">Returns the current replication group for the shard.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the replication group</dd>
</dl>
</li>
</ul>
<a id="updateGlobalCheckpointOnReplica(long,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateGlobalCheckpointOnReplica</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;updateGlobalCheckpointOnReplica&#8203;(long&nbsp;globalCheckpoint,
                                            java.lang.String&nbsp;reason)</pre>
<div class="block">Updates the global checkpoint on a replica shard after it has been updated by the primary.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>globalCheckpoint</code> - the global checkpoint</dd>
<dd><code>reason</code> - the reason the global checkpoint was updated</dd>
</dl>
</li>
</ul>
<a id="activateWithPrimaryContext(org.elasticsearch.index.seqno.ReplicationTracker.PrimaryContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>activateWithPrimaryContext</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;activateWithPrimaryContext&#8203;(<a href="../seqno/ReplicationTracker.PrimaryContext.html" title="org.elasticsearch.index.seqno中的类">ReplicationTracker.PrimaryContext</a>&nbsp;primaryContext)</pre>
<div class="block">Updates the known allocation IDs and the local checkpoints for the corresponding allocations from a primary relocation source.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>primaryContext</code> - the sequence number context</dd>
</dl>
</li>
</ul>
<a id="pendingInSync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pendingInSync</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;pendingInSync()</pre>
<div class="block">Check if there are any recoveries pending in-sync.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd><code>true</code> if there is at least one shard pending in-sync, otherwise false</dd>
</dl>
</li>
</ul>
<a id="noopUpdate(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noopUpdate</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;noopUpdate&#8203;(java.lang.String&nbsp;type)</pre>
<div class="block">Should be called for each no-op update operation to increment relevant statistics.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>type</code> - the doc type of the update</dd>
</dl>
</li>
</ul>
<a id="getEngine()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEngine</h4>
<pre class="methodSignature">public&nbsp;<a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a>&nbsp;getEngine()</pre>
</li>
</ul>
<a id="getEngineOrNull()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEngineOrNull</h4>
<pre class="methodSignature">protected&nbsp;<a href="../engine/Engine.html" title="org.elasticsearch.index.engine中的类">Engine</a>&nbsp;getEngineOrNull()</pre>
<div class="block">NOTE: returns null if engine is not yet started (e.g. recovery phase 1, copying over index files, is still running), or if engine is
 closed.</div>
</li>
</ul>
<a id="startRecovery(org.elasticsearch.indices.recovery.RecoveryState,org.elasticsearch.indices.recovery.PeerRecoveryTargetService.RecoveryListener,java.util.function.BiConsumer,org.elasticsearch.indices.IndicesService)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startRecovery</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;startRecovery&#8203;(<a href="../../indices/recovery/RecoveryState.html" title="org.elasticsearch.indices.recovery中的类">RecoveryState</a>&nbsp;recoveryState,
                          <a href="../../indices/recovery/PeerRecoveryTargetService.RecoveryListener.html" title="org.elasticsearch.indices.recovery中的接口">PeerRecoveryTargetService.RecoveryListener</a>&nbsp;recoveryListener,
                          java.util.function.BiConsumer&lt;java.lang.String,&#8203;<a href="../../cluster/metadata/MappingMetaData.html" title="org.elasticsearch.cluster.metadata中的类">MappingMetaData</a>&gt;&nbsp;mappingUpdateConsumer,
                          <a href="../../indices/IndicesService.html" title="org.elasticsearch.indices中的类">IndicesService</a>&nbsp;indicesService)</pre>
</li>
</ul>
<a id="isRelocatedPrimary()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isRelocatedPrimary</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isRelocatedPrimary()</pre>
<div class="block">Returns whether the shard is a relocated primary, i.e. not in charge anymore of replicating changes (see <a href="../seqno/ReplicationTracker.html" title="org.elasticsearch.index.seqno中的类"><code>ReplicationTracker</code></a>).</div>
</li>
</ul>
<a id="docMapper(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>docMapper</h4>
<pre class="methodSignature">public&nbsp;<a href="../mapper/DocumentMapperForType.html" title="org.elasticsearch.index.mapper中的类">DocumentMapperForType</a>&nbsp;docMapper&#8203;(java.lang.String&nbsp;type)</pre>
</li>
</ul>
<a id="acquirePrimaryOperationPermit(org.elasticsearch.action.ActionListener,java.lang.String,java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquirePrimaryOperationPermit</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;acquirePrimaryOperationPermit&#8203;(<a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../common/lease/Releasable.html" title="org.elasticsearch.common.lease中的接口">Releasable</a>&gt;&nbsp;onPermitAcquired,
                                          java.lang.String&nbsp;executorOnDelay,
                                          java.lang.Object&nbsp;debugInfo)</pre>
<div class="block">Acquire a primary operation permit whenever the shard is ready for indexing. If a permit is directly available, the provided
 ActionListener will be called on the calling thread. During relocation hand-off, permit acquisition can be delayed. The provided
 ActionListener will then be called using the provided executor.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>debugInfo</code> - an extra information that can be useful when tracing an unreleased permit. When assertions are enabled
                  the tracing will capture the supplied object's <code>Object.toString()</code> value. Otherwise the object
                  isn't used</dd>
</dl>
</li>
</ul>
<a id="acquireAllPrimaryOperationsPermits(org.elasticsearch.action.ActionListener,org.elasticsearch.common.unit.TimeValue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireAllPrimaryOperationsPermits</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;acquireAllPrimaryOperationsPermits&#8203;(<a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../common/lease/Releasable.html" title="org.elasticsearch.common.lease中的接口">Releasable</a>&gt;&nbsp;onPermitAcquired,
                                               <a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-core/6.8.4.5-SNAPSHOT/org/elasticsearch/common/unit/TimeValue.html?is-external=true" title="org.elasticsearch.common.unit中的类或接口" class="externalLink">TimeValue</a>&nbsp;timeout)</pre>
<div class="block">Acquire all primary operation permits. Once all permits are acquired, the provided ActionListener is called.
 It is the responsibility of the caller to close the <a href="../../common/lease/Releasable.html" title="org.elasticsearch.common.lease中的接口"><code>Releasable</code></a>.</div>
</li>
</ul>
<a id="runUnderPrimaryPermit(java.lang.Runnable,java.util.function.Consumer,java.lang.String,java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runUnderPrimaryPermit</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;runUnderPrimaryPermit&#8203;(java.lang.Runnable&nbsp;runnable,
                                  java.util.function.Consumer&lt;java.lang.Exception&gt;&nbsp;onFailure,
                                  java.lang.String&nbsp;executorOnDelay,
                                  java.lang.Object&nbsp;debugInfo)</pre>
<div class="block">Runs the specified runnable under a permit and otherwise calling back the specified failure callback. This method is really a
 convenience for <a href="#acquirePrimaryOperationPermit(org.elasticsearch.action.ActionListener,java.lang.String,java.lang.Object)"><code>acquirePrimaryOperationPermit(ActionListener, String, Object)</code></a> where the listener equates to
 try-with-resources closing the releasable after executing the runnable on successfully acquiring the permit, an otherwise calling
 back the failure callback.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>runnable</code> - the runnable to execute under permit</dd>
<dd><code>onFailure</code> - the callback on failure</dd>
<dd><code>executorOnDelay</code> - the executor to execute the runnable on if permit acquisition is blocked</dd>
<dd><code>debugInfo</code> - debug info</dd>
</dl>
</li>
</ul>
<a id="acquireReplicaOperationPermit(long,long,long,org.elasticsearch.action.ActionListener,java.lang.String,java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireReplicaOperationPermit</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;acquireReplicaOperationPermit&#8203;(long&nbsp;opPrimaryTerm,
                                          long&nbsp;globalCheckpoint,
                                          long&nbsp;maxSeqNoOfUpdatesOrDeletes,
                                          <a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../common/lease/Releasable.html" title="org.elasticsearch.common.lease中的接口">Releasable</a>&gt;&nbsp;onPermitAcquired,
                                          java.lang.String&nbsp;executorOnDelay,
                                          java.lang.Object&nbsp;debugInfo)</pre>
<div class="block">Acquire a replica operation permit whenever the shard is ready for indexing (see
 <a href="#acquirePrimaryOperationPermit(org.elasticsearch.action.ActionListener,java.lang.String,java.lang.Object)"><code>acquirePrimaryOperationPermit(ActionListener, String, Object)</code></a>). If the given primary term is lower than then one in
 <a href="#shardRouting"><code>shardRouting</code></a>, the <a href="../../action/ActionListener.html#onFailure(java.lang.Exception)"><code>ActionListener.onFailure(Exception)</code></a> method of the provided listener is invoked with an
 <code>IllegalStateException</code>. If permit acquisition is delayed, the listener will be invoked on the executor with the specified
 name.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>opPrimaryTerm</code> - the operation primary term</dd>
<dd><code>globalCheckpoint</code> - the global checkpoint associated with the request</dd>
<dd><code>maxSeqNoOfUpdatesOrDeletes</code> - the max seq_no of updates (index operations overwrite Lucene) or deletes captured on the primary
                                   after this replication request was executed on it (see <a href="#getMaxSeqNoOfUpdatesOrDeletes()"><code>getMaxSeqNoOfUpdatesOrDeletes()</code></a></dd>
<dd><code>onPermitAcquired</code> - the listener for permit acquisition</dd>
<dd><code>executorOnDelay</code> - the name of the executor to invoke the listener on if permit acquisition is delayed</dd>
<dd><code>debugInfo</code> - an extra information that can be useful when tracing an unreleased permit. When assertions are
                                   enabled the tracing will capture the supplied object's <code>Object.toString()</code> value.
                                   Otherwise the object isn't used</dd>
</dl>
</li>
</ul>
<a id="acquireAllReplicaOperationsPermits(long,long,long,org.elasticsearch.action.ActionListener,org.elasticsearch.common.unit.TimeValue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireAllReplicaOperationsPermits</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;acquireAllReplicaOperationsPermits&#8203;(long&nbsp;opPrimaryTerm,
                                               long&nbsp;globalCheckpoint,
                                               long&nbsp;maxSeqNoOfUpdatesOrDeletes,
                                               <a href="../../action/ActionListener.html" title="org.elasticsearch.action中的接口">ActionListener</a>&lt;<a href="../../common/lease/Releasable.html" title="org.elasticsearch.common.lease中的接口">Releasable</a>&gt;&nbsp;onPermitAcquired,
                                               <a href="https://snapshots.elastic.co/javadoc/com/strapdata/elasticsearch/elasticsearch-core/6.8.4.5-SNAPSHOT/org/elasticsearch/common/unit/TimeValue.html?is-external=true" title="org.elasticsearch.common.unit中的类或接口" class="externalLink">TimeValue</a>&nbsp;timeout)</pre>
<div class="block">Acquire all replica operation permits whenever the shard is ready for indexing (see
 <a href="#acquireAllPrimaryOperationsPermits(org.elasticsearch.action.ActionListener,org.elasticsearch.common.unit.TimeValue)"><code>acquireAllPrimaryOperationsPermits(ActionListener, TimeValue)</code></a>. If the given primary term is lower than then one in
 <a href="#shardRouting"><code>shardRouting</code></a>, the <a href="../../action/ActionListener.html#onFailure(java.lang.Exception)"><code>ActionListener.onFailure(Exception)</code></a> method of the provided listener is invoked with an
 <code>IllegalStateException</code>.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>opPrimaryTerm</code> - the operation primary term</dd>
<dd><code>globalCheckpoint</code> - the global checkpoint associated with the request</dd>
<dd><code>maxSeqNoOfUpdatesOrDeletes</code> - the max seq_no of updates (index operations overwrite Lucene) or deletes captured on the primary
                                   after this replication request was executed on it (see <a href="#getMaxSeqNoOfUpdatesOrDeletes()"><code>getMaxSeqNoOfUpdatesOrDeletes()</code></a></dd>
<dd><code>onPermitAcquired</code> - the listener for permit acquisition</dd>
<dd><code>timeout</code> - the maximum time to wait for the in-flight operations block</dd>
</dl>
</li>
</ul>
<a id="getActiveOperationsCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActiveOperationsCount</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getActiveOperationsCount()</pre>
</li>
</ul>
<a id="getActiveOperations()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActiveOperations</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;java.lang.String&gt;&nbsp;getActiveOperations()</pre>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>a list of describing each permit that wasn't released yet. The description consist of the debugInfo supplied
         when the permit was acquired plus a stack traces that was captured when the permit was request.</dd>
</dl>
</li>
</ul>
<a id="sync(org.elasticsearch.index.translog.Translog.Location,java.util.function.Consumer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sync</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;sync&#8203;(<a href="../translog/Translog.Location.html" title="org.elasticsearch.index.translog中的类">Translog.Location</a>&nbsp;location,
                       java.util.function.Consumer&lt;java.lang.Exception&gt;&nbsp;syncListener)</pre>
<div class="block">Syncs the given location with the underlying storage unless already synced. This method might return immediately without
 actually fsyncing the location until the sync listener is called. Yet, unless there is already another thread fsyncing
 the transaction log the caller thread will be hijacked to run the fsync for all pending fsync operations.
 This method allows indexing threads to continue indexing without blocking on fsync calls. We ensure that there is only
 one thread blocking on the sync an all others can continue indexing.
 NOTE: if the syncListener throws an exception when it's processed the exception will only be logged. Users should make sure that the
 listener handles all exception cases internally.</div>
</li>
</ul>
<a id="sync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sync</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;sync()
          throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="isSyncNeeded()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isSyncNeeded</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isSyncNeeded()</pre>
<div class="block">Checks if the underlying storage sync is required.</div>
</li>
</ul>
<a id="getTranslogDurability()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTranslogDurability</h4>
<pre class="methodSignature">public&nbsp;<a href="../translog/Translog.Durability.html" title="org.elasticsearch.index.translog中的枚举">Translog.Durability</a>&nbsp;getTranslogDurability()</pre>
<div class="block">Returns the current translog durability mode</div>
</li>
</ul>
<a id="afterWriteOperation()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>afterWriteOperation</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;afterWriteOperation()</pre>
<div class="block">Schedules a flush or translog generation roll if needed but will not schedule more than one concurrently. The operation will be
 executed asynchronously on the flush thread pool.</div>
</li>
</ul>
<a id="isRefreshNeeded()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isRefreshNeeded</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isRefreshNeeded()</pre>
<div class="block">Returns <code>true</code> iff one or more changes to the engine are not visible to via the current searcher *or* there are pending
 refresh listeners.
 Otherwise <code>false</code>.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>org.apache.lucene.store.AlreadyClosedException</code> - if the engine or internal indexwriter in the engine is already closed</dd>
</dl>
</li>
</ul>
<a id="addRefreshListener(org.elasticsearch.index.translog.Translog.Location,java.util.function.Consumer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addRefreshListener</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addRefreshListener&#8203;(<a href="../translog/Translog.Location.html" title="org.elasticsearch.index.translog中的类">Translog.Location</a>&nbsp;location,
                               java.util.function.Consumer&lt;java.lang.Boolean&gt;&nbsp;listener)</pre>
<div class="block">Add a listener for refreshes.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>location</code> - the location to listen for</dd>
<dd><code>listener</code> - for the refresh. Called with true if registering the listener ran it out of slots and forced a refresh. Called with
        false otherwise.</dd>
</dl>
</li>
</ul>
<a id="getMaxSeqNoOfUpdatesOrDeletes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSeqNoOfUpdatesOrDeletes</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getMaxSeqNoOfUpdatesOrDeletes()</pre>
<div class="block">Returns the maximum sequence number of either update or delete operations have been processed in this shard
 or the sequence number from <a href="#advanceMaxSeqNoOfUpdatesOrDeletes(long)"><code>advanceMaxSeqNoOfUpdatesOrDeletes(long)</code></a>. An index request is considered
 as an update operation if it overwrites the existing documents in Lucene index with the same document id.
 <p>
 The primary captures this value after executes a replication request, then transfers it to a replica before
 executing that replication request on a replica.</div>
</li>
</ul>
<a id="advanceMaxSeqNoOfUpdatesOrDeletes(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>advanceMaxSeqNoOfUpdatesOrDeletes</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;advanceMaxSeqNoOfUpdatesOrDeletes&#8203;(long&nbsp;seqNo)</pre>
<div class="block">A replica calls this method to advance the max_seq_no_of_updates marker of its engine to at least the max_seq_no_of_updates
 value (piggybacked in a replication request) that it receives from its primary before executing that replication request.
 The receiving value is at least as high as the max_seq_no_of_updates on the primary was when any of the operations of that
 replication request were processed on it.
 <p>
 A replica shard also calls this method to bootstrap the max_seq_no_of_updates marker with the value that it received from
 the primary in peer-recovery, before it replays remote translog operations from the primary. The receiving value is at least
 as high as the max_seq_no_of_updates on the primary was when any of these operations were processed on it.
 <p>
 These transfers guarantee that every index/delete operation when executing on a replica engine will observe this marker a value
 which is at least the value of the max_seq_no_of_updates marker on the primary after that operation was executed on the primary.</div>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="#acquireReplicaOperationPermit(long,long,long,org.elasticsearch.action.ActionListener,java.lang.String,java.lang.Object)"><code>acquireReplicaOperationPermit(long, long, long, ActionListener, String, Object)</code></a>, 
<a href="../../indices/recovery/RecoveryTarget.html#indexTranslogOperations(java.util.List,int,long,long,org.elasticsearch.index.seqno.RetentionLeases,org.elasticsearch.action.ActionListener)"><code>RecoveryTarget.indexTranslogOperations(List, int, long, long, RetentionLeases, ActionListener)</code></a></dd>
</dl>
</li>
</ul>
<a id="verifyShardBeforeIndexClosing()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>verifyShardBeforeIndexClosing</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;verifyShardBeforeIndexClosing()
                                   throws java.lang.IllegalStateException</pre>
<div class="block">Performs the pre-closing checks on the <a href="IndexShard.html" title="org.elasticsearch.index.shard中的类"><code>IndexShard</code></a>.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - if the sanity checks failed</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../index.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../index-all.html">索引</a></li>
<li><a href="../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
