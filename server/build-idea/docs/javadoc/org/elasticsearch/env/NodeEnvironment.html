<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (12.0.2) on Wed Mar 15 08:58:13 CST 2023 -->
<title>NodeEnvironment (server 6.8.4.5-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="dc.created" content="2023-03-15">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="NodeEnvironment (server 6.8.4.5-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":9,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":9,"i14":9,"i15":9,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":9,"i26":10,"i27":9,"i28":10,"i29":9,"i30":10,"i31":10,"i32":10,"i33":9,"i34":10};
var tabs = {65535:["t0","\u6240\u6709\u65B9\u6CD5"],1:["t1","\u9759\u6001\u65B9\u6CD5"],2:["t2","\u5B9E\u4F8B\u65B9\u6CD5"],8:["t4","\u5177\u4F53\u65B9\u6CD5"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../index.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../index-all.html">索引</a></li>
<li><a href="../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">程序包</span>&nbsp;<a href="package-summary.html">org.elasticsearch.env</a></div>
<h2 title="类 NodeEnvironment" class="title">类 NodeEnvironment</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.elasticsearch.env.NodeEnvironment</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>所有已实现的接口:</dt>
<dd><code>java.io.Closeable</code>, <code>java.lang.AutoCloseable</code></dd>
</dl>
<hr>
<pre>public final class <span class="typeNameLabel">NodeEnvironment</span>
extends java.lang.Object
implements java.io.Closeable</pre>
<div class="block">A component that holds all data paths for a single node.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>嵌套类概要</h3>
<div class="memberSummary">
<table>
<caption><span>嵌套类</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">修饰符和类型</th>
<th class="colSecond" scope="col">类</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="NodeEnvironment.NodeLock.html" title="org.elasticsearch.env中的类">NodeEnvironment.NodeLock</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="NodeEnvironment.NodePath.html" title="org.elasticsearch.env中的类">NodeEnvironment.NodePath</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="NodeEnvironment.ShardLocker.html" title="org.elasticsearch.env中的接口">NodeEnvironment.ShardLocker</a></span></code></th>
<td class="colLast">
<div class="block">A functional interface that people can use to reference <a href="#shardLock(org.elasticsearch.index.shard.ShardId,long)"><code>shardLock(ShardId, long)</code></a></div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>字段概要</h3>
<div class="memberSummary">
<table>
<caption><span>字段</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">修饰符和类型</th>
<th class="colSecond" scope="col">字段</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../common/settings/Setting.html" title="org.elasticsearch.common.settings中的类">Setting</a>&lt;java.lang.Boolean&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ENABLE_LUCENE_SEGMENT_INFOS_TRACE_SETTING">ENABLE_LUCENE_SEGMENT_INFOS_TRACE_SETTING</a></span></code></th>
<td class="colLast">
<div class="block">If true the [verbose] SegmentInfos.infoStream logging is sent to System.out.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#INDICES_FOLDER">INDICES_FOLDER</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../common/settings/Setting.html" title="org.elasticsearch.common.settings中的类">Setting</a>&lt;java.lang.Integer&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MAX_LOCAL_STORAGE_NODES_SETTING">MAX_LOCAL_STORAGE_NODES_SETTING</a></span></code></th>
<td class="colLast">
<div class="block">Maximum number of data nodes that should run in an environment.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../common/settings/Setting.html" title="org.elasticsearch.common.settings中的类">Setting</a>&lt;java.lang.Long&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NODE_ID_SEED_SETTING">NODE_ID_SEED_SETTING</a></span></code></th>
<td class="colLast">
<div class="block">Seed for determining a persisted unique uuid of this node.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NODE_LOCK_FILENAME">NODE_LOCK_FILENAME</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NODES_FOLDER">NODES_FOLDER</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<div class="memberSummary">
<table>
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">构造器</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.elasticsearch.common.settings.Settings,org.elasticsearch.env.Environment,java.util.function.Consumer)">NodeEnvironment</a></span>&#8203;(<a href="../common/settings/Settings.html" title="org.elasticsearch.common.settings中的类">Settings</a>&nbsp;settings,
               <a href="Environment.html" title="org.elasticsearch.env中的类">Environment</a>&nbsp;environment,
               java.util.function.Consumer&lt;java.lang.String&gt;&nbsp;nodeIdConsumer)</code></th>
<td class="colLast">
<div class="block">Setup the environment.</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">所有方法</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">静态方法</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">实例方法</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">具体方法</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<tr>
<th class="colFirst" scope="col">修饰符和类型</th>
<th class="colSecond" scope="col">方法</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquireFSLockForPaths(org.elasticsearch.index.IndexSettings,java.nio.file.Path...)">acquireFSLockForPaths</a></span>&#8203;(<a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
                     java.nio.file.Path...&nbsp;shardPaths)</code></th>
<td class="colLast">
<div class="block">Acquires, then releases, all <code>write.lock</code> files in the given
 shard paths.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#availableIndexFolders()">availableIndexFolders</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns all folder names in ${data.paths}/nodes/{node.id}/indices folder</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#availableIndexFolders(java.util.function.Predicate)">availableIndexFolders</a></span>&#8203;(java.util.function.Predicate&lt;java.lang.String&gt;&nbsp;excludeIndexPathIdsPredicate)</code></th>
<td class="colLast">
<div class="block">Returns folder names in ${data.paths}/nodes/{node.id}/indices folder that don't match the given predicate.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#availableIndexFoldersForPath(org.elasticsearch.env.NodeEnvironment.NodePath)">availableIndexFoldersForPath</a></span>&#8203;(<a href="NodeEnvironment.NodePath.html" title="org.elasticsearch.env中的类">NodeEnvironment.NodePath</a>&nbsp;nodePath)</code></th>
<td class="colLast">
<div class="block">Return all directory names in the nodes/{node.id}/indices directory for the given node path.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#availableIndexFoldersForPath(org.elasticsearch.env.NodeEnvironment.NodePath,java.util.function.Predicate)">availableIndexFoldersForPath</a></span>&#8203;(<a href="NodeEnvironment.NodePath.html" title="org.elasticsearch.env中的类">NodeEnvironment.NodePath</a>&nbsp;nodePath,
                            java.util.function.Predicate&lt;java.lang.String&gt;&nbsp;excludeIndexPathIdsPredicate)</code></th>
<td class="colLast">
<div class="block">Return directory names in the nodes/{node.id}/indices directory for the given node path that don't match the given predicate.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>java.nio.file.Path[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#availableShardPaths(org.elasticsearch.index.shard.ShardId)">availableShardPaths</a></span>&#8203;(<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId)</code></th>
<td class="colLast">
<div class="block">Returns all shard paths excluding custom shard path.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteIndexDirectorySafe(org.elasticsearch.index.Index,long,org.elasticsearch.index.IndexSettings)">deleteIndexDirectorySafe</a></span>&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index,
                        long&nbsp;lockTimeoutMS,
                        <a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings)</code></th>
<td class="colLast">
<div class="block">Deletes an indexes data directory recursively iff all of the indexes
 shards locks were successfully acquired.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteIndexDirectoryUnderLock(org.elasticsearch.index.Index,org.elasticsearch.index.IndexSettings)">deleteIndexDirectoryUnderLock</a></span>&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index,
                             <a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings)</code></th>
<td class="colLast">
<div class="block">Deletes an indexes data directory recursively.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteShardDirectorySafe(org.elasticsearch.index.shard.ShardId,org.elasticsearch.index.IndexSettings)">deleteShardDirectorySafe</a></span>&#8203;(<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
                        <a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings)</code></th>
<td class="colLast">
<div class="block">Deletes a shard data directory iff the shards locks were successfully acquired.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteShardDirectoryUnderLock(org.elasticsearch.env.ShardLock,org.elasticsearch.index.IndexSettings)">deleteShardDirectoryUnderLock</a></span>&#8203;(<a href="ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a>&nbsp;lock,
                             <a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings)</code></th>
<td class="colLast">
<div class="block">Deletes a shard data directory.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ensureAtomicMoveSupported()">ensureAtomicMoveSupported</a></span>()</code></th>
<td class="colLast">
<div class="block">This method tries to write an empty file and moves it using an atomic move operation.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>java.util.Set&lt;<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findAllShardIds(org.elasticsearch.index.Index)">findAllShardIds</a></span>&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Tries to find all allocated shards for the given index
 on the current node.</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#generateNodeId(org.elasticsearch.common.settings.Settings)">generateNodeId</a></span>&#8203;(<a href="../common/settings/Settings.html" title="org.elasticsearch.common.settings中的类">Settings</a>&nbsp;settings)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLocalHostId()">getLocalHostId</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLocalHostId(org.elasticsearch.common.settings.Settings)">getLocalHostId</a></span>&#8203;(<a href="../common/settings/Settings.html" title="org.elasticsearch.common.settings中的类">Settings</a>&nbsp;settings)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNodeLockId()">getNodeLockId</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#hasNodeFile()">hasNodeFile</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>java.nio.file.Path[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#indexPaths(org.elasticsearch.index.Index)">indexPaths</a></span>&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Returns all index paths.</div>
</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code>java.util.List&lt;<a href="ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lockAllForIndex(org.elasticsearch.index.Index,org.elasticsearch.index.IndexSettings,long)">lockAllForIndex</a></span>&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index,
               <a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;settings,
               long&nbsp;lockTimeoutMS)</code></th>
<td class="colLast">
<div class="block">Tries to lock all local shards for the given index.</div>
</td>
</tr>
<tr class="altColor" id="i20">
<td class="colFirst"><code>java.util.Set&lt;<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lockedShards()">lockedShards</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns all currently lock shards.</div>
</td>
</tr>
<tr class="rowColor" id="i21">
<td class="colFirst"><code>java.nio.file.Path[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nodeDataPaths()">nodeDataPaths</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns an array of all of the nodes data locations.</div>
</td>
</tr>
<tr class="altColor" id="i22">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nodeId()">nodeId</a></span>()</code></th>
<td class="colLast">
<div class="block">returns the unique uuid describing this node.</div>
</td>
</tr>
<tr class="rowColor" id="i23">
<td class="colFirst"><code><a href="NodeEnvironment.NodePath.html" title="org.elasticsearch.env中的类">NodeEnvironment.NodePath</a>[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nodePaths()">nodePaths</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns an array of all of the <a href="NodeEnvironment.NodePath.html" title="org.elasticsearch.env中的类"><code>NodeEnvironment.NodePath</code></a>s.</div>
</td>
</tr>
<tr class="altColor" id="i24">
<td class="colFirst"><code>java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolveBaseCustomLocation(org.elasticsearch.index.IndexSettings)">resolveBaseCustomLocation</a></span>&#8203;(<a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings)</code></th>
<td class="colLast">
<div class="block">Resolve the custom path for a index's shard.</div>
</td>
</tr>
<tr class="rowColor" id="i25">
<td class="colFirst"><code>static java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolveBaseCustomLocation(org.elasticsearch.index.IndexSettings,java.nio.file.Path,int)">resolveBaseCustomLocation</a></span>&#8203;(<a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
                         java.nio.file.Path&nbsp;sharedDataPath,
                         int&nbsp;nodeLockId)</code></th>
<td class="colLast">
<div class="block">Resolve the custom path for a index's shard.</div>
</td>
</tr>
<tr class="altColor" id="i26">
<td class="colFirst"><code>java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolveCustomLocation(org.elasticsearch.index.IndexSettings,org.elasticsearch.index.shard.ShardId)">resolveCustomLocation</a></span>&#8203;(<a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
                     <a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId)</code></th>
<td class="colLast">
<div class="block">Resolve the custom path for a index's shard.</div>
</td>
</tr>
<tr class="rowColor" id="i27">
<td class="colFirst"><code>static java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolveCustomLocation(org.elasticsearch.index.IndexSettings,org.elasticsearch.index.shard.ShardId,java.nio.file.Path,int)">resolveCustomLocation</a></span>&#8203;(<a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
                     <a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
                     java.nio.file.Path&nbsp;sharedDataPath,
                     int&nbsp;nodeLockId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i28">
<td class="colFirst"><code>java.nio.file.Path[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolveIndexFolder(java.lang.String)">resolveIndexFolder</a></span>&#8203;(java.lang.String&nbsp;indexFolderName)</code></th>
<td class="colLast">
<div class="block">Resolves all existing paths to <code>indexFolderName</code> in ${data.paths}/nodes/{node.id}/indices</div>
</td>
</tr>
<tr class="rowColor" id="i29">
<td class="colFirst"><code>static java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolveNodePath(java.nio.file.Path,int)">resolveNodePath</a></span>&#8203;(java.nio.file.Path&nbsp;path,
               int&nbsp;nodeLockId)</code></th>
<td class="colLast">
<div class="block">Resolve a specific nodes/{node.id} path for the specified path and node lock id.</div>
</td>
</tr>
<tr class="altColor" id="i30">
<td class="colFirst"><code>java.util.Map&lt;<a href="NodeEnvironment.NodePath.html" title="org.elasticsearch.env中的类">NodeEnvironment.NodePath</a>,&#8203;java.lang.Long&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardCountPerPath(org.elasticsearch.index.Index)">shardCountPerPath</a></span>&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Find all the shards for this index, returning a map of the <code>NodePath</code> to the number of shards on that path</div>
</td>
</tr>
<tr class="rowColor" id="i31">
<td class="colFirst"><code><a href="ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardLock(org.elasticsearch.index.shard.ShardId)">shardLock</a></span>&#8203;(<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Tries to lock the given shards ID.</div>
</td>
</tr>
<tr class="altColor" id="i32">
<td class="colFirst"><code><a href="ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardLock(org.elasticsearch.index.shard.ShardId,long)">shardLock</a></span>&#8203;(<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
         long&nbsp;lockTimeoutMS)</code></th>
<td class="colLast">
<div class="block">Tries to lock the given shards ID.</div>
</td>
</tr>
<tr class="rowColor" id="i33">
<td class="colFirst"><code>static java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardStatePathToDataPath(java.nio.file.Path)">shardStatePathToDataPath</a></span>&#8203;(java.nio.file.Path&nbsp;shardPath)</code></th>
<td class="colLast">
<div class="block">Returns the <code>NodePath.path</code> for this shard.</div>
</td>
</tr>
<tr class="altColor" id="i34">
<td class="colFirst"><code>java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sharedDataPath()">sharedDataPath</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns shared data path for this node environment</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>字段详细资料</h3>
<a id="MAX_LOCAL_STORAGE_NODES_SETTING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_LOCAL_STORAGE_NODES_SETTING</h4>
<pre>public static final&nbsp;<a href="../common/settings/Setting.html" title="org.elasticsearch.common.settings中的类">Setting</a>&lt;java.lang.Integer&gt; MAX_LOCAL_STORAGE_NODES_SETTING</pre>
<div class="block">Maximum number of data nodes that should run in an environment.</div>
</li>
</ul>
<a id="NODE_ID_SEED_SETTING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NODE_ID_SEED_SETTING</h4>
<pre>public static final&nbsp;<a href="../common/settings/Setting.html" title="org.elasticsearch.common.settings中的类">Setting</a>&lt;java.lang.Long&gt; NODE_ID_SEED_SETTING</pre>
<div class="block">Seed for determining a persisted unique uuid of this node. If the node has already a persisted uuid on disk,
 this seed will be ignored and the uuid from disk will be reused.</div>
</li>
</ul>
<a id="ENABLE_LUCENE_SEGMENT_INFOS_TRACE_SETTING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ENABLE_LUCENE_SEGMENT_INFOS_TRACE_SETTING</h4>
<pre>public static final&nbsp;<a href="../common/settings/Setting.html" title="org.elasticsearch.common.settings中的类">Setting</a>&lt;java.lang.Boolean&gt; ENABLE_LUCENE_SEGMENT_INFOS_TRACE_SETTING</pre>
<div class="block">If true the [verbose] SegmentInfos.infoStream logging is sent to System.out.</div>
</li>
</ul>
<a id="NODES_FOLDER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NODES_FOLDER</h4>
<pre>public static final&nbsp;java.lang.String NODES_FOLDER</pre>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../constant-values.html#org.elasticsearch.env.NodeEnvironment.NODES_FOLDER">常量字段值</a></dd>
</dl>
</li>
</ul>
<a id="INDICES_FOLDER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INDICES_FOLDER</h4>
<pre>public static final&nbsp;java.lang.String INDICES_FOLDER</pre>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../constant-values.html#org.elasticsearch.env.NodeEnvironment.INDICES_FOLDER">常量字段值</a></dd>
</dl>
</li>
</ul>
<a id="NODE_LOCK_FILENAME">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NODE_LOCK_FILENAME</h4>
<pre>public static final&nbsp;java.lang.String NODE_LOCK_FILENAME</pre>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../constant-values.html#org.elasticsearch.env.NodeEnvironment.NODE_LOCK_FILENAME">常量字段值</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a id="&lt;init&gt;(org.elasticsearch.common.settings.Settings,org.elasticsearch.env.Environment,java.util.function.Consumer)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NodeEnvironment</h4>
<pre>public&nbsp;NodeEnvironment&#8203;(<a href="../common/settings/Settings.html" title="org.elasticsearch.common.settings中的类">Settings</a>&nbsp;settings,
                       <a href="Environment.html" title="org.elasticsearch.env中的类">Environment</a>&nbsp;environment,
                       java.util.function.Consumer&lt;java.lang.String&gt;&nbsp;nodeIdConsumer)
                throws java.io.IOException</pre>
<div class="block">Setup the environment.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>settings</code> - settings from elasticsearch.yml</dd>
<dd><code>nodeIdConsumer</code> - called as soon as the node id is available to the
      node name in log messages if it wasn't loaded from
      elasticsearch.yml</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a id="resolveNodePath(java.nio.file.Path,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resolveNodePath</h4>
<pre class="methodSignature">public static&nbsp;java.nio.file.Path&nbsp;resolveNodePath&#8203;(java.nio.file.Path&nbsp;path,
                                                 int&nbsp;nodeLockId)</pre>
<div class="block">Resolve a specific nodes/{node.id} path for the specified path and node lock id.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>path</code> - the path</dd>
<dd><code>nodeLockId</code> - the node lock id</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the resolved path</dd>
</dl>
</li>
</ul>
<a id="getLocalHostId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocalHostId</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;getLocalHostId()</pre>
</li>
</ul>
<a id="getLocalHostId(org.elasticsearch.common.settings.Settings)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocalHostId</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;getLocalHostId&#8203;(<a href="../common/settings/Settings.html" title="org.elasticsearch.common.settings中的类">Settings</a>&nbsp;settings)</pre>
</li>
</ul>
<a id="generateNodeId(org.elasticsearch.common.settings.Settings)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateNodeId</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;generateNodeId&#8203;(<a href="../common/settings/Settings.html" title="org.elasticsearch.common.settings中的类">Settings</a>&nbsp;settings)</pre>
</li>
</ul>
<a id="deleteShardDirectorySafe(org.elasticsearch.index.shard.ShardId,org.elasticsearch.index.IndexSettings)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteShardDirectorySafe</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;deleteShardDirectorySafe&#8203;(<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
                                     <a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings)
                              throws java.io.IOException,
                                     <a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></pre>
<div class="block">Deletes a shard data directory iff the shards locks were successfully acquired.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>shardId</code> - the id of the shard to delete to delete</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if an IOException occurs</dd>
<dd><code><a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></code></dd>
</dl>
</li>
</ul>
<a id="acquireFSLockForPaths(org.elasticsearch.index.IndexSettings,java.nio.file.Path...)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireFSLockForPaths</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;acquireFSLockForPaths&#8203;(<a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
                                         java.nio.file.Path...&nbsp;shardPaths)
                                  throws java.io.IOException</pre>
<div class="block">Acquires, then releases, all <code>write.lock</code> files in the given
 shard paths. The "write.lock" file is assumed to be under the shard
 path's "index" directory as used by Elasticsearch.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>org.apache.lucene.store.LockObtainFailedException</code> - if any of the locks could not be acquired</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="deleteShardDirectoryUnderLock(org.elasticsearch.env.ShardLock,org.elasticsearch.index.IndexSettings)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteShardDirectoryUnderLock</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;deleteShardDirectoryUnderLock&#8203;(<a href="ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a>&nbsp;lock,
                                          <a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings)
                                   throws java.io.IOException</pre>
<div class="block">Deletes a shard data directory. Note: this method assumes that the shard
 lock is acquired. This method will also attempt to acquire the write
 locks for the shard's paths before deleting the data, but this is best
 effort, as the lock is released before the deletion happens in order to
 allow the folder to be deleted</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>lock</code> - the shards lock</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if an IOException occurs</dd>
<dd><code><a href="../ElasticsearchException.html" title="org.elasticsearch中的类">ElasticsearchException</a></code> - if the write.lock is not acquirable</dd>
</dl>
</li>
</ul>
<a id="deleteIndexDirectorySafe(org.elasticsearch.index.Index,long,org.elasticsearch.index.IndexSettings)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteIndexDirectorySafe</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;deleteIndexDirectorySafe&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index,
                                     long&nbsp;lockTimeoutMS,
                                     <a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings)
                              throws java.io.IOException,
                                     <a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></pre>
<div class="block">Deletes an indexes data directory recursively iff all of the indexes
 shards locks were successfully acquired. If any of the indexes shard directories can't be locked
 non of the shards will be deleted</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>index</code> - the index to delete</dd>
<dd><code>lockTimeoutMS</code> - how long to wait for acquiring the indices shard locks</dd>
<dd><code>indexSettings</code> - settings for the index being deleted</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if any of the shards data directories can't be locked or deleted</dd>
<dd><code><a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></code></dd>
</dl>
</li>
</ul>
<a id="deleteIndexDirectoryUnderLock(org.elasticsearch.index.Index,org.elasticsearch.index.IndexSettings)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteIndexDirectoryUnderLock</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;deleteIndexDirectoryUnderLock&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index,
                                          <a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings)
                                   throws java.io.IOException</pre>
<div class="block">Deletes an indexes data directory recursively.
 Note: this method assumes that the shard lock is acquired</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>index</code> - the index to delete</dd>
<dd><code>indexSettings</code> - settings for the index being deleted</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="lockAllForIndex(org.elasticsearch.index.Index,org.elasticsearch.index.IndexSettings,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockAllForIndex</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a>&gt;&nbsp;lockAllForIndex&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index,
                                                 <a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;settings,
                                                 long&nbsp;lockTimeoutMS)
                                          throws java.io.IOException,
                                                 <a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></pre>
<div class="block">Tries to lock all local shards for the given index. If any of the shard locks can't be acquired
 a <a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类"><code>ShardLockObtainFailedException</code></a> is thrown and all previously acquired locks are released.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>index</code> - the index to lock shards for</dd>
<dd><code>lockTimeoutMS</code> - how long to wait for acquiring the indices shard locks</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the <a href="ShardLock.html" title="org.elasticsearch.env中的类"><code>ShardLock</code></a> instances for this index.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if an IOException occurs.</dd>
<dd><code><a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></code></dd>
</dl>
</li>
</ul>
<a id="shardLock(org.elasticsearch.index.shard.ShardId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shardLock</h4>
<pre class="methodSignature">public&nbsp;<a href="ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a>&nbsp;shardLock&#8203;(<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;id)
                    throws <a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></pre>
<div class="block">Tries to lock the given shards ID. A shard lock is required to perform any kind of
 write operation on a shards data directory like deleting files, creating a new index writer
 or recover from a different shard instance into it. If the shard lock can not be acquired
 a <a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类"><code>ShardLockObtainFailedException</code></a> is thrown.

 Note: this method will return immediately if the lock can't be acquired.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>id</code> - the shard ID to lock</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the shard lock. Call <a href="ShardLock.html#close()"><code>ShardLock.close()</code></a> to release the lock</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></code></dd>
</dl>
</li>
</ul>
<a id="shardLock(org.elasticsearch.index.shard.ShardId,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shardLock</h4>
<pre class="methodSignature">public&nbsp;<a href="ShardLock.html" title="org.elasticsearch.env中的类">ShardLock</a>&nbsp;shardLock&#8203;(<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
                           long&nbsp;lockTimeoutMS)
                    throws <a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></pre>
<div class="block">Tries to lock the given shards ID. A shard lock is required to perform any kind of
 write operation on a shards data directory like deleting files, creating a new index writer
 or recover from a different shard instance into it. If the shard lock can not be acquired
 a <a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类"><code>ShardLockObtainFailedException</code></a> is thrown</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>shardId</code> - the shard ID to lock</dd>
<dd><code>lockTimeoutMS</code> - the lock timeout in milliseconds</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the shard lock. Call <a href="ShardLock.html#close()"><code>ShardLock.close()</code></a> to release the lock</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="ShardLockObtainFailedException.html" title="org.elasticsearch.env中的类">ShardLockObtainFailedException</a></code></dd>
</dl>
</li>
</ul>
<a id="lockedShards()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockedShards</h4>
<pre class="methodSignature">public&nbsp;java.util.Set&lt;<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&gt;&nbsp;lockedShards()</pre>
<div class="block">Returns all currently lock shards.

 Note: the shard ids return do not contain a valid Index UUID</div>
</li>
</ul>
<a id="hasNodeFile()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasNodeFile</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;hasNodeFile()</pre>
</li>
</ul>
<a id="nodeDataPaths()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nodeDataPaths</h4>
<pre class="methodSignature">public&nbsp;java.nio.file.Path[]&nbsp;nodeDataPaths()</pre>
<div class="block">Returns an array of all of the nodes data locations.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - if the node is not configured to store local locations</dd>
</dl>
</li>
</ul>
<a id="sharedDataPath()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sharedDataPath</h4>
<pre class="methodSignature">public&nbsp;java.nio.file.Path&nbsp;sharedDataPath()</pre>
<div class="block">Returns shared data path for this node environment</div>
</li>
</ul>
<a id="nodeId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nodeId</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;nodeId()</pre>
<div class="block">returns the unique uuid describing this node. The uuid is persistent in the data folder of this node
 and remains across restarts.</div>
</li>
</ul>
<a id="nodePaths()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nodePaths</h4>
<pre class="methodSignature">public&nbsp;<a href="NodeEnvironment.NodePath.html" title="org.elasticsearch.env中的类">NodeEnvironment.NodePath</a>[]&nbsp;nodePaths()</pre>
<div class="block">Returns an array of all of the <a href="NodeEnvironment.NodePath.html" title="org.elasticsearch.env中的类"><code>NodeEnvironment.NodePath</code></a>s.</div>
</li>
</ul>
<a id="getNodeLockId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeLockId</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getNodeLockId()</pre>
</li>
</ul>
<a id="indexPaths(org.elasticsearch.index.Index)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>indexPaths</h4>
<pre class="methodSignature">public&nbsp;java.nio.file.Path[]&nbsp;indexPaths&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index)</pre>
<div class="block">Returns all index paths.</div>
</li>
</ul>
<a id="availableShardPaths(org.elasticsearch.index.shard.ShardId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>availableShardPaths</h4>
<pre class="methodSignature">public&nbsp;java.nio.file.Path[]&nbsp;availableShardPaths&#8203;(<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId)</pre>
<div class="block">Returns all shard paths excluding custom shard path. Note: Shards are only allocated on one of the
 returned paths. The returned array may contain paths to non-existing directories.</div>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../index/IndexSettings.html#hasCustomDataPath()"><code>IndexSettings.hasCustomDataPath()</code></a>, 
<a href="#resolveCustomLocation(org.elasticsearch.index.IndexSettings,org.elasticsearch.index.shard.ShardId)"><code>resolveCustomLocation(IndexSettings, ShardId)</code></a></dd>
</dl>
</li>
</ul>
<a id="availableIndexFolders()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>availableIndexFolders</h4>
<pre class="methodSignature">public&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;availableIndexFolders()
                                                      throws java.io.IOException</pre>
<div class="block">Returns all folder names in ${data.paths}/nodes/{node.id}/indices folder</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="availableIndexFolders(java.util.function.Predicate)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>availableIndexFolders</h4>
<pre class="methodSignature">public&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;availableIndexFolders&#8203;(java.util.function.Predicate&lt;java.lang.String&gt;&nbsp;excludeIndexPathIdsPredicate)
                                                      throws java.io.IOException</pre>
<div class="block">Returns folder names in ${data.paths}/nodes/{node.id}/indices folder that don't match the given predicate.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>excludeIndexPathIdsPredicate</code> - folder names to exclude</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="availableIndexFoldersForPath(org.elasticsearch.env.NodeEnvironment.NodePath)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>availableIndexFoldersForPath</h4>
<pre class="methodSignature">public&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;availableIndexFoldersForPath&#8203;(<a href="NodeEnvironment.NodePath.html" title="org.elasticsearch.env中的类">NodeEnvironment.NodePath</a>&nbsp;nodePath)
                                                             throws java.io.IOException</pre>
<div class="block">Return all directory names in the nodes/{node.id}/indices directory for the given node path.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>nodePath</code> - the path</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>all directories that could be indices for the given node path.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O exception occurs traversing the filesystem</dd>
</dl>
</li>
</ul>
<a id="availableIndexFoldersForPath(org.elasticsearch.env.NodeEnvironment.NodePath,java.util.function.Predicate)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>availableIndexFoldersForPath</h4>
<pre class="methodSignature">public&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;availableIndexFoldersForPath&#8203;(<a href="NodeEnvironment.NodePath.html" title="org.elasticsearch.env中的类">NodeEnvironment.NodePath</a>&nbsp;nodePath,
                                                                    java.util.function.Predicate&lt;java.lang.String&gt;&nbsp;excludeIndexPathIdsPredicate)
                                                             throws java.io.IOException</pre>
<div class="block">Return directory names in the nodes/{node.id}/indices directory for the given node path that don't match the given predicate.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>nodePath</code> - the path</dd>
<dd><code>excludeIndexPathIdsPredicate</code> - folder names to exclude</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>all directories that could be indices for the given node path.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O exception occurs traversing the filesystem</dd>
</dl>
</li>
</ul>
<a id="resolveIndexFolder(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resolveIndexFolder</h4>
<pre class="methodSignature">public&nbsp;java.nio.file.Path[]&nbsp;resolveIndexFolder&#8203;(java.lang.String&nbsp;indexFolderName)
                                        throws java.io.IOException</pre>
<div class="block">Resolves all existing paths to <code>indexFolderName</code> in ${data.paths}/nodes/{node.id}/indices</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="findAllShardIds(org.elasticsearch.index.Index)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findAllShardIds</h4>
<pre class="methodSignature">public&nbsp;java.util.Set&lt;<a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&gt;&nbsp;findAllShardIds&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index)
                                       throws java.io.IOException</pre>
<div class="block">Tries to find all allocated shards for the given index
 on the current node. NOTE: This methods is prone to race-conditions on the filesystem layer since it might not
 see directories created concurrently or while it's traversing.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>index</code> - the index to filter shards</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>a set of shard IDs</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if an IOException occurs</dd>
</dl>
</li>
</ul>
<a id="shardCountPerPath(org.elasticsearch.index.Index)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shardCountPerPath</h4>
<pre class="methodSignature">public&nbsp;java.util.Map&lt;<a href="NodeEnvironment.NodePath.html" title="org.elasticsearch.env中的类">NodeEnvironment.NodePath</a>,&#8203;java.lang.Long&gt;&nbsp;shardCountPerPath&#8203;(<a href="../index/Index.html" title="org.elasticsearch.index中的类">Index</a>&nbsp;index)
                                                                               throws java.io.IOException</pre>
<div class="block">Find all the shards for this index, returning a map of the <code>NodePath</code> to the number of shards on that path</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>index</code> - the index by which to filter shards</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>a map of NodePath to count of the shards for the index on that path</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if an IOException occurs</dd>
</dl>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code>close</code>&nbsp;在接口中&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code>close</code>&nbsp;在接口中&nbsp;<code>java.io.Closeable</code></dd>
</dl>
</li>
</ul>
<a id="ensureAtomicMoveSupported()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ensureAtomicMoveSupported</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;ensureAtomicMoveSupported()
                               throws java.io.IOException</pre>
<div class="block">This method tries to write an empty file and moves it using an atomic move operation.
 This method throws an <code>IllegalStateException</code> if this operation is
 not supported by the filesystem. This test is executed on each of the data directories.
 This method cleans up all files even in the case of an error.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="resolveBaseCustomLocation(org.elasticsearch.index.IndexSettings)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resolveBaseCustomLocation</h4>
<pre class="methodSignature">public&nbsp;java.nio.file.Path&nbsp;resolveBaseCustomLocation&#8203;(<a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings)</pre>
<div class="block">Resolve the custom path for a index's shard.
 Uses the <code>IndexMetaData.SETTING_DATA_PATH</code> setting to determine
 the root path for the index.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>indexSettings</code> - settings for the index</dd>
</dl>
</li>
</ul>
<a id="resolveBaseCustomLocation(org.elasticsearch.index.IndexSettings,java.nio.file.Path,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resolveBaseCustomLocation</h4>
<pre class="methodSignature">public static&nbsp;java.nio.file.Path&nbsp;resolveBaseCustomLocation&#8203;(<a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
                                                           java.nio.file.Path&nbsp;sharedDataPath,
                                                           int&nbsp;nodeLockId)</pre>
<div class="block">Resolve the custom path for a index's shard.
 Uses the <code>IndexMetaData.SETTING_DATA_PATH</code> setting to determine
 the root path for the index.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>indexSettings</code> - settings for the index</dd>
</dl>
</li>
</ul>
<a id="resolveCustomLocation(org.elasticsearch.index.IndexSettings,org.elasticsearch.index.shard.ShardId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resolveCustomLocation</h4>
<pre class="methodSignature">public&nbsp;java.nio.file.Path&nbsp;resolveCustomLocation&#8203;(<a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
                                                <a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId)</pre>
<div class="block">Resolve the custom path for a index's shard.
 Uses the <code>IndexMetaData.SETTING_DATA_PATH</code> setting to determine
 the root path for the index.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>indexSettings</code> - settings for the index</dd>
<dd><code>shardId</code> - shard to resolve the path to</dd>
</dl>
</li>
</ul>
<a id="resolveCustomLocation(org.elasticsearch.index.IndexSettings,org.elasticsearch.index.shard.ShardId,java.nio.file.Path,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resolveCustomLocation</h4>
<pre class="methodSignature">public static&nbsp;java.nio.file.Path&nbsp;resolveCustomLocation&#8203;(<a href="../index/IndexSettings.html" title="org.elasticsearch.index中的类">IndexSettings</a>&nbsp;indexSettings,
                                                       <a href="../index/shard/ShardId.html" title="org.elasticsearch.index.shard中的类">ShardId</a>&nbsp;shardId,
                                                       java.nio.file.Path&nbsp;sharedDataPath,
                                                       int&nbsp;nodeLockId)</pre>
</li>
</ul>
<a id="shardStatePathToDataPath(java.nio.file.Path)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>shardStatePathToDataPath</h4>
<pre class="methodSignature">public static&nbsp;java.nio.file.Path&nbsp;shardStatePathToDataPath&#8203;(java.nio.file.Path&nbsp;shardPath)</pre>
<div class="block">Returns the <code>NodePath.path</code> for this shard.</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../index.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../index-all.html">索引</a></li>
<li><a href="../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
